<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>How to Use · TulipaEnergyModel.jl</title><meta name="title" content="How to Use · TulipaEnergyModel.jl"/><meta property="og:title" content="How to Use · TulipaEnergyModel.jl"/><meta property="twitter:title" content="How to Use · TulipaEnergyModel.jl"/><meta name="description" content="Documentation for TulipaEnergyModel.jl."/><meta property="og:description" content="Documentation for TulipaEnergyModel.jl."/><meta property="twitter:description" content="Documentation for TulipaEnergyModel.jl."/><meta property="og:url" content="https://TulipaEnergy.github.io/TulipaEnergyModel.jl/how-to-use/"/><meta property="twitter:url" content="https://TulipaEnergy.github.io/TulipaEnergyModel.jl/how-to-use/"/><link rel="canonical" href="https://TulipaEnergy.github.io/TulipaEnergyModel.jl/how-to-use/"/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">TulipaEnergyModel.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../api/">API</a></li><li class="is-active"><a class="tocitem" href>How to Use</a><ul class="internal"><li><a class="tocitem" href="#Install"><span>Install</span></a></li><li><a class="tocitem" href="#Run-Scenario"><span>Run Scenario</span></a></li><li><a class="tocitem" href="#Input"><span>Input</span></a></li><li><a class="tocitem" href="#Structures"><span>Structures</span></a></li></ul></li><li><a class="tocitem" href="../mathematical-formulation/">Mathematical Formulation</a></li><li><a class="tocitem" href="../tutorial/">Tutorial</a></li><li><a class="tocitem" href="../reference/">Reference</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>How to Use</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>How to Use</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/TulipaEnergy/TulipaEnergyModel.jl/blob/main/docs/src/how-to-use.md#" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="how-to-use"><a class="docs-heading-anchor" href="#how-to-use">How to Use</a><a id="how-to-use-1"></a><a class="docs-heading-anchor-permalink" href="#how-to-use" title="Permalink"></a></h1><ul><li><a href="#how-to-use">How to Use</a></li><li class="no-marker"><ul><li><a href="#Install">Install</a></li><li><a href="#Run-Scenario">Run Scenario</a></li><li><a href="#Input">Input</a></li><li class="no-marker"><ul><li><a href="#CSV">CSV</a></li><li class="no-marker"><ul><li><a href="#assets-data.csv"><code>assets-data.csv</code></a></li><li><a href="#flows-data.csv"><code>flows-data.csv</code></a></li><li><a href="#assets-profiles.csv"><code>assets-profiles.csv</code></a></li><li><a href="#flows-profiles.csv"><code>flows-profiles.csv</code></a></li><li><a href="#assets-partitions.csv"><code>assets-partitions.csv</code></a></li><li><a href="#flows-partitions.csv"><code>flows-partitions.csv</code></a></li><li><a href="#rep-periods-data.csv"><code>rep-periods-data.csv</code></a></li></ul></li></ul></li><li><a href="#Structures">Structures</a></li><li class="no-marker"><ul><li><a href="#EnergyProblem">EnergyProblem</a></li><li><a href="#Graph">Graph</a></li><li><a href="#GraphAssetData">GraphAssetData</a></li><li><a href="#GraphFlowData">GraphFlowData</a></li><li><a href="#Partition">Partition</a></li><li><a href="#representative-periods">Representative Periods</a></li><li><a href="#Solution">Solution</a></li><li><a href="#time-blocks">Time Blocks</a></li></ul></li></ul></li></ul><h2 id="Install"><a class="docs-heading-anchor" href="#Install">Install</a><a id="Install-1"></a><a class="docs-heading-anchor-permalink" href="#Install" title="Permalink"></a></h2><ul><li>Clone the repository from <a href="https://github.com/TulipaEnergy/TulipaEnergyModel.jl">TulipaEnergyModel.jl</a> into your local machine</li><li>Open the project in your favorite IDE (e.g., <a href="https://code.visualstudio.com/">Visual Studio Code</a>)</li><li>Start a Julia REPL and then:<ul><li><code>]</code>: Enter package mode</li><li><code>activate .</code> : Activate here (root of project)</li><li><code>instantiate</code> : Instantiate any packages you need according to the Project.toml</li><li><code>test</code>: (Optional) Try running the tests to see if you&#39;re set up correctly - they should pass</li></ul></li></ul><h2 id="Run-Scenario"><a class="docs-heading-anchor" href="#Run-Scenario">Run Scenario</a><a id="Run-Scenario-1"></a><a class="docs-heading-anchor-permalink" href="#Run-Scenario" title="Permalink"></a></h2><p>To run a scenario, use the function:</p><ul><li><a href="../reference/#TulipaEnergyModel.run_scenario-Tuple{AbstractString}"><code>run_scenario(input_folder)</code></a></li><li><a href="../reference/#TulipaEnergyModel.run_scenario-Tuple{AbstractString}"><code>run_scenario(input_folder, output_folder)</code></a></li></ul><p>The input<em>folder should contain CSV files as described below. The output</em>folder is optional, if the user wants to export the output.</p><h2 id="Input"><a class="docs-heading-anchor" href="#Input">Input</a><a id="Input-1"></a><a class="docs-heading-anchor-permalink" href="#Input" title="Permalink"></a></h2><p>Currently, we only accept input from CSV files. There should be 7 files, each following the specification of input structures. You can also check the <a href="https://github.com/TulipaEnergy/TulipaEnergyModel.jl/tree/main/test/inputs"><code>test/inputs</code> folder</a> for examples.</p><h3 id="CSV"><a class="docs-heading-anchor" href="#CSV">CSV</a><a id="CSV-1"></a><a class="docs-heading-anchor-permalink" href="#CSV" title="Permalink"></a></h3><h4 id="assets-data.csv"><a class="docs-heading-anchor" href="#assets-data.csv"><code>assets-data.csv</code></a><a id="assets-data.csv-1"></a><a class="docs-heading-anchor-permalink" href="#assets-data.csv" title="Permalink"></a></h4><p>This files includes the list of assets and the data associate with each of them.</p><p>Required columns:</p><ul><li><code>name: String</code></li><li><code>type: String</code></li><li><code>active: Bool</code></li><li><code>investable: Bool</code></li><li><code>investment_cost: Float64</code></li><li><code>investment_limit: Union{Missing, Float64}</code></li><li><code>capacity: Float64</code></li><li><code>initial_capacity: Float64</code></li><li><code>peak_demand: Float64</code></li><li><code>initial_storage_capacity: Float64</code></li><li><code>initial_storage_level: Float64</code></li><li><code>energy_to_power_ratio: Float64</code></li></ul><h4 id="flows-data.csv"><a class="docs-heading-anchor" href="#flows-data.csv"><code>flows-data.csv</code></a><a id="flows-data.csv-1"></a><a class="docs-heading-anchor-permalink" href="#flows-data.csv" title="Permalink"></a></h4><p>Similar to <code>assets-data.csv</code>, but for flows. Each flow is defined as a pair of assets.</p><p>Required columns:</p><ul><li><code>carrier: String</code></li><li><code>from_asset: String</code></li><li><code>to_asset: String</code></li><li><code>active: Bool</code></li><li><code>is_transport: Bool</code></li><li><code>investable: Bool</code></li><li><code>variable_cost: Float64</code></li><li><code>investment_cost: Float64</code></li><li><code>investment_limit: Union{Missing, Float64}</code></li><li><code>export_capacity: Float64</code></li><li><code>import_capacity: Float64</code></li><li><code>initial_capacity: Float64</code></li><li><code>efficiency: Float64</code></li></ul><h4 id="assets-profiles.csv"><a class="docs-heading-anchor" href="#assets-profiles.csv"><code>assets-profiles.csv</code></a><a id="assets-profiles.csv-1"></a><a class="docs-heading-anchor-permalink" href="#assets-profiles.csv" title="Permalink"></a></h4><p>This file contains the profiles for each asset.</p><p>Required columns:</p><ul><li><code>asset: String</code></li><li><code>rep_period_id: Int64</code></li><li><code>time_step: Int64</code></li><li><code>value: Float64</code></li></ul><h4 id="flows-profiles.csv"><a class="docs-heading-anchor" href="#flows-profiles.csv"><code>flows-profiles.csv</code></a><a id="flows-profiles.csv-1"></a><a class="docs-heading-anchor-permalink" href="#flows-profiles.csv" title="Permalink"></a></h4><p>Similar to <code>assets-profiels.csv</code>, but for flows.</p><p>Required columns:</p><ul><li><code>from_asset: String</code></li><li><code>to_asset: String</code></li><li><code>rep_period_id: String</code></li><li><code>time_step: Bool</code></li><li><code>value: Bool</code></li></ul><h4 id="assets-partitions.csv"><a class="docs-heading-anchor" href="#assets-partitions.csv"><code>assets-partitions.csv</code></a><a id="assets-partitions.csv-1"></a><a class="docs-heading-anchor-permalink" href="#assets-partitions.csv" title="Permalink"></a></h4><p>Contains a description of the <a href="#Partition">partition</a> for each asset. If not specified, each asset will have the same time resolution as representative period.</p><p>To specify the desired resolution, there are currently three options, based on the value of the column <code>specification</code>. The column <code>partition</code> serves to specify the partitions in the specification given by the column <code>specification</code>.</p><ul><li><code>specification = uniform</code>: Set the resolution to a uniform amount, i.e., a time block is made of X time steps. The number X is defined in the column <code>partition</code>. The number of time steps in the representative period must be divisible by <code>X</code>.</li><li><code>specification = explicit</code>: Set the resolution acording to a list of numbers separated by <code>;</code> on the <code>partition</code>. Each number the list is the number of time steps for that time block. For instance, <code>2;3;4</code> means that there are three time blocks, the first has 2 time steps, the second has 3 time steps, and the last has 4 time steps. The sum of the number of time steps must be equal to the total number of time steps in that representative period.</li><li><code>specification = math</code>: Similar to explicit, but using <code>+</code> and <code>x</code> to give the number of time steps. The value of <code>partition</code> is a sequence of elements of the form <code>NxT</code> separated by <code>+</code>. <code>NxT</code> means <code>N</code> time blocks of length <code>T</code>.</li></ul><p>The table below shows various results for different formats for a representative period with 12 time steps.</p><table><tr><th style="text-align: left">Time Block</th><th style="text-align: left">:uniform</th><th style="text-align: left">:explicit</th><th style="text-align: left">:math</th></tr><tr><td style="text-align: left">1:3, 4:6, 7:9, 10:12</td><td style="text-align: left">3</td><td style="text-align: left">3;3;3;3</td><td style="text-align: left">4x3</td></tr><tr><td style="text-align: left">1:4, 5:8, 9:12</td><td style="text-align: left">4</td><td style="text-align: left">4;4;4</td><td style="text-align: left">3x4</td></tr><tr><td style="text-align: left">1:1, 2:2, …, 12:12</td><td style="text-align: left">1</td><td style="text-align: left">1;1;1;1;1;1;1;1;1;1;1;1</td><td style="text-align: left">12x1</td></tr><tr><td style="text-align: left">1:3, 4:6, 7:10, 11:12</td><td style="text-align: left">NA</td><td style="text-align: left">3;3;4;2</td><td style="text-align: left">2x3+1x4+1x2</td></tr></table><p>Required columns:</p><ul><li><code>asset: String</code></li><li><code>rep_period_id: Int64</code></li><li><code>specification: Symbol</code></li><li><code>partition: String</code></li></ul><h4 id="flows-partitions.csv"><a class="docs-heading-anchor" href="#flows-partitions.csv"><code>flows-partitions.csv</code></a><a id="flows-partitions.csv-1"></a><a class="docs-heading-anchor-permalink" href="#flows-partitions.csv" title="Permalink"></a></h4><p>Similar to <code>assets-partitions.csv</code>, but for flows.</p><p>Required columns:</p><ul><li><code>from_asset: String</code></li><li><code>to_asset: String</code></li><li><code>rep_period_id: Int64</code></li><li><code>specification: Symbol</code></li><li><code>partition: String</code></li></ul><h4 id="rep-periods-data.csv"><a class="docs-heading-anchor" href="#rep-periods-data.csv"><code>rep-periods-data.csv</code></a><a id="rep-periods-data.csv-1"></a><a class="docs-heading-anchor-permalink" href="#rep-periods-data.csv" title="Permalink"></a></h4><p>Describes the <a href="#representative-periods">representative periods</a>.</p><p>Required columns:</p><ul><li><code>id: Int64</code></li><li><code>weight: Float64</code></li><li><code>num_time_steps: Int64</code></li><li><code>resolution: Float64</code></li></ul><h2 id="Structures"><a class="docs-heading-anchor" href="#Structures">Structures</a><a id="Structures-1"></a><a class="docs-heading-anchor-permalink" href="#Structures" title="Permalink"></a></h2><p>The list of relevant structures used in this package are listed below:</p><h3 id="EnergyProblem"><a class="docs-heading-anchor" href="#EnergyProblem">EnergyProblem</a><a id="EnergyProblem-1"></a><a class="docs-heading-anchor-permalink" href="#EnergyProblem" title="Permalink"></a></h3><p>The <code>EnergyProblem</code> structure is a wrapper around various other relevant structures. It hides the complexity behind the energy problem, making the usage more friendly, although more verbose.</p><p>The fields of <code>EnergyProblem</code> are</p><ul><li><code>graph</code>: The <a href="#Graph">Graph</a> object that defines the geometry of the energy problem.</li><li><code>representative_periods</code>: A vector of <a href="#representative-periods">Representative Periods</a>.</li><li><code>constraints_partitions</code>: Dictionaries that connects pairs of asset and representative periods to <a href="#Partition">time partitions (vectors of time blocks)</a></li><li><code>model</code>: A JuMP model object. Initially <code>nothing</code>.</li><li><code>solved</code>: A boolean indicating whether the <code>model</code> has been solved or not.</li><li><code>objective_value</code>: After the model has been solved, this is the objective value at the solution.</li><li><code>termination_status</code>: After the model has been solved, this is the termination status.</li></ul><p>See the <a href="../tutorial/#basic-example">basic example tutorial</a> to see how these can be used.</p><h3 id="Graph"><a class="docs-heading-anchor" href="#Graph">Graph</a><a id="Graph-1"></a><a class="docs-heading-anchor-permalink" href="#Graph" title="Permalink"></a></h3><p>The energy problem is defined using a graph. Each vertex is an asset and each edge is a flow.</p><p>We use <a href="https://github.com/JuliaGraphs/MetaGraphsNext.jl">MetaGraphsNext.jl</a> to define the graph and its objects. Using MetaGraphsNext we can define a graph with metadata, i.e., we can associate data to each asset and each flow. Furthermore, we can define the labels of each asset as keys to access the elements of the graph. The assets in the graph are of type <a href="#GraphAssetData">GraphAssetData</a>, and the flows are of type <a href="#GraphFlowData">GraphFlowData</a>.</p><p>The graph can be created using the <a href="../reference/#TulipaEnergyModel.create_graph_and_representative_periods_from_csv_folder-Tuple{AbstractString}"><code>create_graph_and_representative_periods_from_csv_folder</code></a> function, or it can be accessed from an <a href="#EnergyProblem">EnergyProblem</a>.</p><p>See how to use the graph in the <a href="../tutorial/#graph-tutorial">graph tutorial</a>.</p><h3 id="GraphAssetData"><a class="docs-heading-anchor" href="#GraphAssetData">GraphAssetData</a><a id="GraphAssetData-1"></a><a class="docs-heading-anchor-permalink" href="#GraphAssetData" title="Permalink"></a></h3><p>This structure holds all the information of a given asset. These are stored inside the <a href="#Graph">Graph</a>. Given a graph <code>graph</code> and an asset <code>a</code>, it can be access through <code>graph[a]</code>.</p><h3 id="GraphFlowData"><a class="docs-heading-anchor" href="#GraphFlowData">GraphFlowData</a><a id="GraphFlowData-1"></a><a class="docs-heading-anchor-permalink" href="#GraphFlowData" title="Permalink"></a></h3><p>This structure holds all the information of a given flow. These are stored inside the <a href="#Graph">Graph</a>. Given a graph <code>graph</code> and a flow <code>(u, v)</code>, it can be access through <code>graph[u, v]</code>.</p><h3 id="Partition"><a class="docs-heading-anchor" href="#Partition">Partition</a><a id="Partition-1"></a><a class="docs-heading-anchor-permalink" href="#Partition" title="Permalink"></a></h3><p>A <a href="#representative-periods">representative period</a> will be defined with a number of time steps. A partition is a division of these time steps into <a href="#time-blocks">time blocks</a> such that the time blocks are disjunct and that all time steps belong to some time block. Some variables and constraints are defined over every time block in a partition.</p><p>For instance, for a representative period with 12 time steps, all sets below are partitions:</p><ul><li><span>$\{\{1, 2, 3\}, \{4, 5, 6\}, \{7, 8, 9\}, \{10, 11, 12\}\}$</span></li><li><span>$\{\{1, 2, 3, 4\}, \{5, 6, 7, 8\}, \{9, 10, 11, 12\}\}$</span></li><li><span>$\{\{1\}, \{2, 3\}, \{4\}, \{5, 6, 7, 8\}, \{9, 10, 11, 12\}\}$</span></li></ul><h3 id="representative-periods"><a class="docs-heading-anchor" href="#representative-periods">Representative Periods</a><a id="representative-periods-1"></a><a class="docs-heading-anchor-permalink" href="#representative-periods" title="Permalink"></a></h3><p>The full year is represented by a few periods of time, for instance, days or weeks, that nicely summarize other similar periods. For instance, we could model the year into 3 days, by clustering all days of the year into 3 representative days. Each one of these periods of time is called a representative period. They have been obtained by clustering through <a href="https://github.com/TulipaEnergy/TulipaClustering.jl">TulipaClustering</a>.</p><p>A representative period was three fields:</p><ul><li><code>weight</code>: indicates how many representative periods is contained in that year.</li><li><code>time_steps</code>: The number of time steps in that year.</li><li><code>resolution</code>: The duration in time of a time step.</li></ul><p>The number of time steps and resolution work together to define the coarseness of the period. Nothing is defined outside of these time steps, so, for instance, if the representative period represents a day, and you want to define a variable or constraint with coarseness of 30 minutes, then you need to define the number of time steps to 48 and the resolution to <code>0.5</code>.</p><h3 id="Solution"><a class="docs-heading-anchor" href="#Solution">Solution</a><a id="Solution-1"></a><a class="docs-heading-anchor-permalink" href="#Solution" title="Permalink"></a></h3><p>The solution object is a NamedTuple with the following fields:</p><ul><li><code>objective_value</code>: A Float64 with the objective value at the solution.</li><li><code>assets_investment[a]</code>: The investment for each asset, indexed on the investable asset <code>a</code>.</li><li><code>flows_investment[u, v]</code>: The investment for each flow, indexed on the investable flow <code>(u, v)</code>.</li><li><code>flow[(u, v), rp, B]</code>: The flow value for a given flow <code>(u, v)</code> at a given representative period <code>rp</code>, and time block <code>B</code>. The list of time blocks is defined by <code>graph[(u, v)].partitions[rp]</code>.</li><li><code>storage_level[a, rp, B]</code>: The storage level for the storage asset <code>a</code> for a representative period <code>rp</code> and a time block <code>B</code>. The list of time blocks is defined by <code>constraints_partitions</code>, which was used to create the model.</li></ul><p>For tips on manipulating the solution, check the <a href="../tutorial/#solution-tutorial">tutorial</a>.</p><h3 id="time-blocks"><a class="docs-heading-anchor" href="#time-blocks">Time Blocks</a><a id="time-blocks-1"></a><a class="docs-heading-anchor-permalink" href="#time-blocks" title="Permalink"></a></h3><p>A time block is a quantity of time for which a variable or constraint is defined. Currently, it is a range of numbers, i.e., all integer numbers inside an interval.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../api/">« API</a><a class="docs-footer-nextpage" href="../mathematical-formulation/">Mathematical Formulation »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="auto">Automatic (OS)</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.2.1 on <span class="colophon-date" title="Wednesday 6 December 2023 15:47">Wednesday 6 December 2023</span>. Using Julia version 1.9.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
