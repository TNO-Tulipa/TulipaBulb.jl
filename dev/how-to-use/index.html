<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>How to Use · TulipaEnergyModel.jl</title><meta name="title" content="How to Use · TulipaEnergyModel.jl"/><meta property="og:title" content="How to Use · TulipaEnergyModel.jl"/><meta property="twitter:title" content="How to Use · TulipaEnergyModel.jl"/><meta name="description" content="Documentation for TulipaEnergyModel.jl."/><meta property="og:description" content="Documentation for TulipaEnergyModel.jl."/><meta property="twitter:description" content="Documentation for TulipaEnergyModel.jl."/><meta property="og:url" content="https://TulipaEnergy.github.io/TulipaEnergyModel.jl/how-to-use/"/><meta property="twitter:url" content="https://TulipaEnergy.github.io/TulipaEnergyModel.jl/how-to-use/"/><link rel="canonical" href="https://TulipaEnergy.github.io/TulipaEnergyModel.jl/how-to-use/"/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script><link href="../assets/style.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.png" alt="TulipaEnergyModel.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../">TulipaEnergyModel.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li class="is-active"><a class="tocitem" href>How to Use</a><ul class="internal"><li><a class="tocitem" href="#Install"><span>Install</span></a></li><li><a class="tocitem" href="#Running-a-Scenario"><span>Running a Scenario</span></a></li><li><a class="tocitem" href="#input"><span>Input</span></a></li><li><a class="tocitem" href="#structures"><span>Structures</span></a></li><li><a class="tocitem" href="#infeasible"><span>Exploring infeasibility</span></a></li><li><a class="tocitem" href="#Storage-specific-setups"><span>Storage specific setups</span></a></li><li><a class="tocitem" href="#unit-commitment-setup"><span>Setting up unit commitment constraints</span></a></li><li><a class="tocitem" href="#ramping-setup"><span>Setting up ramping constraints</span></a></li><li><a class="tocitem" href="#max-min-outgoing-energy-setup"><span>Setting up a maximum or minimum outgoing energy limit</span></a></li><li><a class="tocitem" href="#group-setup"><span>Defining a group of assets</span></a></li></ul></li><li><a class="tocitem" href="../tutorials/">Tutorials</a></li><li><a class="tocitem" href="../concepts/">Concepts</a></li><li><a class="tocitem" href="../formulation/">Mathematical Formulation</a></li><li><a class="tocitem" href="../api/">API</a></li><li><a class="tocitem" href="../reference/">Reference</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>How to Use</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>How to Use</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/TulipaEnergy/TulipaEnergyModel.jl.git" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="how-to-use"><a class="docs-heading-anchor" href="#how-to-use">How to Use</a><a id="how-to-use-1"></a><a class="docs-heading-anchor-permalink" href="#how-to-use" title="Permalink"></a></h1><ul><li><a href="#how-to-use">How to Use</a></li><li class="no-marker"><ul><li><a href="#Install">Install</a></li><li class="no-marker"><ul><li><a href="#Starting-Julia">Starting Julia</a></li><li><a href="#Adding-TulipaEnergyModel">Adding TulipaEnergyModel</a></li><li><a href="#(Optional)-Running-automatic-tests">(Optional) Running automatic tests</a></li></ul></li><li><a href="#Running-a-Scenario">Running a Scenario</a></li><li><a href="#input">Input</a></li><li class="no-marker"><ul><li><a href="#CSV">CSV</a></li><li class="no-marker"><ul><li><a href="#graph-assets-data"><code>graph-assets-data.csv</code></a></li><li><a href="#graph-flows-data"><code>graph-flows-data.csv</code></a></li><li><a href="#assets-data"><code>assets-data.csv</code></a></li><li><a href="#flows-data"><code>flows-data.csv</code></a></li><li><a href="#assets-profiles-definition"><code>assets-profiles.csv</code></a></li><li><a href="#flows-profiles-definition"><code>flows-profiles.csv</code></a></li><li><a href="#rep-periods-data"><code>rep-periods-data.csv</code></a></li><li><a href="#rep-periods-mapping"><code>rep-periods-mapping.csv</code></a></li><li><a href="#profiles-rep-periods.csv"><code>profiles-rep-periods.csv</code></a></li><li><a href="#assets-timeframe-profiles.csv"><code>assets-timeframe-profiles.csv</code></a></li><li><a href="#groups-data.csv-(optional)"><code>groups-data.csv</code> (optional)</a></li><li><a href="#profiles-timeframe.csv-(optional)"><code>profiles-timeframe.csv</code> (optional)</a></li><li><a href="#assets-rep-periods-partitions-definition"><code>assets-rep-periods-partitions.csv</code> (optional)</a></li><li><a href="#flow-rep-periods-partitions-definition"><code>flows-rep-periods-partitions.csv</code> (optional)</a></li><li><a href="#assets-timeframe-partitions"><code>assets-timeframe-partitions.csv</code> (optional)</a></li><li><a href="#schemas">Schemas</a></li></ul></li></ul></li><li><a href="#structures">Structures</a></li><li class="no-marker"><ul><li><a href="#EnergyProblem">EnergyProblem</a></li><li class="no-marker"><ul><li><a href="#Fields">Fields</a></li><li><a href="#Constructor">Constructor</a></li></ul></li><li><a href="#Graph">Graph</a></li><li><a href="#GraphAssetData">GraphAssetData</a></li><li><a href="#GraphFlowData">GraphFlowData</a></li><li><a href="#Partition">Partition</a></li><li><a href="#timeframe">Timeframe</a></li><li><a href="#representative-periods">Representative Periods</a></li><li><a href="#Solution">Solution</a></li><li><a href="#time-blocks">Time Blocks</a></li><li><a href="#group">Group</a></li></ul></li><li><a href="#infeasible">Exploring infeasibility</a></li><li><a href="#Storage-specific-setups">Storage specific setups</a></li><li class="no-marker"><ul><li><a href="#seasonal-setup">Seasonal and non-seasonal storage</a></li><li><a href="#storage-investment-setup">The energy storage investment method</a></li><li><a href="#storage-binary-method-setup">Control simultaneous charging and discharging</a></li></ul></li><li><a href="#unit-commitment-setup">Setting up unit commitment constraints</a></li><li><a href="#ramping-setup">Setting up ramping constraints</a></li><li><a href="#max-min-outgoing-energy-setup">Setting up a maximum or minimum outgoing energy limit</a></li><li class="no-marker"><ul><li class="no-marker"><ul><li><a href="#Example">Example</a></li></ul></li></ul></li><li><a href="#group-setup">Defining a group of assets</a></li><li class="no-marker"><ul><li><a href="#investment-group-setup">Setting up a maximum or minimum investment limit for a group</a></li><li class="no-marker"><ul><li><a href="#Example-2">Example</a></li></ul></li></ul></li></ul></li></ul><h2 id="Install"><a class="docs-heading-anchor" href="#Install">Install</a><a id="Install-1"></a><a class="docs-heading-anchor-permalink" href="#Install" title="Permalink"></a></h2><p>To use Tulipa, you first need to install the opensource <a href="https://julialang.org">Julia</a> programming language.</p><p>Then consider installing a user-friendly code editor, such as <a href="https://code.visualstudio.com">VSCode</a>. Otherwise you will be running from the terminal/command prompt.</p><h3 id="Starting-Julia"><a class="docs-heading-anchor" href="#Starting-Julia">Starting Julia</a><a id="Starting-Julia-1"></a><a class="docs-heading-anchor-permalink" href="#Starting-Julia" title="Permalink"></a></h3><p>Choose one:</p><ul><li>In VSCode: Press CTRL+Shift+P and press Enter to start a Julia REPL.</li><li>In the terminal: Type <code>julia</code> and press Enter</li></ul><h3 id="Adding-TulipaEnergyModel"><a class="docs-heading-anchor" href="#Adding-TulipaEnergyModel">Adding TulipaEnergyModel</a><a id="Adding-TulipaEnergyModel-1"></a><a class="docs-heading-anchor-permalink" href="#Adding-TulipaEnergyModel" title="Permalink"></a></h3><p>In Julia:</p><ul><li>Enter package mode (press &quot;]&quot;)</li></ul><pre><code class="language-julia-pkg hljs">pkg&gt; add TulipaEnergyModel</code></pre><ul><li>Return to Julia mode (backspace)</li></ul><pre><code class="language-julia hljs">julia&gt; using TulipaEnergyModel</code></pre><h3 id="(Optional)-Running-automatic-tests"><a class="docs-heading-anchor" href="#(Optional)-Running-automatic-tests">(Optional) Running automatic tests</a><a id="(Optional)-Running-automatic-tests-1"></a><a class="docs-heading-anchor-permalink" href="#(Optional)-Running-automatic-tests" title="Permalink"></a></h3><p>It is nice to check that tests are passing to make sure your environment is working. (This takes a minute or two.)</p><ul><li>Enter package mode (press &quot;]&quot;)</li></ul><pre><code class="language-julia-pkg hljs">pkg&gt; test TulipaEnergyModel</code></pre><p>All tests should pass.</p><h2 id="Running-a-Scenario"><a class="docs-heading-anchor" href="#Running-a-Scenario">Running a Scenario</a><a id="Running-a-Scenario-1"></a><a class="docs-heading-anchor-permalink" href="#Running-a-Scenario" title="Permalink"></a></h2><p>To run a scenario, use the function:</p><ul><li><a href="../reference/#TulipaEnergyModel.run_scenario-Tuple{Any}"><code>run_scenario(connection)</code></a></li><li><a href="../reference/#TulipaEnergyModel.run_scenario-Tuple{Any}"><code>run_scenario(connection; output_folder)</code></a></li></ul><p>The <code>connection</code> should have been created and the data loaded into it using <a href="https://github.com/TulipaEnergy/TulipaIO.jl">TulipaIO</a>. See the <a href="../tutorials/#tutorials">tutorials</a> for a complete guide on how to achieve this. The <code>output_folder</code> is optional if the user wants to export the output.</p><h2 id="input"><a class="docs-heading-anchor" href="#input">Input</a><a id="input-1"></a><a class="docs-heading-anchor-permalink" href="#input" title="Permalink"></a></h2><p>Currently, we only accept input from CSV files that follow the <a href="#schemas">Schemas</a>. You can also check the <a href="https://github.com/TulipaEnergy/TulipaEnergyModel.jl/tree/main/test/inputs"><code>test/inputs</code> folder</a> for examples.</p><h3 id="CSV"><a class="docs-heading-anchor" href="#CSV">CSV</a><a id="CSV-1"></a><a class="docs-heading-anchor-permalink" href="#CSV" title="Permalink"></a></h3><p>Below, we have a description of the files. At the end, in <a href="#schemas">Schemas</a>, we have the expected columns in these CSVs.</p><h4 id="graph-assets-data"><a class="docs-heading-anchor" href="#graph-assets-data"><code>graph-assets-data.csv</code></a><a id="graph-assets-data-1"></a><a class="docs-heading-anchor-permalink" href="#graph-assets-data" title="Permalink"></a></h4><p>This file contains the list of assets and the static data associated with each of them.</p><p>The meaning of <code>Missing</code> data depends on the parameter, for instance:</p><ul><li><code>group</code>: No group assigned to the asset.</li></ul><h4 id="graph-flows-data"><a class="docs-heading-anchor" href="#graph-flows-data"><code>graph-flows-data.csv</code></a><a id="graph-flows-data-1"></a><a class="docs-heading-anchor-permalink" href="#graph-flows-data" title="Permalink"></a></h4><p>The same as <a href="#graph-assets-data"><code>graph-assets-data.csv</code></a>, but for flows. Each flow is defined as a pair of assets.</p><h4 id="assets-data"><a class="docs-heading-anchor" href="#assets-data"><code>assets-data.csv</code></a><a id="assets-data-1"></a><a class="docs-heading-anchor-permalink" href="#assets-data" title="Permalink"></a></h4><p>This file contains the yearly data of each asset.</p><p>The investment parameters are as follows:</p><ul><li>The <code>investable</code> parameter determines whether there is an investment decision for the asset or flow.</li><li>The <code>investment_integer</code> parameter determines if the investment decision is integer or continuous.</li><li>The <code>investment_cost</code> parameter represents the cost in the defined <a href="#timeframe">timeframe</a>. Thus, if the timeframe is a year, the investment cost is the annualized cost of the asset.</li><li>The <code>investment_limit</code> parameter limits the total investment capacity of the asset or flow. This limit represents the potential of that particular asset or flow. Without data in this parameter, the model assumes no investment limit.</li></ul><p>The meaning of <code>Missing</code> data depends on the parameter, for instance:</p><ul><li><code>investment_limit</code>: There is no investment limit.</li><li><code>initial_storage_level</code>: The initial storage level is free (between the storage level limits), meaning that the optimization problem decides the best starting point for the storage asset. In addition, the first and last time blocks in a representative period are linked to create continuity in the storage level.</li></ul><h4 id="flows-data"><a class="docs-heading-anchor" href="#flows-data"><code>flows-data.csv</code></a><a id="flows-data-1"></a><a class="docs-heading-anchor-permalink" href="#flows-data" title="Permalink"></a></h4><p>The same as <a href="#assets-data"><code>assets-data.csv</code></a>, but for flows. Each flow is defined as a pair of assets.</p><p>The meaning of <code>Missing</code> data depends on the parameter, for instance:</p><ul><li><code>investment_limit</code>: There is no investment limit.</li></ul><h4 id="assets-profiles-definition"><a class="docs-heading-anchor" href="#assets-profiles-definition"><code>assets-profiles.csv</code></a><a id="assets-profiles-definition-1"></a><a class="docs-heading-anchor-permalink" href="#assets-profiles-definition" title="Permalink"></a></h4><p>These files contain information about assets and their associated profiles. Each row lists an asset, the type of profile (e.g., availability, demand, maximum or minimum storage level), and the profile&#39;s name. These profiles are used in the <a href="../concepts/#concepts-summary">intra-temporal constraints</a>.</p><h4 id="flows-profiles-definition"><a class="docs-heading-anchor" href="#flows-profiles-definition"><code>flows-profiles.csv</code></a><a id="flows-profiles-definition-1"></a><a class="docs-heading-anchor-permalink" href="#flows-profiles-definition" title="Permalink"></a></h4><p>This file contains information about flows and their representative period profiles for intra-temporal constraints. Each flow is defined as a pair of assets.</p><h4 id="rep-periods-data"><a class="docs-heading-anchor" href="#rep-periods-data"><code>rep-periods-data.csv</code></a><a id="rep-periods-data-1"></a><a class="docs-heading-anchor-permalink" href="#rep-periods-data" title="Permalink"></a></h4><p>Describes the <a href="#representative-periods">representative periods</a> by their unique ID, the number of timesteps per representative period, and the resolution per timestep. Note that in the test files the resolution units are given as hours for understandability, but the resolution is technically unitless.</p><h4 id="rep-periods-mapping"><a class="docs-heading-anchor" href="#rep-periods-mapping"><code>rep-periods-mapping.csv</code></a><a id="rep-periods-mapping-1"></a><a class="docs-heading-anchor-permalink" href="#rep-periods-mapping" title="Permalink"></a></h4><p>Describes the periods of the <a href="#timeframe">timeframe</a> that map into a <a href="#representative-periods">representative period</a> and the weight of the representative periods that construct a period. Note that each weight is a decimal between 0 and 1, and that the sum of weights for a given period must also be between 0 and 1 (but do not have to sum to 1).</p><h4 id="profiles-rep-periods.csv"><a class="docs-heading-anchor" href="#profiles-rep-periods.csv"><code>profiles-rep-periods.csv</code></a><a id="profiles-rep-periods.csv-1"></a><a class="docs-heading-anchor-permalink" href="#profiles-rep-periods.csv" title="Permalink"></a></h4><p>Define all the profiles for the <code>rep-periods</code>. The <code>profile_name</code> is a unique identifier, the <code>period</code> and <code>value</code> define the profile, and the <code>rep_period</code> field informs the representative period.</p><p>The profiles are linked to assets and flows in the files <a href="#assets-profiles-definition"><code>assets-profiles</code></a>, <a href="#assets-profiles-definition"><code>assets-timeframe-profiles</code></a>, and <a href="#flows-profiles-definition"><code>flows-profiles</code></a>.</p><h4 id="assets-timeframe-profiles.csv"><a class="docs-heading-anchor" href="#assets-timeframe-profiles.csv"><code>assets-timeframe-profiles.csv</code></a><a id="assets-timeframe-profiles.csv-1"></a><a class="docs-heading-anchor-permalink" href="#assets-timeframe-profiles.csv" title="Permalink"></a></h4><p>Like the <a href="#assets-profiles-definition"><code>assets-profiles.csv</code></a>, but for the <a href="../concepts/#concepts-summary">inter-temporal constraints</a>.</p><h4 id="groups-data.csv-(optional)"><a class="docs-heading-anchor" href="#groups-data.csv-(optional)"><code>groups-data.csv</code> (optional)</a><a id="groups-data.csv-(optional)-1"></a><a class="docs-heading-anchor-permalink" href="#groups-data.csv-(optional)" title="Permalink"></a></h4><p>This file contains the list of groups and the methods that apply to each group, along with their respective parameters.</p><h4 id="profiles-timeframe.csv-(optional)"><a class="docs-heading-anchor" href="#profiles-timeframe.csv-(optional)"><code>profiles-timeframe.csv</code> (optional)</a><a id="profiles-timeframe.csv-(optional)-1"></a><a class="docs-heading-anchor-permalink" href="#profiles-timeframe.csv-(optional)" title="Permalink"></a></h4><p>Define all the profiles for the <code>timeframe</code>. This is similar to the <a href="#profiles-rep-periods.csv"><code>profiles-rep-periods.csv</code></a> except that it doesn&#39;t have a <code>rep-period</code> field and if this is not passed, default values are used in the timeframe constraints.</p><h4 id="assets-rep-periods-partitions-definition"><a class="docs-heading-anchor" href="#assets-rep-periods-partitions-definition"><code>assets-rep-periods-partitions.csv</code> (optional)</a><a id="assets-rep-periods-partitions-definition-1"></a><a class="docs-heading-anchor-permalink" href="#assets-rep-periods-partitions-definition" title="Permalink"></a></h4><p>Contains a description of the <a href="#Partition">partition</a> for each asset with respect to representative periods. If not specified, each asset will have the same time resolution as the representative period, which is hourly by default.</p><p>There are currently three ways to specify the desired resolution, indicated in the column <code>specification</code>. The column <code>partition</code> serves to define the partitions in the specified style.</p><ul><li><code>specification = uniform</code>: Set the resolution to a uniform amount, i.e., a time block is made of <code>X</code> timesteps. The number <code>X</code> is defined in the column <code>partition</code>. The number of timesteps in the representative period must be divisible by <code>X</code>.</li><li><code>specification = explicit</code>: Set the resolution according to a list of numbers separated by <code>;</code> on the <code>partition</code>. Each number in the list is the number of timesteps for that time block. For instance, <code>2;3;4</code> means that there are three time blocks, the first has 2 timesteps, the second has 3 timesteps, and the last has 4 timesteps. The sum of the list must be equal to the total number of timesteps in that representative period, as specified in <code>num_timesteps</code> of <a href="#rep-periods-data"><code>rep-periods-data.csv</code></a>.</li><li><code>specification = math</code>: Similar to explicit, but using <code>+</code> and <code>x</code> for simplification. The value of <code>partition</code> is a sequence of elements of the form <code>NxT</code> separated by <code>+</code>, indicating <code>N</code> time blocks of length <code>T</code>. For instance, <code>2x3+3x6</code> is 2 time blocks of 3 timesteps, followed by 3 time blocks of 6 timesteps, for a total of 24 timesteps in the representative period.</li></ul><p>The table below shows various results for different formats for a representative period with 12 timesteps.</p><table><tr><th style="text-align: left">Time Block</th><th style="text-align: left">:uniform</th><th style="text-align: left">:explicit</th><th style="text-align: left">:math</th></tr><tr><td style="text-align: left">1:3, 4:6, 7:9, 10:12</td><td style="text-align: left">3</td><td style="text-align: left">3;3;3;3</td><td style="text-align: left">4x3</td></tr><tr><td style="text-align: left">1:4, 5:8, 9:12</td><td style="text-align: left">4</td><td style="text-align: left">4;4;4</td><td style="text-align: left">3x4</td></tr><tr><td style="text-align: left">1:1, 2:2, …, 12:12</td><td style="text-align: left">1</td><td style="text-align: left">1;1;1;1;1;1;1;1;1;1;1;1</td><td style="text-align: left">12x1</td></tr><tr><td style="text-align: left">1:3, 4:6, 7:10, 11:12</td><td style="text-align: left">NA</td><td style="text-align: left">3;3;4;2</td><td style="text-align: left">2x3+1x4+1x2</td></tr></table><p>Note: If an asset is not specified in this file, the balance equation will be written in the lowest resolution of both the incoming and outgoing flows to the asset.</p><h4 id="flow-rep-periods-partitions-definition"><a class="docs-heading-anchor" href="#flow-rep-periods-partitions-definition"><code>flows-rep-periods-partitions.csv</code> (optional)</a><a id="flow-rep-periods-partitions-definition-1"></a><a class="docs-heading-anchor-permalink" href="#flow-rep-periods-partitions-definition" title="Permalink"></a></h4><p>The same as <a href="#assets-rep-periods-partitions-definition"><code>assets-rep-periods-partitions.csv</code></a>, but for flows.</p><p>If a flow is not specified in this file, the flow time resolution will be for each timestep by default (e.g., hourly).</p><h4 id="assets-timeframe-partitions"><a class="docs-heading-anchor" href="#assets-timeframe-partitions"><code>assets-timeframe-partitions.csv</code> (optional)</a><a id="assets-timeframe-partitions-1"></a><a class="docs-heading-anchor-permalink" href="#assets-timeframe-partitions" title="Permalink"></a></h4><p>The same as their <a href="#assets-rep-periods-partitions-definition"><code>assets-rep-periods-partitions.csv</code></a> counterpart, but for the periods in the <a href="#timeframe">timeframe</a> of the model.</p><h4 id="schemas"><a class="docs-heading-anchor" href="#schemas">Schemas</a><a id="schemas-1"></a><a class="docs-heading-anchor-permalink" href="#schemas" title="Permalink"></a></h4><ul><li><strong>assets_data</strong><ul><li><code>name: VARCHAR</code></li><li><code>active: BOOLEAN</code></li><li><code>year: INTEGER</code></li><li><code>commission_year: INTEGER</code></li><li><code>investable: BOOLEAN</code></li><li><code>investment_integer: BOOLEAN</code></li><li><code>investment_cost: DOUBLE</code></li><li><code>investment_limit: DOUBLE</code></li><li><code>capacity: DOUBLE</code></li><li><code>initial_units: DOUBLE</code></li><li><code>peak_demand: DOUBLE</code></li><li><code>consumer_balance_sense: VARCHAR</code></li><li><code>is_seasonal: BOOLEAN</code></li><li><code>storage_inflows: DOUBLE</code></li><li><code>initial_storage_capacity: DOUBLE</code></li><li><code>initial_storage_level: DOUBLE</code></li><li><code>energy_to_power_ratio: DOUBLE</code></li><li><code>storage_method_energy: BOOLEAN</code></li><li><code>investment_cost_storage_energy: DOUBLE</code></li><li><code>investment_limit_storage_energy: DOUBLE</code></li><li><code>capacity_storage_energy: DOUBLE</code></li><li><code>investment_integer_storage_energy: BOOLEAN</code></li><li><code>use_binary_storage_method: VARCHAR</code></li><li><code>max_energy_timeframe_partition: DOUBLE</code></li><li><code>min_energy_timeframe_partition: DOUBLE</code></li><li><code>unit_commitment: BOOLEAN</code></li><li><code>unit_commitment_method: VARCHAR</code></li><li><code>units_on_cost: DOUBLE</code></li><li><code>unit_commitment_integer: BOOLEAN</code></li><li><code>min_operating_point: DOUBLE</code></li><li><code>ramping: BOOLEAN</code></li><li><code>max_ramp_up: DOUBLE</code></li><li><code>max_ramp_down: DOUBLE</code></li></ul></li><li><strong>assets_profiles</strong><ul><li><code>asset: VARCHAR</code></li><li><code>commission_year: INTEGER</code></li><li><code>profile_type: VARCHAR</code></li><li><code>profile_name: VARCHAR</code></li></ul></li><li><strong>assets<em>rep</em>periods_partitions</strong><ul><li><code>asset: VARCHAR</code></li><li><code>year: INTEGER</code></li><li><code>rep_period: INTEGER</code></li><li><code>specification: VARCHAR</code></li><li><code>partition: VARCHAR</code></li></ul></li><li><strong>assets<em>timeframe</em>partitions</strong><ul><li><code>asset: VARCHAR</code></li><li><code>year: INTEGER</code></li><li><code>specification: VARCHAR</code></li><li><code>partition: VARCHAR</code></li></ul></li><li><strong>assets<em>timeframe</em>profiles</strong><ul><li><code>asset: VARCHAR</code></li><li><code>commission_year: INTEGER</code></li><li><code>profile_type: VARCHAR</code></li><li><code>profile_name: VARCHAR</code></li></ul></li><li><strong>flows_data</strong><ul><li><code>from_asset: VARCHAR</code></li><li><code>to_asset: VARCHAR</code></li><li><code>year: INTEGER</code></li><li><code>active: BOOLEAN</code></li><li><code>is_transport: BOOLEAN</code></li><li><code>investable: BOOLEAN</code></li><li><code>investment_integer: BOOLEAN</code></li><li><code>variable_cost: DOUBLE</code></li><li><code>investment_cost: DOUBLE</code></li><li><code>investment_limit: DOUBLE</code></li><li><code>capacity: DOUBLE</code></li><li><code>initial_export_capacity: DOUBLE</code></li><li><code>initial_import_capacity: DOUBLE</code></li><li><code>efficiency: DOUBLE</code></li></ul></li><li><strong>flows_profiles</strong><ul><li><code>from_asset: VARCHAR</code></li><li><code>to_asset: VARCHAR</code></li><li><code>year: INTEGER</code></li><li><code>profile_type: VARCHAR</code></li><li><code>profile_name: VARCHAR</code></li></ul></li><li><strong>flows<em>rep</em>periods_partitions</strong><ul><li><code>from_asset: VARCHAR</code></li><li><code>to_asset: VARCHAR</code></li><li><code>year: INTEGER</code></li><li><code>rep_period: INTEGER</code></li><li><code>specification: VARCHAR</code></li><li><code>partition: VARCHAR</code></li></ul></li><li><strong>graph<em>assets</em>data</strong><ul><li><code>name: VARCHAR</code></li><li><code>type: VARCHAR</code></li><li><code>group: VARCHAR</code></li><li><code>investment_method: VARCHAR</code></li></ul></li><li><strong>graph<em>flows</em>data</strong><ul><li><code>from_asset: VARCHAR</code></li><li><code>to_asset: VARCHAR</code></li><li><code>carrier: VARCHAR</code></li></ul></li><li><strong>groups_data</strong><ul><li><code>name: VARCHAR</code></li><li><code>year: INTEGER</code></li><li><code>invest_method: BOOLEAN</code></li><li><code>min_investment_limit: DOUBLE</code></li><li><code>max_investment_limit: DOUBLE</code></li></ul></li><li><strong>profiles<em>rep</em>periods</strong><ul><li><code>profile_name: VARCHAR</code></li><li><code>year: INTEGER</code></li><li><code>rep_period: INTEGER</code></li><li><code>timestep: INTEGER</code></li><li><code>value: DOUBLE</code></li></ul></li><li><strong>profiles_timeframe</strong><ul><li><code>profile_name: VARCHAR</code></li><li><code>year: INTEGER</code></li><li><code>period: INTEGER</code></li><li><code>value: DOUBLE</code></li></ul></li><li><strong>rep<em>periods</em>data</strong><ul><li><code>year: INTEGER</code></li><li><code>rep_period: INTEGER</code></li><li><code>num_timesteps: INTEGER</code></li><li><code>resolution: DOUBLE</code></li></ul></li><li><strong>rep<em>periods</em>mapping</strong><ul><li><code>year: INTEGER</code></li><li><code>period: INTEGER</code></li><li><code>rep_period: INTEGER</code></li><li><code>weight: DOUBLE</code></li></ul></li><li><strong>year_data</strong><ul><li><code>year: INTEGER</code></li><li><code>length: INTEGER</code></li><li><code>is_milestone: BOOLEAN</code></li></ul></li></ul><h2 id="structures"><a class="docs-heading-anchor" href="#structures">Structures</a><a id="structures-1"></a><a class="docs-heading-anchor-permalink" href="#structures" title="Permalink"></a></h2><p>The list of relevant structures used in this package are listed below:</p><h3 id="EnergyProblem"><a class="docs-heading-anchor" href="#EnergyProblem">EnergyProblem</a><a id="EnergyProblem-1"></a><a class="docs-heading-anchor-permalink" href="#EnergyProblem" title="Permalink"></a></h3><p>The <code>EnergyProblem</code> structure is a wrapper around various other relevant structures. It hides the complexity behind the energy problem, making the usage more friendly, although more verbose.</p><h4 id="Fields"><a class="docs-heading-anchor" href="#Fields">Fields</a><a id="Fields-1"></a><a class="docs-heading-anchor-permalink" href="#Fields" title="Permalink"></a></h4><ul><li><code>graph</code>: The <a href="#Graph">Graph</a> object that defines the geometry of the energy problem.</li><li><code>representative_periods</code>: A vector of <a href="#representative-periods">Representative Periods</a>.</li><li><code>constraints_partitions</code>: Dictionaries that connect pairs of asset and representative periods to <a href="#Partition">time partitions</a> (vectors of time blocks).</li><li><code>timeframe</code>: The number of periods in the <code>representative_periods</code>.</li><li><code>dataframes</code>: A Dictionary of dataframes used to linearize the variables and constraints. These are used internally in the model only.</li><li><code>groups</code>: A vector of <a href="#group">Groups</a>.</li><li><code>model</code>: A JuMP.Model object representing the optimization model.</li><li><code>solution</code>: A structure of the variable values (investments, flows, etc) in the solution.</li><li><code>solved</code>: A boolean indicating whether the <code>model</code> has been solved or not.</li><li><code>objective_value</code>: The objective value of the solved problem (Float64).</li><li><code>termination_status</code>: The termination status of the optimization model.</li><li><code>time_read_data</code>: Time taken (in seconds) for reading the data (Float64).</li><li><code>time_create_model</code>: Time taken (in seconds) for creating the model (Float64).</li><li><code>time_solve_model</code>: Time taken (in seconds) for solving the model (Float64).</li></ul><h4 id="Constructor"><a class="docs-heading-anchor" href="#Constructor">Constructor</a><a id="Constructor-1"></a><a class="docs-heading-anchor-permalink" href="#Constructor" title="Permalink"></a></h4><p>The <code>EnergyProblem</code> can also be constructed using the minimal constructor below.</p><ul><li><code>EnergyProblem(connection)</code>: Constructs a new <code>EnergyProblem</code> object with the given <code>connection</code> that has been created and the data loaded into it using <a href="https://github.com/TulipaEnergy/TulipaIO.jl">TulipaIO</a>. The <code>graph</code>, <code>representative_periods</code>, and <code>timeframe</code> are computed using <code>create_internal_structures</code>. The <code>constraints_partitions</code> field is computed from the <code>representative_periods</code>, and the other fields are initialized with default values.</li></ul><p>See the <a href="../tutorials/#basic-example">basic example tutorial</a> to see how these can be used.</p><h3 id="Graph"><a class="docs-heading-anchor" href="#Graph">Graph</a><a id="Graph-1"></a><a class="docs-heading-anchor-permalink" href="#Graph" title="Permalink"></a></h3><p>The energy problem is defined using a graph. Each vertex is an asset, and each edge is a flow.</p><p>We use <a href="https://github.com/JuliaGraphs/MetaGraphsNext.jl">MetaGraphsNext.jl</a> to define the graph and its objects. Using MetaGraphsNext we can define a graph with metadata, i.e., associate data with each asset and flow. Furthermore, we can define the labels of each asset as keys to access the elements of the graph. The assets in the graph are of type <a href="#GraphAssetData">GraphAssetData</a>, and the flows are of type <a href="#GraphFlowData">GraphFlowData</a>.</p><p>The graph can be created using the <a href="../reference/#TulipaEnergyModel.create_internal_structures-Tuple{Any}"><code>create_internal_structures</code></a> function, or it can be accessed from an <a href="#EnergyProblem">EnergyProblem</a>.</p><p>See how to use the graph in the <a href="../tutorials/#graph-tutorial">graph tutorial</a>.</p><h3 id="GraphAssetData"><a class="docs-heading-anchor" href="#GraphAssetData">GraphAssetData</a><a id="GraphAssetData-1"></a><a class="docs-heading-anchor-permalink" href="#GraphAssetData" title="Permalink"></a></h3><p>This structure holds all the information of a given asset. These are stored inside the <a href="#Graph">Graph</a>. Given a graph <code>graph</code>, an asset <code>a</code> can be accessed through <code>graph[a]</code>.</p><h3 id="GraphFlowData"><a class="docs-heading-anchor" href="#GraphFlowData">GraphFlowData</a><a id="GraphFlowData-1"></a><a class="docs-heading-anchor-permalink" href="#GraphFlowData" title="Permalink"></a></h3><p>This structure holds all the information of a given flow. These are stored inside the <a href="#Graph">Graph</a>. Given a graph <code>graph</code>, a flow from asset <code>u</code> to asset <code>v</code> can be accessed through <code>graph[u, v]</code>.</p><h3 id="Partition"><a class="docs-heading-anchor" href="#Partition">Partition</a><a id="Partition-1"></a><a class="docs-heading-anchor-permalink" href="#Partition" title="Permalink"></a></h3><p>A <a href="#representative-periods">representative period</a> will be defined with a number of timesteps. A partition is a division of these timesteps into <a href="#time-blocks">time blocks</a> such that the time blocks are disjunct (not overlapping) and that all timesteps belong to some time block. Some variables and constraints are defined over every time block in a partition.</p><p>For instance, for a representative period with 12 timesteps, all sets below are partitions:</p><ul><li><span>$\{\{1, 2, 3\}, \{4, 5, 6\}, \{7, 8, 9\}, \{10, 11, 12\}\}$</span></li><li><span>$\{\{1, 2, 3, 4\}, \{5, 6, 7, 8\}, \{9, 10, 11, 12\}\}$</span></li><li><span>$\{\{1\}, \{2, 3\}, \{4\}, \{5, 6, 7, 8\}, \{9, 10, 11, 12\}\}$</span></li></ul><h3 id="timeframe"><a class="docs-heading-anchor" href="#timeframe">Timeframe</a><a id="timeframe-1"></a><a class="docs-heading-anchor-permalink" href="#timeframe" title="Permalink"></a></h3><p>The timeframe is the total period we want to analyze with the model. Usually this is a year, but it can be any length of time. A timeframe has two fields:</p><ul><li><code>num_periods</code>: The timeframe is defined by a certain number of periods. For instance, a year can be defined by 365 periods, each describing a day.</li><li><code>map_periods_to_rp</code>: Indicates the periods of the timeframe that map into a <a href="#representative-periods">representative period</a> and the weight of the representative period to construct that period.</li></ul><h3 id="representative-periods"><a class="docs-heading-anchor" href="#representative-periods">Representative Periods</a><a id="representative-periods-1"></a><a class="docs-heading-anchor-permalink" href="#representative-periods" title="Permalink"></a></h3><p>The <a href="#timeframe">timeframe</a> (e.g., a full year) is described by a selection of representative periods, for instance, days or weeks, that nicely summarize other similar periods. For example, we could model the year into 3 days, by clustering all days of the year into 3 representative days. Each one of these days is called a representative period. <em>TulipaEnergyModel.jl</em> has the flexibility to consider representative periods of different lengths for the same timeframe (e.g., a year can be represented by a set of 4 days and 2 weeks). To obtain the representative periods, we recommend using <a href="https://github.com/TulipaEnergy/TulipaClustering.jl">TulipaClustering</a>.</p><p>A representative period has three fields:</p><ul><li><code>weight</code>: Indicates how many representative periods are contained in the <a href="#timeframe">timeframe</a>; this is inferred automatically from <code>map_periods_to_rp</code> in the <a href="#timeframe">timeframe</a>.</li><li><code>timesteps</code>: The number of timesteps blocks in the representative period.</li><li><code>resolution</code>: The duration in time of each timestep.</li></ul><p>The number of timesteps and resolution work together to define the coarseness of the period. Nothing is defined outside of these timesteps; for instance, if the representative period represents a day and you want to specify a variable or constraint with a coarseness of 30 minutes. You need to define the number of timesteps to 48 and the resolution to <code>0.5</code>.</p><h3 id="Solution"><a class="docs-heading-anchor" href="#Solution">Solution</a><a id="Solution-1"></a><a class="docs-heading-anchor-permalink" href="#Solution" title="Permalink"></a></h3><p>The solution object <code>energy_problem.solution</code> is a mutable struct with the following fields:</p><ul><li><code>assets_investment[a]</code>: The investment for each asset, indexed on the investable asset <code>a</code>.</li><li><code>flows_investment[u, v]</code>: The investment for each flow, indexed on the investable flow <code>(u, v)</code>.</li><li><code>storage_level_intra_rp[a, rp, timesteps_block]</code>: The storage level for the storage asset <code>a</code> within (intra) a representative period <code>rp</code> and a time block <code>timesteps_block</code>. The list of time blocks is defined by <code>constraints_partitions</code>, which was used to create the model.</li><li><code>storage_level_inter_rp[a, periods_block]</code>: The storage level for the storage asset <code>a</code> between (inter) representative periods in the periods block <code>periods_block</code>.</li><li><code>flow[(u, v), rp, timesteps_block]</code>: The flow value for a given flow <code>(u, v)</code> at a given representative period <code>rp</code>, and time block <code>timesteps_block</code>. The list of time blocks is defined by <code>graph[(u, v)].partitions[rp]</code>.</li><li><code>objective_value</code>: A Float64 with the objective value at the solution.</li><li><code>duals</code>: A Dictionary containing the dual variables of selected constraints.</li></ul><p>Check the <a href="../tutorials/#solution-tutorial">tutorial</a> for tips on manipulating the solution.</p><h3 id="time-blocks"><a class="docs-heading-anchor" href="#time-blocks">Time Blocks</a><a id="time-blocks-1"></a><a class="docs-heading-anchor-permalink" href="#time-blocks" title="Permalink"></a></h3><p>A time block is a range for which a variable or constraint is defined. It is a range of numbers, i.e., all integer numbers inside an interval. Time blocks are used for the periods in the <a href="#timeframe">timeframe</a> and the timesteps in the <a href="#representative-periods">representative period</a>. Time blocks are disjunct (not overlapping), but do not have to be sequential.</p><h3 id="group"><a class="docs-heading-anchor" href="#group">Group</a><a id="group-1"></a><a class="docs-heading-anchor-permalink" href="#group" title="Permalink"></a></h3><p>This structure holds all the information of a given group with the following fields:</p><ul><li><code>name</code>: The name of the group.</li><li><code>invest_method</code>: Boolean value to indicate whether or not the group has an investment method.</li><li><code>min_investment_limit</code>: A minimum investment limit in MW is imposed on the total investments of the assets belonging to the group.</li><li><code>max_investment_limit</code>: A maximum investment limit in MW is imposed on the total investments of the assets belonging to the group.</li></ul><h2 id="infeasible"><a class="docs-heading-anchor" href="#infeasible">Exploring infeasibility</a><a id="infeasible-1"></a><a class="docs-heading-anchor-permalink" href="#infeasible" title="Permalink"></a></h2><p>If your model is infeasible, you can try exploring the infeasibility with <a href="https://jump.dev/JuMP.jl/stable/api/JuMP/#JuMP.compute_conflict!">JuMP.compute_conflict!</a> and <a href="https://jump.dev/JuMP.jl/stable/api/JuMP/#JuMP.copy_conflict">JuMP.copy_conflict</a>.</p><blockquote><p><strong>Note:</strong> Not all solvers support this functionality.</p></blockquote><p>Use <code>energy_problem.model</code> for the model argument. For instance:</p><pre><code class="language-julia hljs">if energy_problem.termination_status == INFEASIBLE
 compute_conflict!(energy_problem.model)
 iis_model, reference_map = copy_conflict(energy_problem.model)
 print(iis_model)
end</code></pre><h2 id="Storage-specific-setups"><a class="docs-heading-anchor" href="#Storage-specific-setups">Storage specific setups</a><a id="Storage-specific-setups-1"></a><a class="docs-heading-anchor-permalink" href="#Storage-specific-setups" title="Permalink"></a></h2><h3 id="seasonal-setup"><a class="docs-heading-anchor" href="#seasonal-setup">Seasonal and non-seasonal storage</a><a id="seasonal-setup-1"></a><a class="docs-heading-anchor-permalink" href="#seasonal-setup" title="Permalink"></a></h3><p>Section <a href="../concepts/#storage-modeling">Storage Modeling</a> explains the main concepts for modeling seasonal and non-seasonal storage in <em>TulipaEnergyModel.jl</em>. To define if an asset is one type or the other then consider the following:</p><ul><li><em>Seasonal storage</em>: When the storage capacity of an asset is greater than the total length of representative periods, we recommend using the inter-temporal constraints. To apply these constraints, you must set the input parameter <code>is_seasonal</code> to <code>true</code> in the <a href="#schemas"><code>assets-data.csv</code></a>.</li><li><em>Non-seasonal storage</em>: When the storage capacity of an asset is lower than the total length of representative periods, we recommend using the intra-temporal constraints. To apply these constraints, you must set the input parameter <code>is_seasonal</code> to <code>false</code> in the <a href="#schemas"><code>assets-data.csv</code></a>.</li></ul><blockquote><p><strong>Note:</strong> If the input data covers only one representative period for the entire year, for example, with 8760-hour timesteps, and you have a monthly hydropower plant, then you should set the <code>is_seasonal</code> parameter for that asset to <code>false</code>. This is because the length of the representative period is greater than the storage capacity of the storage asset.</p></blockquote><h3 id="storage-investment-setup"><a class="docs-heading-anchor" href="#storage-investment-setup">The energy storage investment method</a><a id="storage-investment-setup-1"></a><a class="docs-heading-anchor-permalink" href="#storage-investment-setup" title="Permalink"></a></h3><p>Energy storage assets have a unique characteristic wherein the investment is based not solely on the capacity to charge and discharge, but also on the energy capacity. Some storage asset types have a fixed duration for a given capacity, which means that there is a predefined ratio between energy and power. For instance, a battery of 10MW/unit and 4h duration implies that the energy capacity is 40MWh. Conversely, other storage asset types don&#39;t have a fixed ratio between the investment of capacity and storage capacity. Therefore, the energy capacity can be optimized independently of the capacity investment, such as hydrogen storage in salt caverns. To define if an energy asset is one type or the other then consider the following parameter setting in the file <a href="#schemas"><code>assets-data.csv</code></a>:</p><ul><li><p><em>Investment energy method</em>: To use this method, set the parameter <code>storage_method_energy</code> to <code>true</code>. In addition, it is necessary to define:</p><ul><li><code>investment_cost_storage_energy</code>: To establish the cost of investing in the storage capacity (e.g., kEUR/MWh/unit).</li><li><code>investment_limit_storage_energy</code>: To define the potential of the energy capacity investment (e.g., MWh). <code>Missing</code> values mean that there is no limit.</li><li><code>capacity_storage_energy</code>: To define the energy per unit of storage capacity invested in (e.g., MWh/unit).</li><li><code>investment_integer_storage_energy</code>: To determine whether the investment variables of storage capacity are integers of continuous.</li></ul></li><li><p><em>Fixed energy-to-power ratio method</em>: To use this method, set the parameter <code>storage_method_energy</code> to <code>false</code>. In addition, it is necessary to define the parameter <code>energy_to_power_ratio</code> to establish the predefined duration of the storage asset or ratio between energy and power. Note that all the investment costs should be allocated in the parameter <code>investment_cost</code>.</p></li></ul><p>For more details on the constraints that apply when selecting one method or the other, please visit the <a href="../formulation/#formulation"><code>mathematical formulation</code></a> section.</p><h3 id="storage-binary-method-setup"><a class="docs-heading-anchor" href="#storage-binary-method-setup">Control simultaneous charging and discharging</a><a id="storage-binary-method-setup-1"></a><a class="docs-heading-anchor-permalink" href="#storage-binary-method-setup" title="Permalink"></a></h3><p>Depending on the configuration of the energy storage assets, it may or may not be possible to charge and discharge them simultaneously. For instance, a single battery cannot charge and discharge at the same time, but some pumped hydro storage technologies have separate components for charging (pump) and discharging (turbine) that can function independently, allowing them to charge and discharge simultaneously. To account for these differences, the model provides users with three options for the <code>use_binary_storage_method</code> parameter in the <a href="#schemas"><code>assets-data.csv</code></a> file:</p><ul><li><code>binary</code>: the model adds a binary variable to prevent charging and discharging simultaneously.</li><li><code>relaxed_binary</code>: the model adds a binary variable that allows values between 0 and 1, reducing the likelihood of charging and discharging simultaneously. This option uses a tighter set of constraints close to the convex hull of the full formulation, resulting in fewer instances of simultaneous charging and discharging in the results.</li><li>If no value is set, i.e., <code>missing</code> value, the storage asset can charge and discharge simultaneously.</li></ul><p>For more details on the constraints that apply when selecting this method, please visit the <a href="../formulation/#formulation"><code>mathematical formulation</code></a> section.</p><h2 id="unit-commitment-setup"><a class="docs-heading-anchor" href="#unit-commitment-setup">Setting up unit commitment constraints</a><a id="unit-commitment-setup-1"></a><a class="docs-heading-anchor-permalink" href="#unit-commitment-setup" title="Permalink"></a></h2><p>The unit commitment constraints are only applied to producer and conversion assets. The <code>unit_commitment</code> parameter must be set to <code>true</code> to include the constraints in the <a href="#schemas"><code>assets-data.csv</code></a>. Additionally, the following parameters should be set in that same file:</p><ul><li><code>unit_commitment_method</code>: It determines which unit commitment method to use. The current version of the code only includes the basic version. Future versions will add more detailed constraints as additional options.</li><li><code>units_on_cost</code>: Objective function coefficient on <code>units_on</code> variable. (e.g., no-load cost or idling cost in kEUR/h/unit)</li><li><code>unit_commitment_integer</code>: It determines whether the unit commitment variables are considered as integer or not (<code>true</code> or <code>false</code>)</li><li><code>min_operating_point</code>: Minimum operating point or minimum stable generation level defined as a portion of the capacity of asset (p.u.)</li></ul><p>For more details on the constraints that apply when selecting this method, please visit the <a href="../formulation/#formulation"><code>mathematical formulation</code></a> section.</p><h2 id="ramping-setup"><a class="docs-heading-anchor" href="#ramping-setup">Setting up ramping constraints</a><a id="ramping-setup-1"></a><a class="docs-heading-anchor-permalink" href="#ramping-setup" title="Permalink"></a></h2><p>The ramping constraints are only applied to producer and conversion assets. The <code>ramping</code> parameter must be set to <code>true</code> to include the constraints in the <a href="#schemas"><code>assets-data.csv</code></a>. Additionally, the following parameters should be set in that same file:</p><ul><li><code>max_ramp_up</code>: Maximum ramping up rate as a portion of the capacity of asset (p.u./h)</li><li><code>max_ramp_down:</code>Maximum ramping down rate as a portion of the capacity of asset (p.u./h)</li></ul><p>For more details on the constraints that apply when selecting this method, please visit the <a href="../formulation/#formulation"><code>mathematical formulation</code></a> section.</p><h2 id="max-min-outgoing-energy-setup"><a class="docs-heading-anchor" href="#max-min-outgoing-energy-setup">Setting up a maximum or minimum outgoing energy limit</a><a id="max-min-outgoing-energy-setup-1"></a><a class="docs-heading-anchor-permalink" href="#max-min-outgoing-energy-setup" title="Permalink"></a></h2><p>For the model to add constraints for a <a href="../formulation/#inter-temporal-energy-constraints">maximum or minimum energy limit</a> for an asset throughout the model&#39;s timeframe (e.g., a year), we need to establish a couple of parameters:</p><ul><li><code>is_seasonal = true</code> in the <a href="#schemas"><code>assets-data.csv</code></a>. This parameter enables the model to use the inter-temporal constraints.</li><li><code>max_energy_timeframe_partition</code> <span>$\neq$</span> <code>missing</code> or <code>min_energy_timeframe_partition</code> <span>$\neq$</span> <code>missing</code> in the <a href="#schemas"><code>assets-data.csv</code></a>. This value represents the peak energy that will be then multiplied by the profile for each period in the timeframe.<blockquote><p><strong>Note:</strong> These parameters are defined per period, and the default values for profiles are 1.0 p.u. per period. If the periods are determined daily, the energy limit for the whole year will be 365 times <code>max</code>or <code>min_energy_timeframe_partition</code>.</p></blockquote></li><li>(optional) <code>profile_type</code> and <code>profile_name</code> in the <a href="#schemas"><code>assets-timeframe-profiles.csv</code></a> and the profile values in the <a href="#schemas"><code>profiles-timeframe.csv</code></a>. If there is no profile defined, then by default it is 1.0 p.u. for all periods in the timeframe.</li><li>(optional) define a period partition in <a href="#schemas"><code>assets-timeframe-partitions.csv</code></a>. If there is no partition defined, then by default the constraint is created for each period in the timeframe, otherwise, it will consider the partition definition in the file.</li></ul><blockquote><p><strong>Tip:</strong> If you want to set a limit on the maximum or minimum outgoing energy for a year with representative days, you can use the partition definition to create a single partition for the entire year to combine the profile.</p></blockquote><h4 id="Example"><a class="docs-heading-anchor" href="#Example">Example</a><a id="Example-1"></a><a class="docs-heading-anchor-permalink" href="#Example" title="Permalink"></a></h4><p>Let&#39;s assume we have a year divided into 365 days because we are using days as periods in the representatives from <a href="https://github.com/TulipaEnergy/TulipaClustering.jl"><em>TulipaClustering.jl</em></a>. Also, we define the <code>max_energy_timeframe_partition = 10 MWh</code>, meaning the peak energy we want to have is 10MWh for each period or period partition. So depending on the optional information, we can have:</p><table><tr><th style="text-align: right">Profile</th><th style="text-align: right">Period Partitions</th><th style="text-align: right">Example</th></tr><tr><td style="text-align: right">None</td><td style="text-align: right">None</td><td style="text-align: right">The default profile is 1.p.u. for each period and since there are no period partitions, the constraints will be for each period (i.e., daily). So the outgoing energy of the asset for each day must be less than or equal to 10MWh.</td></tr><tr><td style="text-align: right">Defined</td><td style="text-align: right">None</td><td style="text-align: right">The profile definition and value will be in the <a href="#schemas"><code>assets-timeframe-profiles.csv</code></a> and <a href="#schemas"><code>profiles-timeframe.csv</code></a> files. For example, we define a profile that has the following first four values: 0.6 p.u., 1.0 p.u., 0.8 p.u., and 0.4 p.u. There are no period partitions, so constraints will be for each period (i.e., daily). Therefore the outgoing energy of the asset for the first four days must be less than or equal to 6MWh, 10MWh, 8MWh, and 4MWh.</td></tr><tr><td style="text-align: right">Defined</td><td style="text-align: right">Defined</td><td style="text-align: right">Using the same profile as above, we now define a period partition in the <a href="#schemas"><code>assets-timeframe-partitions.csv</code></a> file as <code>uniform</code> with a value of 2. This value means that we will aggregate every two periods (i.e., every two days). So, instead of having 365 constraints, we will have 183 constraints (182 every two days and one last constraint of 1 day). Then the profile is aggregated with the sum of the values inside the periods within the partition. Thus, the outgoing energy of the asset for the first two partitions (i.e., every two days) must be less than or equal to 16MWh and 12MWh, respectively.</td></tr></table><h2 id="group-setup"><a class="docs-heading-anchor" href="#group-setup">Defining a group of assets</a><a id="group-setup-1"></a><a class="docs-heading-anchor-permalink" href="#group-setup" title="Permalink"></a></h2><p>A group of assets refers to a set of assets that share certain constraints. For example, the investments of a group of assets may be capped at a maximum value, which represents the potential of a specific area that is restricted in terms of the maximum allowable MW due to limitations on building licenses.</p><p>In order to define the groups in the model, the following steps are necessary:</p><ol><li><p>Create a group in the <a href="#schemas"><code>groups-data.csv</code></a> file by defining the <code>name</code> property and its parameters.</p></li><li><p>In the file <a href="#schemas"><code>graph-assets-data.csv</code></a>, assign assets to the group by setting the <code>name</code> in the <code>group</code> parameter/column.</p><blockquote><p><strong>Note:</strong> A missing value in the parameter <code>group</code> in the <a href="#schemas"><code>graph-assets-data.csv</code></a> means that the asset does not belong to any group.</p></blockquote></li></ol><p>Groups are useful to represent several common constraints, the following group constraints are available.</p><h3 id="investment-group-setup"><a class="docs-heading-anchor" href="#investment-group-setup">Setting up a maximum or minimum investment limit for a group</a><a id="investment-group-setup-1"></a><a class="docs-heading-anchor-permalink" href="#investment-group-setup" title="Permalink"></a></h3><p>The mathematical formulation of the maximum and minimum investment limit for group constraints is available <a href="../formulation/#investment-group-constraints">here</a>. The parameters to set up these constraints in the model are in the <a href="#schemas"><code>groups-data.csv</code></a> file.</p><ul><li><p><code>invest_method = true</code>. This parameter enables the model to use the investment group constraints.</p></li><li><p><code>min_investment_limit</code> <span>$\neq$</span> <code>missing</code> or <code>max_investment_limit</code> <span>$\neq$</span> <code>missing</code>. This value represents the limits that will be imposed on the investment that belongs to the group.</p><blockquote><p><strong>Note:</strong> A missing value in the parameters <code>min_investment_limit</code> and <code>max_investment_limit</code> means that there is no investment limit.</p></blockquote></li></ul><h4 id="Example-2"><a class="docs-heading-anchor" href="#Example-2">Example</a><a class="docs-heading-anchor-permalink" href="#Example-2" title="Permalink"></a></h4><p>Let&#39;s explore how the groups are set up in the test case called <a href="https://github.com/TulipaEnergy/TulipaEnergyModel.jl/tree/main/test/inputs/Norse">Norse</a>. First, let&#39;s take a look at the groups-data.csv file:</p><div><div style = "float: left;"><span>2×5 DataFrame</span></div><div style = "clear: both;"></div></div><div class = "data-frame" style = "overflow-x: scroll;"><table class = "data-frame" style = "margin-bottom: 6px;"><thead><tr class = "header"><th class = "rowNumber" style = "font-weight: bold; text-align: right;">Row</th><th style = "text-align: left;">name</th><th style = "text-align: left;">year</th><th style = "text-align: left;">invest_method</th><th style = "text-align: left;">min_investment_limit</th><th style = "text-align: left;">max_investment_limit</th></tr><tr class = "subheader headerLastRow"><th class = "rowNumber" style = "font-weight: bold; text-align: right;"></th><th title = "InlineStrings.String15" style = "text-align: left;">String15</th><th title = "Int64" style = "text-align: left;">Int64</th><th title = "Bool" style = "text-align: left;">Bool</th><th title = "Union{Missing, Int64}" style = "text-align: left;">Int64?</th><th title = "Union{Missing, Int64}" style = "text-align: left;">Int64?</th></tr></thead><tbody><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">1</td><td style = "text-align: left;">renewables</td><td style = "text-align: right;">2030</td><td style = "text-align: right;">true</td><td style = "font-style: italic; text-align: right;">missing</td><td style = "text-align: right;">40000</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">2</td><td style = "text-align: left;">ccgt</td><td style = "text-align: right;">2030</td><td style = "text-align: right;">true</td><td style = "text-align: right;">10000</td><td style = "font-style: italic; text-align: right;">missing</td></tr></tbody></table></div><p>In the given data, there are two groups: <code>renewables</code> and <code>ccgt</code>. Both groups have the <code>invest_method</code> parameter set to <code>true</code>, indicating that investment group constraints apply to both. For the <code>renewables</code> group, the <code>min_investment_limit</code> parameter is missing, signifying that there is no minimum limit imposed on the group. However, the <code>max_investment_limit</code> parameter is set to 40000 MW, indicating that the total investments of assets in the group must be less than or equal to this value. In contrast, the <code>ccgt</code> group has a missing value in the <code>max_investment_limit</code> parameter, indicating no maximum limit, while the <code>min_investment_limit</code> is set to 10000 MW for the total investments in that group.</p><p>Let&#39;s now explore which assets are in each group. To do so, we can take a look at the graph-assets-data.csv file:</p><div><div style = "float: left;"><span>4×3 DataFrame</span></div><div style = "clear: both;"></div></div><div class = "data-frame" style = "overflow-x: scroll;"><table class = "data-frame" style = "margin-bottom: 6px;"><thead><tr class = "header"><th class = "rowNumber" style = "font-weight: bold; text-align: right;">Row</th><th style = "text-align: left;">name</th><th style = "text-align: left;">type</th><th style = "text-align: left;">group</th></tr><tr class = "subheader headerLastRow"><th class = "rowNumber" style = "font-weight: bold; text-align: right;"></th><th title = "InlineStrings.String31" style = "text-align: left;">String31</th><th title = "InlineStrings.String15" style = "text-align: left;">String15</th><th title = "Union{Missing, InlineStrings.String15}" style = "text-align: left;">String15</th></tr></thead><tbody><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">1</td><td style = "text-align: left;">Asgard_Solar</td><td style = "text-align: left;">producer</td><td style = "text-align: left;">renewables</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">2</td><td style = "text-align: left;">Asgard_CCGT</td><td style = "text-align: left;">conversion</td><td style = "text-align: left;">ccgt</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">3</td><td style = "text-align: left;">Midgard_Wind</td><td style = "text-align: left;">producer</td><td style = "text-align: left;">renewables</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">4</td><td style = "text-align: left;">Midgard_CCGT</td><td style = "text-align: left;">conversion</td><td style = "text-align: left;">ccgt</td></tr></tbody></table></div><p>Here we can see that the assets <code>Asgard_Solar</code> and <code>Midgard_Wind</code> belong to the <code>renewables</code> group, while the assets <code>Asgard_CCGT</code> and <code>Midgard_CCGT</code> belong to the <code>ccgt</code> group.</p><blockquote><p><strong>Note:</strong> If the group has a <code>min_investment_limit</code>, then assets in the group have to allow investment (<code>investable = true</code>) for the model to be feasible. If the assets are not <code>investable</code> then they cannot satisfy the minimum constraint.</p></blockquote></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Home</a><a class="docs-footer-nextpage" href="../tutorials/">Tutorials »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.7.0 on <span class="colophon-date" title="Wednesday 11 September 2024 08:19">Wednesday 11 September 2024</span>. Using Julia version 1.10.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
