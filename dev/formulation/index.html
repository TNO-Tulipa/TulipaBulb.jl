<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Mathematical Formulation · TulipaEnergyModel.jl</title><meta name="title" content="Mathematical Formulation · TulipaEnergyModel.jl"/><meta property="og:title" content="Mathematical Formulation · TulipaEnergyModel.jl"/><meta property="twitter:title" content="Mathematical Formulation · TulipaEnergyModel.jl"/><meta name="description" content="Documentation for TulipaEnergyModel.jl."/><meta property="og:description" content="Documentation for TulipaEnergyModel.jl."/><meta property="twitter:description" content="Documentation for TulipaEnergyModel.jl."/><meta property="og:url" content="https://TulipaEnergy.github.io/TulipaEnergyModel.jl/formulation/"/><meta property="twitter:url" content="https://TulipaEnergy.github.io/TulipaEnergyModel.jl/formulation/"/><link rel="canonical" href="https://TulipaEnergy.github.io/TulipaEnergyModel.jl/formulation/"/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script><link href="../assets/style.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.png" alt="TulipaEnergyModel.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../">TulipaEnergyModel.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../how-to-use/">How to Use</a></li><li><a class="tocitem" href="../tutorials/">Tutorials</a></li><li><a class="tocitem" href="../concepts/">Concepts</a></li><li class="is-active"><a class="tocitem" href>Mathematical Formulation</a><ul class="internal"><li><a class="tocitem" href="#math-sets"><span>Sets</span></a></li><li><a class="tocitem" href="#math-parameters"><span>Parameters</span></a></li><li><a class="tocitem" href="#math-variables"><span>Variables</span></a></li><li><a class="tocitem" href="#math-objective-function"><span>Objective Function</span></a></li><li><a class="tocitem" href="#math-constraints"><span>Constraints</span></a></li><li><a class="tocitem" href="#math-references"><span>References</span></a></li></ul></li><li><a class="tocitem" href="../api/">API</a></li><li><a class="tocitem" href="../reference/">Reference</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Mathematical Formulation</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Mathematical Formulation</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/TulipaEnergy/TulipaEnergyModel.jl.git" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="formulation"><a class="docs-heading-anchor" href="#formulation">Mathematical Formulation</a><a id="formulation-1"></a><a class="docs-heading-anchor-permalink" href="#formulation" title="Permalink"></a></h1><p>This section shows the mathematical formulation of <em>TulipaEnergyModel.jl</em>, assuming that the temporal definition of timesteps is the same for all the elements in the model (e.g., hourly). The <a href="../concepts/#concepts">concepts section</a> shows how the model handles the <a href="../concepts/#flex-time-res"><code>flexible temporal resolution</code></a> of assets and flows in the model.</p><h2 id="math-sets"><a class="docs-heading-anchor" href="#math-sets">Sets</a><a id="math-sets-1"></a><a class="docs-heading-anchor-permalink" href="#math-sets" title="Permalink"></a></h2><h3 id="Sets-for-Assets"><a class="docs-heading-anchor" href="#Sets-for-Assets">Sets for Assets</a><a id="Sets-for-Assets-1"></a><a class="docs-heading-anchor-permalink" href="#Sets-for-Assets" title="Permalink"></a></h3><table><tr><th style="text-align: right">Name</th><th style="text-align: right">Description</th><th style="text-align: right">Elements</th><th style="text-align: right">Superset</th><th style="text-align: right">Notes</th></tr><tr><td style="text-align: right"><span>$\mathcal{A}$</span></td><td style="text-align: right">Energy assets</td><td style="text-align: right"><span>$a \in \mathcal{A}$</span></td><td style="text-align: right"></td><td style="text-align: right">The Energy asset types (i.e., consumer, producer, storage, hub, and conversion) are mutually exclusive</td></tr><tr><td style="text-align: right"><span>$\mathcal{A}^{\text{c}}$</span></td><td style="text-align: right">Consumer energy assets</td><td style="text-align: right"></td><td style="text-align: right"><span>$\mathcal{A}^{\text{c}}  \subseteq \mathcal{A}$</span></td><td style="text-align: right"></td></tr><tr><td style="text-align: right"><span>$\mathcal{A}^{\text{p}}$</span></td><td style="text-align: right">Producer energy assets</td><td style="text-align: right"></td><td style="text-align: right"><span>$\mathcal{A}^{\text{p}}  \subseteq \mathcal{A}$</span></td><td style="text-align: right"></td></tr><tr><td style="text-align: right"><span>$\mathcal{A}^{\text{s}}$</span></td><td style="text-align: right">Storage energy assets</td><td style="text-align: right"></td><td style="text-align: right"><span>$\mathcal{A}^{\text{s}}  \subseteq \mathcal{A}$</span></td><td style="text-align: right"></td></tr><tr><td style="text-align: right"><span>$\mathcal{A}^{\text{h}}$</span></td><td style="text-align: right">Hub energy assets (e.g., transshipment)</td><td style="text-align: right"></td><td style="text-align: right"><span>$\mathcal{A}^{\text{h}}  \subseteq \mathcal{A}$</span></td><td style="text-align: right"></td></tr><tr><td style="text-align: right"><span>$\mathcal{A}^{\text{cv}}$</span></td><td style="text-align: right">Conversion energy assets</td><td style="text-align: right"></td><td style="text-align: right"><span>$\mathcal{A}^{\text{cv}} \subseteq \mathcal{A}$</span></td><td style="text-align: right"></td></tr></table><p>In addition, the following asset sets represent methods for incorporating additional variables and constraints in the model.</p><table><tr><th style="text-align: right">Name</th><th style="text-align: right">Description</th><th style="text-align: right">Elements</th><th style="text-align: right">Superset</th><th style="text-align: right">Notes</th></tr><tr><td style="text-align: right"><span>$\mathcal{A}^{\text{i}}$</span></td><td style="text-align: right">Energy assets with investment method</td><td style="text-align: right"></td><td style="text-align: right"><span>$\mathcal{A}^{\text{i}}  \subseteq \mathcal{A}$</span></td><td style="text-align: right"></td></tr><tr><td style="text-align: right"><span>$\mathcal{A}^{\text{ss}}$</span></td><td style="text-align: right">Energy assets with seasonal method</td><td style="text-align: right"></td><td style="text-align: right"><span>$\mathcal{A}^{\text{ss}} \subseteq \mathcal{A}$</span></td><td style="text-align: right">This set contains assets that use the seasonal method method. Please visit the how-to sections for <a href="../how-to-use/#seasonal-setup">seasonal storage</a> and <a href="../how-to-use/#max-min-outgoing-energy-setup">maximum/minimum outgoing energy limit</a> to learn how to set up this feature.</td></tr><tr><td style="text-align: right"><span>$\mathcal{A}^{\text{se}}$</span></td><td style="text-align: right">Storage energy assets with energy method</td><td style="text-align: right"></td><td style="text-align: right"><span>$\mathcal{A}^{\text{se}} \subseteq \mathcal{A}^{\text{s}}$</span></td><td style="text-align: right">This set contains storage assets that use investment energy method. Please visit the <a href="../how-to-use/#storage-investment-setup">how-to section</a> to learn how to set up this feature.</td></tr><tr><td style="text-align: right"><span>$\mathcal{A}^{\text{sb}}$</span></td><td style="text-align: right">Storage energy assets with binary method</td><td style="text-align: right"></td><td style="text-align: right"><span>$\mathcal{A}^{\text{sb}} \subseteq \mathcal{A}^{\text{s}} \setminus \mathcal{A}^{\text{ss}}$</span></td><td style="text-align: right">This set contains storage assets that use an extra binary variable to avoid charging and discharging simultaneously. Please visit the <a href="../how-to-use/#storage-binary-method-setup">how-to section</a> to learn how to set up this feature.</td></tr><tr><td style="text-align: right"><span>$\mathcal{A}^{\text{max e}}$</span></td><td style="text-align: right">Energy assets with maximum outgoing energy method</td><td style="text-align: right"></td><td style="text-align: right"><span>$\mathcal{A}^{\text{max e}} \subseteq \mathcal{A}$</span></td><td style="text-align: right">This set contains assets that use the maximum outgoing energy method. Please visit the <a href="../how-to-use/#max-min-outgoing-energy-setup">how-to section</a> to learn how to set up this feature.</td></tr><tr><td style="text-align: right"><span>$\mathcal{A}^{\text{min e}}$</span></td><td style="text-align: right">Energy assets with minimum outgoing energy method</td><td style="text-align: right"></td><td style="text-align: right"><span>$\mathcal{A}^{\text{min e}} \subseteq \mathcal{A}$</span></td><td style="text-align: right">This set contains assets that use the minimum outgoing energy method. Please visit the <a href="../how-to-use/#max-min-outgoing-energy-setup">how-to section</a> to learn how to set up this feature.</td></tr><tr><td style="text-align: right"><span>$\mathcal{A}^{\text{uc}}$</span></td><td style="text-align: right">Energy assets with unit commitment method</td><td style="text-align: right"></td><td style="text-align: right"><span>$\mathcal{A}^{\text{uc}}  \subseteq \mathcal{A}^{\text{cv}} \cup \mathcal{A}^{\text{p}}$</span></td><td style="text-align: right">This set contains conversion and production assets that have a unit commitment method. Please visit the <a href="../how-to-use/#unit-commitment-setup">how-to section</a> to learn how to set up this feature.</td></tr><tr><td style="text-align: right"><span>$\mathcal{A}^{\text{uc basic}}$</span></td><td style="text-align: right">Energy assets with a basic unit commitment method</td><td style="text-align: right"></td><td style="text-align: right"><span>$\mathcal{A}^{\text{uc basic}}  \subseteq \mathcal{A}^{\text{uc}}$</span></td><td style="text-align: right">This set contains the assets that have a basic unit commitment method. Please visit the <a href="../how-to-use/#unit-commitment-setup">how-to section</a> to learn how to set up this feature.</td></tr><tr><td style="text-align: right"><span>$\mathcal{A}^{\text{ramp}}$</span></td><td style="text-align: right">Energy assets with ramping method</td><td style="text-align: right"></td><td style="text-align: right"><span>$\mathcal{A}^{\text{ramp}}  \subseteq \mathcal{A}^{\text{cv}} \cup \mathcal{A}^{\text{p}}$</span></td><td style="text-align: right">This set contains conversion and production assets that have a ramping method. Please visit the <a href="../how-to-use/#ramping-setup">how-to section</a> to learn how to set up this feature.</td></tr></table><h3 id="Sets-for-Flows"><a class="docs-heading-anchor" href="#Sets-for-Flows">Sets for Flows</a><a id="Sets-for-Flows-1"></a><a class="docs-heading-anchor-permalink" href="#Sets-for-Flows" title="Permalink"></a></h3><table><tr><th style="text-align: right">Name</th><th style="text-align: right">Description</th><th style="text-align: right">Elements</th><th style="text-align: right">Superset</th><th style="text-align: right">Notes</th></tr><tr><td style="text-align: right"><span>$\mathcal{F}$</span></td><td style="text-align: right">Flow connections between two assets</td><td style="text-align: right"><span>$f \in \mathcal{F}$</span></td><td style="text-align: right"></td><td style="text-align: right"></td></tr><tr><td style="text-align: right"><span>$\mathcal{F}^{\text{in}}_a$</span></td><td style="text-align: right">Set of flows going into asset <span>$a$</span></td><td style="text-align: right"></td><td style="text-align: right"><span>$\mathcal{F}^{\text{in}}_a  \subseteq \mathcal{F}$</span></td><td style="text-align: right"></td></tr><tr><td style="text-align: right"><span>$\mathcal{F}^{\text{out}}_a$</span></td><td style="text-align: right">Set of flows going out of asset <span>$a$</span></td><td style="text-align: right"></td><td style="text-align: right"><span>$\mathcal{F}^{\text{out}}_a \subseteq \mathcal{F}$</span></td><td style="text-align: right"></td></tr></table><p>In addition, the following flow sets represent methods for incorporating additional variables and constraints in the model.</p><table><tr><th style="text-align: right">Name</th><th style="text-align: right">Description</th><th style="text-align: right">Elements</th><th style="text-align: right">Superset</th><th style="text-align: right">Notes</th></tr><tr><td style="text-align: right"><span>$\mathcal{F}^{\text{t}}$</span></td><td style="text-align: right">Flow between two assets with a transport method</td><td style="text-align: right"></td><td style="text-align: right"><span>$\mathcal{F}^{\text{t}} \subseteq \mathcal{F}$</span></td><td style="text-align: right"></td></tr><tr><td style="text-align: right"><span>$\mathcal{F}^{\text{ti}}$</span></td><td style="text-align: right">Transport flow with investment method</td><td style="text-align: right"></td><td style="text-align: right"><span>$\mathcal{F}^{\text{ti}} \subseteq \mathcal{F}^{\text{t}}$</span></td><td style="text-align: right"></td></tr></table><h3 id="Sets-for-Temporal-Structures"><a class="docs-heading-anchor" href="#Sets-for-Temporal-Structures">Sets for Temporal Structures</a><a id="Sets-for-Temporal-Structures-1"></a><a class="docs-heading-anchor-permalink" href="#Sets-for-Temporal-Structures" title="Permalink"></a></h3><table><tr><th style="text-align: right">Name</th><th style="text-align: right">Description</th><th style="text-align: right">Elements</th><th style="text-align: right">Superset</th><th style="text-align: right">Notes</th></tr><tr><td style="text-align: right"><span>$\mathcal{P}$</span></td><td style="text-align: right">Periods in the timeframe</td><td style="text-align: right"><span>$p \in \mathcal{P}$</span></td><td style="text-align: right"><span>$\mathcal{P} \subset \mathbb{N}$</span></td><td style="text-align: right"></td></tr><tr><td style="text-align: right"><span>$\mathcal{K}$</span></td><td style="text-align: right">Representative periods (rp)</td><td style="text-align: right"><span>$k \in \mathcal{K}$</span></td><td style="text-align: right"><span>$\mathcal{K} \subset \mathbb{N}$</span></td><td style="text-align: right"><span>$\mathcal{K}$</span> does not have to be a subset of <span>$\mathcal{P}$</span></td></tr><tr><td style="text-align: right"><span>$\mathcal{B}_{k}$</span></td><td style="text-align: right">Timesteps blocks within a representative period <span>$k$</span></td><td style="text-align: right"><span>$b_{k} \in \mathcal{B}_k$</span></td><td style="text-align: right"></td><td style="text-align: right"><span>$\mathcal{B}_k$</span> is a partition of timesteps in a representative period <span>$k$</span></td></tr></table><h3 id="Sets-for-Groups"><a class="docs-heading-anchor" href="#Sets-for-Groups">Sets for Groups</a><a id="Sets-for-Groups-1"></a><a class="docs-heading-anchor-permalink" href="#Sets-for-Groups" title="Permalink"></a></h3><table><tr><th style="text-align: right">Name</th><th style="text-align: right">Description</th><th style="text-align: right">Elements</th><th style="text-align: right">Superset</th><th style="text-align: right">Notes</th></tr><tr><td style="text-align: right"><span>$\mathcal{G}^{\text{a}}$</span></td><td style="text-align: right">Groups of energy assets</td><td style="text-align: right"><span>$g \in \mathcal{G}^{\text{a}}$</span></td><td style="text-align: right"></td><td style="text-align: right"></td></tr></table><p>In addition, the following subsets represent methods for incorporating additional constraints in the model.</p><table><tr><th style="text-align: right">Name</th><th style="text-align: right">Description</th><th style="text-align: right">Elements</th><th style="text-align: right">Superset</th><th style="text-align: right">Notes</th></tr><tr><td style="text-align: right"><span>$\mathcal{G}^{\text{ai}}$</span></td><td style="text-align: right">Group of assets that share min/max investment limit</td><td style="text-align: right"></td><td style="text-align: right"><span>$\mathcal{G}^{\text{ai}} \subseteq \mathcal{G}^{\text{a}}$</span></td><td style="text-align: right">This set contains assets that have a group investment limit. Please visit the <a href="../how-to-use/#investment-group-setup">how-to section</a> to learn how to set up this feature.</td></tr></table><h2 id="math-parameters"><a class="docs-heading-anchor" href="#math-parameters">Parameters</a><a id="math-parameters-1"></a><a class="docs-heading-anchor-permalink" href="#math-parameters" title="Permalink"></a></h2><h3 id="Parameter-for-Assets"><a class="docs-heading-anchor" href="#Parameter-for-Assets">Parameter for Assets</a><a id="Parameter-for-Assets-1"></a><a class="docs-heading-anchor-permalink" href="#Parameter-for-Assets" title="Permalink"></a></h3><h4 id="General-Parameters-for-Assets"><a class="docs-heading-anchor" href="#General-Parameters-for-Assets">General Parameters for Assets</a><a id="General-Parameters-for-Assets-1"></a><a class="docs-heading-anchor-permalink" href="#General-Parameters-for-Assets" title="Permalink"></a></h4><table><tr><th style="text-align: right">Name</th><th style="text-align: right">Domain</th><th style="text-align: right">Domains of Indices</th><th style="text-align: right">Description</th><th style="text-align: right">Units</th></tr><tr><td style="text-align: right"><span>$p^{\text{inv cost}}_{a}$</span></td><td style="text-align: right"><span>$\mathbb{R}_{+}$</span></td><td style="text-align: right"><span>$a \in \mathcal{A}$</span></td><td style="text-align: right">Investment cost of a unit of asset <span>$a$</span></td><td style="text-align: right">[kEUR/MW/year]</td></tr><tr><td style="text-align: right"><span>$p^{\text{inv limit}}_{a}$</span></td><td style="text-align: right"><span>$\mathbb{R}_{+}$</span></td><td style="text-align: right"><span>$a \in \mathcal{A}$</span></td><td style="text-align: right">Investment potential of asset <span>$a$</span></td><td style="text-align: right">[MW]</td></tr><tr><td style="text-align: right"><span>$p^{\text{capacity}}_{a}$</span></td><td style="text-align: right"><span>$\mathbb{R}_{+}$</span></td><td style="text-align: right"><span>$a \in \mathcal{A}$</span></td><td style="text-align: right">Capacity per unit of asset <span>$a$</span></td><td style="text-align: right">[MW]</td></tr><tr><td style="text-align: right"><span>$p^{\text{init units}}_{a}$</span></td><td style="text-align: right"><span>$\mathbb{Z}_{+}$</span></td><td style="text-align: right"><span>$a \in \mathcal{A}$</span></td><td style="text-align: right">Initial number of units of asset <span>$a$</span></td><td style="text-align: right">[units]</td></tr><tr><td style="text-align: right"><span>$p^{\text{availability profile}}_{a,k,b_k}$</span></td><td style="text-align: right"><span>$\mathbb{R}_{+}$</span></td><td style="text-align: right"><span>$a \in \mathcal{A}$</span>, <span>$k \in \mathcal{K}$</span>, <span>$b_k \in \mathcal{B_k}$</span></td><td style="text-align: right">Availability profile of asset <span>$a$</span> in the representative period <span>$k$</span> and timestep block <span>$b_k$</span></td><td style="text-align: right">[p.u.]</td></tr><tr><td style="text-align: right"><span>$p^{\text{group}}_{a}$</span></td><td style="text-align: right"><span>$\mathcal{G}^{\text{a}}$</span></td><td style="text-align: right"><span>$a \in \mathcal{A}$</span></td><td style="text-align: right">Group <span>$g$</span> to which the asset <span>$a$</span> belongs</td><td style="text-align: right">[-]</td></tr></table><h4 id="Extra-Parameters-for-Consumer-Assets"><a class="docs-heading-anchor" href="#Extra-Parameters-for-Consumer-Assets">Extra Parameters for Consumer Assets</a><a id="Extra-Parameters-for-Consumer-Assets-1"></a><a class="docs-heading-anchor-permalink" href="#Extra-Parameters-for-Consumer-Assets" title="Permalink"></a></h4><table><tr><th style="text-align: right">Name</th><th style="text-align: right">Domain</th><th style="text-align: right">Domains of Indices</th><th style="text-align: right">Description</th><th style="text-align: right">Units</th></tr><tr><td style="text-align: right"><span>$p^{\text{peak demand}}_{a}$</span></td><td style="text-align: right"><span>$\mathbb{R}_{+}$</span></td><td style="text-align: right"><span>$a \in \mathcal{A}^{\text{c}}$</span></td><td style="text-align: right">Peak demand of consumer asset <span>$a$</span></td><td style="text-align: right">[MW]</td></tr><tr><td style="text-align: right"><span>$p^{\text{demand profile}}_{a,k,b_k}$</span></td><td style="text-align: right"><span>$\mathbb{R}_{+}$</span></td><td style="text-align: right"><span>$a \in \mathcal{A^{\text{c}}}$</span>, <span>$k \in \mathcal{K}$</span>, <span>$b_k \in \mathcal{B_k}$</span></td><td style="text-align: right">Demand profile of consumer asset <span>$a$</span> in the representative period <span>$k$</span> and timestep block <span>$b_k$</span></td><td style="text-align: right">[p.u.]</td></tr></table><h4 id="Extra-Parameters-for-Storage-Assets"><a class="docs-heading-anchor" href="#Extra-Parameters-for-Storage-Assets">Extra Parameters for Storage Assets</a><a id="Extra-Parameters-for-Storage-Assets-1"></a><a class="docs-heading-anchor-permalink" href="#Extra-Parameters-for-Storage-Assets" title="Permalink"></a></h4><table><tr><th style="text-align: right">Name</th><th style="text-align: right">Domain</th><th style="text-align: right">Domains of Indices</th><th style="text-align: right">Description</th><th style="text-align: right">Units</th></tr><tr><td style="text-align: right"><span>$p^{\text{init storage capacity}}_{a}$</span></td><td style="text-align: right"><span>$\mathbb{R}_{+}$</span></td><td style="text-align: right"><span>$a \in \mathcal{A}^{\text{s}}$</span></td><td style="text-align: right">Initial storage capacity of storage asset <span>$a$</span></td><td style="text-align: right">[MWh]</td></tr><tr><td style="text-align: right"><span>$p^{\text{init storage level}}_{a}$</span></td><td style="text-align: right"><span>$\mathbb{R}_{+}$</span></td><td style="text-align: right"><span>$a \in \mathcal{A}^{\text{s}}$</span></td><td style="text-align: right">Initial storage level of storage asset <span>$a$</span></td><td style="text-align: right">[MWh]</td></tr><tr><td style="text-align: right"><span>$p^{\text{inflows}}_{a,k,b_k}$</span></td><td style="text-align: right"><span>$\mathbb{R}_{+}$</span></td><td style="text-align: right"><span>$a \in \mathcal{A^{\text{s}}}$</span>, <span>$k \in \mathcal{K}$</span>, <span>$b_k \in \mathcal{B_k}$</span></td><td style="text-align: right">Inflows of storage asset <span>$a$</span> in the representative period <span>$k$</span> and timestep block <span>$b_k$</span></td><td style="text-align: right">[MWh]</td></tr><tr><td style="text-align: right"><span>$p^{\text{inv cost energy}}_{a}$</span></td><td style="text-align: right"><span>$\mathbb{R}_{+}$</span></td><td style="text-align: right"><span>$a \in \mathcal{A}^{\text{se}}$</span></td><td style="text-align: right">Investment cost of a energy unit of asset <span>$a$</span></td><td style="text-align: right">[kEUR/MWh/year]</td></tr><tr><td style="text-align: right"><span>$p^{\text{inv limit energy}}_{a}$</span></td><td style="text-align: right"><span>$\mathbb{R}_{+}$</span></td><td style="text-align: right"><span>$a \in \mathcal{A}^{\text{se}}$</span></td><td style="text-align: right">Investment energy potential of asset <span>$a$</span></td><td style="text-align: right">[MWh]</td></tr><tr><td style="text-align: right"><span>$p^{\text{energy capacity}}_{a}$</span></td><td style="text-align: right"><span>$\mathbb{R}_{+}$</span></td><td style="text-align: right"><span>$a \in \mathcal{A}^{\text{se}}$</span></td><td style="text-align: right">Energy capacity of a unit of investment of the asset <span>$a$</span></td><td style="text-align: right">[MWh]</td></tr><tr><td style="text-align: right"><span>$p^{\text{energy to power ratio}}_a$</span></td><td style="text-align: right"><span>$\mathbb{R}_{+}$</span></td><td style="text-align: right"><span>$a \in \mathcal{A}^{\text{s}} \setminus \mathcal{A}^{\text{se}}$</span></td><td style="text-align: right">Energy to power ratio of storage asset <span>$a$</span></td><td style="text-align: right">[h]</td></tr><tr><td style="text-align: right"><span>$p^{\text{max intra level}}_{a,k,b_k}$</span></td><td style="text-align: right"><span>$\mathbb{R}_{+}$</span></td><td style="text-align: right"><span>$a \in \mathcal{A^{\text{s}}} \setminus \mathcal{A^{\text{ss}}}$</span>, <span>$k \in \mathcal{K}$</span>, <span>$b_k \in \mathcal{B_k}$</span></td><td style="text-align: right">Maximum intra-storage level profile of storage asset <span>$a$</span> in representative period <span>$k$</span> and timestep block <span>$b_k$</span></td><td style="text-align: right">[p.u.]</td></tr><tr><td style="text-align: right"><span>$p^{\text{min intra level}}_{a,k,b_k}$</span></td><td style="text-align: right"><span>$\mathbb{R}_{+}$</span></td><td style="text-align: right"><span>$a \in \mathcal{A^{\text{s}}} \setminus \mathcal{A^{\text{ss}}}$</span>, <span>$k \in \mathcal{K}$</span>, <span>$b_k \in \mathcal{B_k}$</span></td><td style="text-align: right">Minimum intra-storage level profile of storage asset <span>$a$</span> in representative period <span>$k$</span> and timestep block <span>$b_k$</span></td><td style="text-align: right">[p.u.]</td></tr><tr><td style="text-align: right"><span>$p^{\text{max inter level}}_{a,p}$</span></td><td style="text-align: right"><span>$\mathbb{R}_{+}$</span></td><td style="text-align: right"><span>$a \in \mathcal{A^{\text{ss}}}$</span>, <span>$p \in \mathcal{P}$</span></td><td style="text-align: right">Maximum inter-storage level profile of storage asset <span>$a$</span> in the period <span>$p$</span> of the timeframe</td><td style="text-align: right">[p.u.]</td></tr><tr><td style="text-align: right"><span>$p^{\text{min inter level}}_{a,p}$</span></td><td style="text-align: right"><span>$\mathbb{R}_{+}$</span></td><td style="text-align: right"><span>$a \in \mathcal{A^{\text{ss}}}$</span>, <span>$p \in \mathcal{P}$</span></td><td style="text-align: right">Minimum inter-storage level profile of storage asset <span>$a$</span> in the period <span>$p$</span> of the timeframe</td><td style="text-align: right">[p.u.]</td></tr></table><h4 id="Extra-Parameters-for-Energy-Constraints"><a class="docs-heading-anchor" href="#Extra-Parameters-for-Energy-Constraints">Extra Parameters for Energy Constraints</a><a id="Extra-Parameters-for-Energy-Constraints-1"></a><a class="docs-heading-anchor-permalink" href="#Extra-Parameters-for-Energy-Constraints" title="Permalink"></a></h4><table><tr><th style="text-align: right">Name</th><th style="text-align: right">Domain</th><th style="text-align: right">Domains of Indices</th><th style="text-align: right">Description</th><th style="text-align: right">Units</th></tr><tr><td style="text-align: right"><span>$p^{\text{min inter profile}}_{a,p}$</span></td><td style="text-align: right"><span>$\mathbb{R}_{+}$</span></td><td style="text-align: right"><span>$a \in \mathcal{A^{\text{min e}}}$</span>, <span>$p \in \mathcal{P}$</span></td><td style="text-align: right">Minimum outgoing inter-temporal energy profile of asset <span>$a$</span> in the period <span>$p$</span> of the timeframe</td><td style="text-align: right">[p.u.]</td></tr><tr><td style="text-align: right"><span>$p^{\text{max inter profile}}_{a,p}$</span></td><td style="text-align: right"><span>$\mathbb{R}_{+}$</span></td><td style="text-align: right"><span>$a \in \mathcal{A^{\text{max e}}}$</span>, <span>$p \in \mathcal{P}$</span></td><td style="text-align: right">Maximum outgoing inter-temporal energy profile of asset <span>$a$</span> in the period <span>$p$</span> of the timeframe</td><td style="text-align: right">[p.u.]</td></tr><tr><td style="text-align: right"><span>$p^{\text{max energy}}_{a,p}$</span></td><td style="text-align: right"><span>$\mathbb{R}_{+}$</span></td><td style="text-align: right"><span>$a \in \mathcal{A^{\text{max e}}}$</span></td><td style="text-align: right">Maximum outgoing inter-temporal energy value of asset <span>$a$</span></td><td style="text-align: right">[MWh]</td></tr><tr><td style="text-align: right"><span>$p^{\text{min energy}}_{a,p}$</span></td><td style="text-align: right"><span>$\mathbb{R}_{+}$</span></td><td style="text-align: right"><span>$a \in \mathcal{A^{\text{min e}}}$</span></td><td style="text-align: right">Minimum outgoing inter-temporal energy value of asset <span>$a$</span></td><td style="text-align: right">[MWh]</td></tr></table><h4 id="Extra-Parameters-for-Producers-and-Conversion-Assets"><a class="docs-heading-anchor" href="#Extra-Parameters-for-Producers-and-Conversion-Assets">Extra Parameters for Producers and Conversion Assets</a><a id="Extra-Parameters-for-Producers-and-Conversion-Assets-1"></a><a class="docs-heading-anchor-permalink" href="#Extra-Parameters-for-Producers-and-Conversion-Assets" title="Permalink"></a></h4><table><tr><th style="text-align: right">Name</th><th style="text-align: right">Domain</th><th style="text-align: right">Domains of Indices</th><th style="text-align: right">Description</th><th style="text-align: right">Units</th></tr><tr><td style="text-align: right"><span>$p^{\text{min operating point}}_{a}$</span></td><td style="text-align: right"><span>$\mathbb{R}_{+}$</span></td><td style="text-align: right"><span>$a \in \mathcal{A^{\text{uc}}}$</span></td><td style="text-align: right">Minimum operating point or minimum stable generation level defined as a portion of the capacity of asset <span>$a$</span></td><td style="text-align: right">[p.u.]</td></tr><tr><td style="text-align: right"><span>$p^{\text{units on cost}}_{a}$</span></td><td style="text-align: right"><span>$\mathbb{R}_{+}$</span></td><td style="text-align: right"><span>$a \in \mathcal{A^{\text{uc}}}$</span></td><td style="text-align: right">Objective function coefficient on <code>units_on</code> variable. e.g., no-load cost or idling cost of asset <span>$a$</span></td><td style="text-align: right">[kEUR/h/units]</td></tr><tr><td style="text-align: right"><span>$p^{\text{max ramp up}}_{a}$</span></td><td style="text-align: right"><span>$\mathbb{R}_{+}$</span></td><td style="text-align: right"><span>$a \in \mathcal{A^{\text{ramp}}}$</span></td><td style="text-align: right">Maximum ramping up rate as a portion of the capacity of asset <span>$a$</span></td><td style="text-align: right">[p.u./h]</td></tr><tr><td style="text-align: right"><span>$p^{\text{max ramp down}}_{a}$</span></td><td style="text-align: right"><span>$\mathbb{R}_{+}$</span></td><td style="text-align: right"><span>$a \in \mathcal{A^{\text{ramp}}}$</span></td><td style="text-align: right">Maximum ramping down rate as a portion of the capacity of asset <span>$a$</span></td><td style="text-align: right">[p.u./h]</td></tr></table><h3 id="Parameter-for-Flows"><a class="docs-heading-anchor" href="#Parameter-for-Flows">Parameter for Flows</a><a id="Parameter-for-Flows-1"></a><a class="docs-heading-anchor-permalink" href="#Parameter-for-Flows" title="Permalink"></a></h3><table><tr><th style="text-align: right">Name</th><th style="text-align: right">Domain</th><th style="text-align: right">Domains of Indices</th><th style="text-align: right">Description</th><th style="text-align: right">Units</th></tr><tr><td style="text-align: right"><span>$p^{\text{variable cost}}_{f}$</span></td><td style="text-align: right"><span>$\mathbb{R}_{+}$</span></td><td style="text-align: right"><span>$f \in \mathcal{F}$</span></td><td style="text-align: right">Variable cost of flow <span>$f$</span></td><td style="text-align: right">[kEUR/MWh]</td></tr><tr><td style="text-align: right"><span>$p^{\text{eff}}_f$</span></td><td style="text-align: right"><span>$\mathbb{R}_{+}$</span></td><td style="text-align: right"><span>$f \in \mathcal{F}$</span></td><td style="text-align: right">Efficiency of flow <span>$f$</span></td><td style="text-align: right">[p.u.]</td></tr><tr><td style="text-align: right"><span>$p^{\text{inv cost}}_{f}$</span></td><td style="text-align: right"><span>$\mathbb{R}_{+}$</span></td><td style="text-align: right"><span>$f \in \mathcal{F}^{\text{t}}$</span></td><td style="text-align: right">Investment cost of transport flow <span>$f$</span></td><td style="text-align: right">[kEUR/MW/year]</td></tr><tr><td style="text-align: right"><span>$p^{\text{inv limit}}_{f}$</span></td><td style="text-align: right"><span>$\mathbb{R}_{+}$</span></td><td style="text-align: right"><span>$f \in \mathcal{F}^{\text{t}}$</span></td><td style="text-align: right">Investment potential of flow <span>$f$</span></td><td style="text-align: right">[MW]</td></tr><tr><td style="text-align: right"><span>$p^{\text{capacity}}_{f}$</span></td><td style="text-align: right"><span>$\mathbb{R}_{+}$</span></td><td style="text-align: right"><span>$f \in \mathcal{F}^{\text{t}}$</span></td><td style="text-align: right">Capacity per unit of investment of transport flow <span>$f$</span> (both exports and imports)</td><td style="text-align: right">[MW]</td></tr><tr><td style="text-align: right"><span>$p^{\text{init export capacity}}_{f}$</span></td><td style="text-align: right"><span>$\mathbb{R}_{+}$</span></td><td style="text-align: right"><span>$f \in \mathcal{F}^{\text{t}}$</span></td><td style="text-align: right">Initial export capacity of transport flow <span>$f$</span></td><td style="text-align: right">[MW]</td></tr><tr><td style="text-align: right"><span>$p^{\text{init import capacity}}_{f}$</span></td><td style="text-align: right"><span>$\mathbb{R}_{+}$</span></td><td style="text-align: right"><span>$f \in \mathcal{F}^{\text{t}}$</span></td><td style="text-align: right">Initial import capacity of transport flow <span>$f$</span></td><td style="text-align: right">[MW]</td></tr><tr><td style="text-align: right"><span>$p^{\text{availability profile}}_{f,k,b_k}$</span></td><td style="text-align: right"><span>$\mathbb{R}_{+}$</span></td><td style="text-align: right"><span>$a \in \mathcal{F}$</span>, <span>$k \in \mathcal{K}$</span>, <span>$b_k \in \mathcal{B_k}$</span></td><td style="text-align: right">Availability profile of flow <span>$f$</span> in the representative period <span>$k$</span> and timestep block <span>$b_k$</span></td><td style="text-align: right">[p.u.]</td></tr></table><h3 id="Parameter-for-Temporal-Structures"><a class="docs-heading-anchor" href="#Parameter-for-Temporal-Structures">Parameter for Temporal Structures</a><a id="Parameter-for-Temporal-Structures-1"></a><a class="docs-heading-anchor-permalink" href="#Parameter-for-Temporal-Structures" title="Permalink"></a></h3><table><tr><th style="text-align: right">Name</th><th style="text-align: right">Domain</th><th style="text-align: right">Domains of Indices</th><th style="text-align: right">Description</th><th style="text-align: right">Units</th></tr><tr><td style="text-align: right"><span>$p^{\text{duration}}_{b_k}$</span></td><td style="text-align: right"><span>$\mathbb{R}_{+}$</span></td><td style="text-align: right"><span>$b_k \in \mathcal{B_k}$</span></td><td style="text-align: right">Duration of the timestep blocks <span>$b_k$</span></td><td style="text-align: right">[h]</td></tr><tr><td style="text-align: right"><span>$p^{\text{rp weight}}_{k}$</span></td><td style="text-align: right"><span>$\mathbb{R}_{+}$</span></td><td style="text-align: right"><span>$k \in \mathcal{K}$</span></td><td style="text-align: right">Weight of representative period <span>$k$</span></td><td style="text-align: right">[-]</td></tr><tr><td style="text-align: right"><span>$p^{\text{map}}_{p,k}$</span></td><td style="text-align: right"><span>$\mathbb{R}_{+}$</span></td><td style="text-align: right"><span>$p \in \mathcal{P}$</span>, <span>$k \in \mathcal{K}$</span></td><td style="text-align: right">Map with the weight of representative period <span>$k$</span> in period <span>$p$</span></td><td style="text-align: right">[-]</td></tr></table><h3 id="Parameter-for-Groups"><a class="docs-heading-anchor" href="#Parameter-for-Groups">Parameter for Groups</a><a id="Parameter-for-Groups-1"></a><a class="docs-heading-anchor-permalink" href="#Parameter-for-Groups" title="Permalink"></a></h3><table><tr><th style="text-align: right">Name</th><th style="text-align: right">Domain</th><th style="text-align: right">Domains of Indices</th><th style="text-align: right">Description</th><th style="text-align: right">Units</th></tr><tr><td style="text-align: right"><span>$p^{\text{min invest limit}}_{g}$</span></td><td style="text-align: right"><span>$\mathbb{R}_{+}$</span></td><td style="text-align: right"><span>$g \in \mathcal{G}^{\text{ai}}$</span></td><td style="text-align: right">Minimum investment limit (potential) of group <span>$g$</span></td><td style="text-align: right">[MW]</td></tr><tr><td style="text-align: right"><span>$p^{\text{max invest limit}}_{g}$</span></td><td style="text-align: right"><span>$\mathbb{R}_{+}$</span></td><td style="text-align: right"><span>$g \in \mathcal{G}^{\text{ai}}$</span></td><td style="text-align: right">Maximum investment limit (potential) of group <span>$g$</span></td><td style="text-align: right">[MW]</td></tr></table><h2 id="math-variables"><a class="docs-heading-anchor" href="#math-variables">Variables</a><a id="math-variables-1"></a><a class="docs-heading-anchor-permalink" href="#math-variables" title="Permalink"></a></h2><table><tr><th style="text-align: right">Name</th><th style="text-align: right">Domain</th><th style="text-align: right">Domains of Indices</th><th style="text-align: right">Description</th><th style="text-align: right">Units</th></tr><tr><td style="text-align: right"><span>$v^{\text{flow}}_{f,k,b_k}$</span></td><td style="text-align: right"><span>$\mathbb{R}$</span></td><td style="text-align: right"><span>$f \in \mathcal{F}$</span>, <span>$k \in \mathcal{K}$</span>, <span>$b_k \in \mathcal{B_k}$</span></td><td style="text-align: right">Flow <span>$f$</span> between two assets in representative period <span>$k$</span> and timestep block <span>$b_k$</span></td><td style="text-align: right">[MW]</td></tr><tr><td style="text-align: right"><span>$v^{\text{inv}}_{a}$</span></td><td style="text-align: right"><span>$\mathbb{Z}_{+}$</span></td><td style="text-align: right"><span>$a \in \mathcal{A}^{\text{i}}$</span></td><td style="text-align: right">Number of invested units of asset <span>$a$</span></td><td style="text-align: right">[units]</td></tr><tr><td style="text-align: right"><span>$v^{\text{inv energy}}_{a}$</span></td><td style="text-align: right"><span>$\mathbb{Z}_{+}$</span></td><td style="text-align: right"><span>$a \in \mathcal{A}^{\text{i}} \cap \mathcal{A}^{\text{se}}$</span></td><td style="text-align: right">Number of invested units of the energy component of the storage asset <span>$a$</span> that use energy method</td><td style="text-align: right">[units]</td></tr><tr><td style="text-align: right"><span>$v^{\text{inv}}_{f}$</span></td><td style="text-align: right"><span>$\mathbb{Z}_{+}$</span></td><td style="text-align: right"><span>$f \in \mathcal{F}^{\text{ti}}$</span></td><td style="text-align: right">Number of invested units of capacity increment of transport flow <span>$f$</span></td><td style="text-align: right">[units]</td></tr><tr><td style="text-align: right"><span>$v^{\text{intra-storage}}_{a,k,b_k}$</span></td><td style="text-align: right"><span>$\mathbb{R}_{+}$</span></td><td style="text-align: right"><span>$a \in \mathcal{A}^{\text{s}} \setminus \mathcal{A}^{\text{ss}}$</span>, <span>$k \in \mathcal{K}$</span>, <span>$b_k \in \mathcal{B_k}$</span></td><td style="text-align: right">Intra storage level (within a representative period) for storage asset <span>$a$</span>, representative period <span>$k$</span>, and timestep block <span>$b_k$</span></td><td style="text-align: right">[MWh]</td></tr><tr><td style="text-align: right"><span>$v^{\text{inter-storage}}_{a,p}$</span></td><td style="text-align: right"><span>$\mathbb{R}_{+}$</span></td><td style="text-align: right"><span>$a \in \mathcal{A^{\text{ss}}}$</span>, <span>$p \in \mathcal{P}$</span></td><td style="text-align: right">Inter storage level (between representative periods) for storage asset <span>$a$</span> and period <span>$p$</span></td><td style="text-align: right">[MWh]</td></tr><tr><td style="text-align: right"><span>$v^{\text{is charging}}_{a,k,b_k}$</span></td><td style="text-align: right"><span>$\{0, 1\}$</span></td><td style="text-align: right"><span>$a \in \mathcal{A}^{\text{sb}}$</span>, <span>$k \in \mathcal{K}$</span>, <span>$b_k \in \mathcal{B_k}$</span></td><td style="text-align: right">If an storage asset <span>$a$</span> is charging or not in representative period <span>$k$</span> and timestep block <span>$b_k$</span></td><td style="text-align: right">[-]</td></tr><tr><td style="text-align: right"><span>$v^{\text{units on}}_{a,k,b_k}$</span></td><td style="text-align: right"><span>$\mathbb{Z}_{+}$</span></td><td style="text-align: right"><span>$a \in \mathcal{A}^{\text{uc}}$</span>, <span>$k \in \mathcal{K}$</span>, <span>$b_k \in \mathcal{B_k}$</span></td><td style="text-align: right">Number of units ON of asset <span>$a$</span> in representative period <span>$k$</span> and timestep block <span>$b_k$</span></td><td style="text-align: right">[units]</td></tr></table><h2 id="math-objective-function"><a class="docs-heading-anchor" href="#math-objective-function">Objective Function</a><a id="math-objective-function-1"></a><a class="docs-heading-anchor-permalink" href="#math-objective-function" title="Permalink"></a></h2><p>Objective function:</p><p class="math-container">\[\begin{aligned}
\text{{minimize}} \quad &amp; assets\_investment\_cost + flows\_investment\_cost \\
                        &amp; + flows\_variable\_cost + unit\_on\_cost
\end{aligned}\]</p><p>Where:</p><p class="math-container">\[\begin{aligned}
assets\_investment\_cost &amp;= \sum_{a \in \mathcal{A}^{\text{i}} } p^{\text{inv cost}}_{a} \cdot p^{\text{capacity}}_{a} \cdot v^{\text{inv}}_{a} \\ &amp;+  \sum_{a \in \mathcal{A}^{\text{se}} \cap \mathcal{A}^{\text{i}} } p^{\text{inv cost energy}}_{a} \cdot p^{\text{energy capacity}}_{a} \cdot v^{\text{inv energy}}_{a}   \\
flows\_investment\_cost &amp;= \sum_{f \in \mathcal{F}^{\text{ti}}} p^{\text{inv cost}}_{f} \cdot p^{\text{capacity}}_{f} \cdot v^{\text{inv}}_{f} \\
flows\_variable\_cost &amp;= \sum_{f \in \mathcal{F}} \sum_{k \in \mathcal{K}} \sum_{b_k \in \mathcal{B_k}} p^{\text{rp weight}}_{k} \cdot p^{\text{variable cost}}_{f} \cdot p^{\text{duration}}_{b_k} \cdot v^{\text{flow}}_{f,k,b_k} \\
unit\_on\_cost &amp;= \sum_{a \in \mathcal{A}^{\text{uc}}} \sum_{k \in \mathcal{K}} \sum_{b_k \in \mathcal{B_k}} p^{\text{rp weight}}_{k} \cdot p^{\text{units on cost}}_{a} \cdot p^{\text{duration}}_{b_k} \cdot v^{\text{units on}}_{a,k,b_k}
\end{aligned}\]</p><h2 id="math-constraints"><a class="docs-heading-anchor" href="#math-constraints">Constraints</a><a id="math-constraints-1"></a><a class="docs-heading-anchor-permalink" href="#math-constraints" title="Permalink"></a></h2><h3 id="cap-constraints"><a class="docs-heading-anchor" href="#cap-constraints">Capacity Constraints</a><a id="cap-constraints-1"></a><a class="docs-heading-anchor-permalink" href="#cap-constraints" title="Permalink"></a></h3><h4 id="Maximum-Output-Flows-Limit"><a class="docs-heading-anchor" href="#Maximum-Output-Flows-Limit">Maximum Output Flows Limit</a><a id="Maximum-Output-Flows-Limit-1"></a><a class="docs-heading-anchor-permalink" href="#Maximum-Output-Flows-Limit" title="Permalink"></a></h4><p class="math-container">\[\begin{aligned}
\sum_{f \in \mathcal{F}^{\text{out}}_a} v^{\text{flow}}_{f,k,b_k} \leq p^{\text{availability profile}}_{a,k,b_k} \cdot p^{\text{capacity}}_{a} \cdot \left(p^{\text{init units}}_{a} + v^{\text{inv}}_{a} \right)  \quad
\\ \\ \forall a \in \mathcal{A}^{\text{cv}} \cup \left(\mathcal{A}^{\text{s}} \setminus \mathcal{A}^{\text{sb}} \right) \cup \mathcal{A}^{\text{p}}, \forall k \in \mathcal{K},\forall b_k \in \mathcal{B_k}
\end{aligned}\]</p><p>Storage assets using the method to avoid charging and discharging simultaneously, i.e., <span>$a \in \mathcal{A}^{\text{sb}}$</span>, use the following constraints instead of the previous one:</p><p class="math-container">\[\begin{aligned}
\sum_{f \in \mathcal{F}^{\text{out}}_a} v^{\text{flow}}_{f,k,b_k} \leq p^{\text{availability profile}}_{a,k,b_k} \cdot \left(p^{\text{capacity}}_{a} \cdot p^{\text{init units}}_{a} + p^{\text{inv limit}}_{a} \right) \cdot \left(1 - v^{\text{is charging}}_{a,k,b_k} \right) \quad
\\ \\ \forall a \in \mathcal{A}^{\text{sb}}, \forall k \in \mathcal{K},\forall b_k \in \mathcal{B_k}
\end{aligned}\]</p><p class="math-container">\[\begin{aligned}
\sum_{f \in \mathcal{F}^{\text{out}}_a} v^{\text{flow}}_{f,k,b_k} \leq p^{\text{availability profile}}_{a,k,b_k} \cdot p^{\text{capacity}}_{a} \cdot \left(p^{\text{init units}}_{a} \cdot \left(1 - v^{\text{is charging}}_{a,k,b_k} \right) + v^{\text{inv}}_{a} \right) \quad
\\ \\ \forall a \in \mathcal{A}^{\text{sb}}, \forall k \in \mathcal{K},\forall b_k \in \mathcal{B_k}
\end{aligned}\]</p><h4 id="Maximum-Input-Flows-Limit"><a class="docs-heading-anchor" href="#Maximum-Input-Flows-Limit">Maximum Input Flows Limit</a><a id="Maximum-Input-Flows-Limit-1"></a><a class="docs-heading-anchor-permalink" href="#Maximum-Input-Flows-Limit" title="Permalink"></a></h4><p class="math-container">\[\begin{aligned}
\sum_{f \in \mathcal{F}^{\text{in}}_a} v^{\text{flow}}_{f,k,b_k} \leq p^{\text{availability profile}}_{a,k,b_k} \cdot p^{\text{capacity}}_{a} \cdot \left(p^{\text{init units}}_{a} + v^{\text{inv}}_{a} \right)  \quad
\\ \\ \forall a \in \mathcal{A}^{\text{s}} \setminus \mathcal{A}^{\text{sb}}, \forall k \in \mathcal{K},\forall b_k \in \mathcal{B_k}
\end{aligned}\]</p><p>Storage assets using the method to avoid charging and discharging simultaneously, i.e., <span>$a \in \mathcal{A}^{\text{sb}}$</span>, use the following constraints instead of the previous one:</p><p class="math-container">\[\begin{aligned}
\sum_{f \in \mathcal{F}^{\text{in}}_a} v^{\text{flow}}_{f,k,b_k} \leq p^{\text{availability profile}}_{a,k,b_k} \cdot \left(p^{\text{capacity}}_{a} \cdot p^{\text{init units}}_{a} + p^{\text{inv limit}}_{a} \right)  \cdot v^{\text{is charging}}_{a,k,b_k} \quad \forall a \in \mathcal{A}^{\text{sb}}, \forall k \in \mathcal{K},\forall b_k \in \mathcal{B_k}
\end{aligned}\]</p><p class="math-container">\[\begin{aligned}
\sum_{f \in \mathcal{F}^{\text{in}}_a} v^{\text{flow}}_{f,k,b_k} \leq p^{\text{availability profile}}_{a,k,b_k} \cdot p^{\text{capacity}}_{a} \cdot \left(p^{\text{init units}}_{a} \cdot v^{\text{is charging}}_{a,k,b_k} + v^{\text{inv}}_{a} \right)   \quad \forall a \in \mathcal{A}^{\text{sb}}, \forall k \in \mathcal{K},\forall b_k \in \mathcal{B_k}
\end{aligned}\]</p><h4 id="Lower-Limit-for-Flows-that-are-not-Transport-Assets"><a class="docs-heading-anchor" href="#Lower-Limit-for-Flows-that-are-not-Transport-Assets">Lower Limit for Flows that are not Transport Assets</a><a id="Lower-Limit-for-Flows-that-are-not-Transport-Assets-1"></a><a class="docs-heading-anchor-permalink" href="#Lower-Limit-for-Flows-that-are-not-Transport-Assets" title="Permalink"></a></h4><p class="math-container">\[v^{\text{flow}}_{f,k,b_k} \geq 0 \quad \forall f \notin \mathcal{F}^{\text{t}}, \forall k \in \mathcal{K}, \forall b_k \in \mathcal{B_k}\]</p><h3 id="uc-constraints"><a class="docs-heading-anchor" href="#uc-constraints">Unit Commitment Constraints</a><a id="uc-constraints-1"></a><a class="docs-heading-anchor-permalink" href="#uc-constraints" title="Permalink"></a></h3><p>Production and conversion assets within the set <span>$\mathcal{A}^{\text{uc}}$</span> will contain the unit commitment constraints in the model. These constraints are based on the work of <a href="https://ieeexplore.ieee.org/document/6485014">Morales-España et al. (2013)</a> and <a href="https://ieeexplore.ieee.org/document/6514884">Morales-España et al. (2014)</a>.</p><p>The current version of the code only incorporates a basic unit commitment version of the constraints (i.e., utilizing only the unit commitment variable <span>$v^{\text{units on}}$</span>). However, upcoming versions will include more detailed constraints, incorporating startup and shutdown variables.</p><p>For the unit commitment constraints, we define the following expression for the flow that is above the minimum operating point of the asset:</p><p class="math-container">\[e^{\text{flow above min}}_{a,k,b_k} = \sum_{f \in \mathcal{F}^{\text{out}}_a} v^{\text{flow}}_{f,k,b_k} - p^{\text{availability profile}}_{a,k,b_k} \cdot p^{\text{capacity}}_{a} \cdot p^{\text{min operating point}}_{a} \cdot v^{\text{on}}_{a,k,b_k}  \quad
\\ \\ \forall a \in \mathcal{A}^{\text{uc}}, \forall k \in \mathcal{K},\forall b_k \in \mathcal{B_k}\]</p><h4 id="Limit-to-the-units-on-variable"><a class="docs-heading-anchor" href="#Limit-to-the-units-on-variable">Limit to the units on variable</a><a id="Limit-to-the-units-on-variable-1"></a><a class="docs-heading-anchor-permalink" href="#Limit-to-the-units-on-variable" title="Permalink"></a></h4><p class="math-container">\[v^{\text{on}}_{a,k,b_k} \leq p^{\text{init units}}_{a} + v^{\text{inv}}_{a}  \quad
\\ \\ \forall a \in \mathcal{A}^{\text{uc}}, \forall k \in \mathcal{K},\forall b_k \in \mathcal{B_k}\]</p><h4 id="Maximum-output-flow-above-the-minimum-operating-point"><a class="docs-heading-anchor" href="#Maximum-output-flow-above-the-minimum-operating-point">Maximum output flow above the minimum operating point</a><a id="Maximum-output-flow-above-the-minimum-operating-point-1"></a><a class="docs-heading-anchor-permalink" href="#Maximum-output-flow-above-the-minimum-operating-point" title="Permalink"></a></h4><p class="math-container">\[e^{\text{flow above min}}_{a,k,b_k} \leq p^{\text{availability profile}}_{a,k,b_k} \cdot p^{\text{capacity}}_{a} \cdot \left(1 - p^{\text{min operating point}}_{a} \right) \cdot v^{\text{on}}_{a,k,b_k}  \quad
\\ \\ \forall a \in \mathcal{A}^{\text{uc basic}}, \forall k \in \mathcal{K},\forall b_k \in \mathcal{B_k}\]</p><h4 id="Minimum-output-flow-above-the-minimum-operating-point"><a class="docs-heading-anchor" href="#Minimum-output-flow-above-the-minimum-operating-point">Minimum output flow above the minimum operating point</a><a id="Minimum-output-flow-above-the-minimum-operating-point-1"></a><a class="docs-heading-anchor-permalink" href="#Minimum-output-flow-above-the-minimum-operating-point" title="Permalink"></a></h4><p class="math-container">\[e^{\text{flow above min}}_{a,k,b_k} \geq 0  \quad
\\ \\ \forall a \in \mathcal{A}^{\text{uc basic}}, \forall k \in \mathcal{K},\forall b_k \in \mathcal{B_k}\]</p><h3 id="ramp-constraints"><a class="docs-heading-anchor" href="#ramp-constraints">Ramping Constraints</a><a id="ramp-constraints-1"></a><a class="docs-heading-anchor-permalink" href="#ramp-constraints" title="Permalink"></a></h3><p>Ramping constraints restrict the rate at which the output flow of a production or conversion asset can change. If the asset is part of the unit commitment set (e.g., <span>$\mathcal{A}^{\text{uc}}$</span>), the ramping limits apply to the flow above the minimum output, but if it is not, the ramping limits apply to the total output flow.</p><p>Ramping constraints that take into account unit commitment variables are based on the work done by <a href="https://link.springer.com/article/10.1007/s10107-015-0919-9">Damcı-Kurt et. al (2016)</a>. Also, please note that since the current version of the code only handles the basic unit commitment implementation, the ramping constraints are applied to the assets in the set <span>$\mathcal{A}^{\text{uc basic}}$</span>.</p><blockquote><p><strong>Duration parameter</strong>: The following constraints are multiplied by <span>$p^{\text{duration}}_{b_k}$</span> on the right-hand side to adjust for the duration of the timesteps since the ramp parameters are defined as rates. This assumption is based on the idea that all timesteps are the same in this section, which simplifies the formulation. However, in a flexible temporal resolution context, this may not hold true, and the duration needs to be the minimum duration of all the outgoing flows at the timestep block <span>$b_k$</span>. For more information, please visit the concept section on flexible time resolution.</p></blockquote><h4 id="Maximum-ramp-up-rate-limit-with-unit-commitment-method"><a class="docs-heading-anchor" href="#Maximum-ramp-up-rate-limit-with-unit-commitment-method">Maximum ramp-up rate limit with unit commitment method</a><a id="Maximum-ramp-up-rate-limit-with-unit-commitment-method-1"></a><a class="docs-heading-anchor-permalink" href="#Maximum-ramp-up-rate-limit-with-unit-commitment-method" title="Permalink"></a></h4><p class="math-container">\[e^{\text{flow above min}}_{a,k,b_k} - e^{\text{flow above min}}_{a,k,b_k-1} \leq p^{\text{availability profile}}_{a,k,b_k} \cdot p^{\text{capacity}}_{a} \cdot p^{\text{max ramp up}}_{a} \cdot p^{\text{duration}}_{b_k} \cdot v^{\text{on}}_{a,k,b_k}  \quad
\\ \\ \forall a \in \left(\mathcal{A}^{\text{ramp}} \cap \mathcal{A}^{\text{uc basic}} \right), \forall k \in \mathcal{K},\forall b_k \in \mathcal{B_k}\]</p><h4 id="Maximum-ramp-down-rate-limit-with-unit-commitment-method"><a class="docs-heading-anchor" href="#Maximum-ramp-down-rate-limit-with-unit-commitment-method">Maximum ramp-down rate limit with unit commitment method</a><a id="Maximum-ramp-down-rate-limit-with-unit-commitment-method-1"></a><a class="docs-heading-anchor-permalink" href="#Maximum-ramp-down-rate-limit-with-unit-commitment-method" title="Permalink"></a></h4><p class="math-container">\[e^{\text{flow above min}}_{a,k,b_k} - e^{\text{flow above min}}_{a,k,b_k-1} \geq - p^{\text{availability profile}}_{a,k,b_k} \cdot p^{\text{capacity}}_{a} \cdot p^{\text{max ramp down}}_{a} \cdot p^{\text{duration}}_{b_k} \cdot v^{\text{on}}_{a,k,b_k-1}  \quad
\\ \\ \forall a \in \left(\mathcal{A}^{\text{ramp}} \cap \mathcal{A}^{\text{uc basic}} \right), \forall k \in \mathcal{K},\forall b_k \in \mathcal{B_k}\]</p><h4 id="Maximum-ramp-up-rate-limit-without-unit-commitment-method"><a class="docs-heading-anchor" href="#Maximum-ramp-up-rate-limit-without-unit-commitment-method">Maximum ramp-up rate limit without unit commitment method</a><a id="Maximum-ramp-up-rate-limit-without-unit-commitment-method-1"></a><a class="docs-heading-anchor-permalink" href="#Maximum-ramp-up-rate-limit-without-unit-commitment-method" title="Permalink"></a></h4><p class="math-container">\[\sum_{f \in \mathcal{F}^{\text{out}}_a} v^{\text{flow}}_{f,k,b_k} - \sum_{f \in \mathcal{F}^{\text{out}}_a} v^{\text{flow}}_{f,k,b_k-1} \leq p^{\text{max ramp up}}_{a} \cdot p^{\text{duration}}_{b_k} \cdot p^{\text{availability profile}}_{a,k,b_k} \cdot p^{\text{capacity}}_{a} \cdot \left(p^{\text{init units}}_{a} + v^{\text{inv}}_{a} \right)  \quad
\\ \\ \forall a \in \left(\mathcal{A}^{\text{ramp}} \setminus \mathcal{A}^{\text{uc basic}} \right), \forall k \in \mathcal{K},\forall b_k \in \mathcal{B_k}\]</p><h4 id="Maximum-ramp-down-rate-limit-without-unit-commitment-method"><a class="docs-heading-anchor" href="#Maximum-ramp-down-rate-limit-without-unit-commitment-method">Maximum ramp-down rate limit without unit commitment method</a><a id="Maximum-ramp-down-rate-limit-without-unit-commitment-method-1"></a><a class="docs-heading-anchor-permalink" href="#Maximum-ramp-down-rate-limit-without-unit-commitment-method" title="Permalink"></a></h4><p class="math-container">\[\sum_{f \in \mathcal{F}^{\text{out}}_a} v^{\text{flow}}_{f,k,b_k} - \sum_{f \in \mathcal{F}^{\text{out}}_a} v^{\text{flow}}_{f,k,b_k-1} \geq - p^{\text{max ramp down}}_{a} \cdot p^{\text{duration}}_{b_k} \cdot p^{\text{availability profile}}_{a,k,b_k} \cdot p^{\text{capacity}}_{a} \cdot \left(p^{\text{init units}}_{a} + v^{\text{inv}}_{a} \right)  \quad
\\ \\ \forall a \in \left(\mathcal{A}^{\text{ramp}} \setminus \mathcal{A}^{\text{uc basic}} \right), \forall k \in \mathcal{K},\forall b_k \in \mathcal{B_k}\]</p><h3 id="Constraints-for-Energy-Consumer-Assets"><a class="docs-heading-anchor" href="#Constraints-for-Energy-Consumer-Assets">Constraints for Energy Consumer Assets</a><a id="Constraints-for-Energy-Consumer-Assets-1"></a><a class="docs-heading-anchor-permalink" href="#Constraints-for-Energy-Consumer-Assets" title="Permalink"></a></h3><h4 id="Balance-Constraint-for-Consumers"><a class="docs-heading-anchor" href="#Balance-Constraint-for-Consumers">Balance Constraint for Consumers</a><a id="Balance-Constraint-for-Consumers-1"></a><a class="docs-heading-anchor-permalink" href="#Balance-Constraint-for-Consumers" title="Permalink"></a></h4><p>The balance constraint sense depends on the method selected in the asset file&#39;s parameter <a href="../how-to-use/#schemas"><code>consumer_balance_sense</code></a>. The default value is <span>$=$</span>, but the user can choose <span>$\geq$</span> as an option.</p><p class="math-container">\[\begin{aligned}
\sum_{f \in \mathcal{F}^{\text{in}}_a} v^{\text{flow}}_{f,k,b_k} - \sum_{f \in \mathcal{F}^{\text{out}}_a} v^{\text{flow}}_{f,k,b_k} \left\{\begin{array}{l} = \\ \geq \end{array}\right\} p^{\text{demand profile}}_{a,k,b_k} \cdot p^{\text{peak demand}}_{a} \quad \forall a \in \mathcal{A}^{\text{c}}, \forall k \in \mathcal{K},\forall b_k \in \mathcal{B_k}
\end{aligned}\]</p><h3 id="Constraints-for-Energy-Storage-Assets"><a class="docs-heading-anchor" href="#Constraints-for-Energy-Storage-Assets">Constraints for Energy Storage Assets</a><a id="Constraints-for-Energy-Storage-Assets-1"></a><a class="docs-heading-anchor-permalink" href="#Constraints-for-Energy-Storage-Assets" title="Permalink"></a></h3><p>There are two types of constraints for energy storage assets: intra-temporal and inter-temporal. Intra-temporal constraints impose limits inside a representative period, while inter-temporal constraints combine information from several representative periods (e.g., to model seasonal storage). For more information on this topic, refer to the <a href="../concepts/#storage-modeling">concepts section</a> or <a href="https://ieeexplore.ieee.org/document/8334256">Tejada-Arango et al. (2018)</a> and <a href="https://www.sciencedirect.com/science/article/pii/S0360544219317748">Tejada-Arango et al. (2019)</a>.</p><p>In addition, we define the following expression to determine the energy investment limit of the storage assets. This expression takes two different forms depending on whether the storage asset belongs to the set <span>$\mathcal{A}^{\text{se}}$</span> or not.</p><ul><li>Investment energy method:</li></ul><p class="math-container">\[e^{\text{energy inv limit}}_{a} = p^{\text{energy capacity}}_a \cdot v^{\text{inv energy}}_{a} \quad \forall a \in \mathcal{A}^{\text{i}} \cap \mathcal{A}^{\text{se}}\]</p><ul><li>Fixed energy-to-power ratio method:</li></ul><p class="math-container">\[e^{\text{energy inv limit}}_{a} = p^{\text{energy to power ratio}}_a \cdot p^{\text{capacity}}_a \cdot v^{\text{inv}}_{a} \quad \forall a \in \mathcal{A}^{\text{i}} \cap (\mathcal{A}^{\text{s}} \setminus \mathcal{A}^{\text{se}})\]</p><h4 id="intra-storage-balance"><a class="docs-heading-anchor" href="#intra-storage-balance">Intra-temporal Constraint for Storage Balance</a><a id="intra-storage-balance-1"></a><a class="docs-heading-anchor-permalink" href="#intra-storage-balance" title="Permalink"></a></h4><p class="math-container">\[\begin{aligned}
v^{\text{intra-storage}}_{a,k,b_k} = v^{\text{intra-storage}}_{a,k,b_k-1}  + p^{\text{inflows}}_{a,k,b_k} + \sum_{f \in \mathcal{F}^{\text{in}}_a} p^{\text{eff}}_f \cdot p^{\text{duration}}_{b_k} \cdot v^{\text{flow}}_{f,k,b_k} - \sum_{f \in \mathcal{F}^{\text{out}}_a} \frac{1}{p^{\text{eff}}_f} \cdot p^{\text{duration}}_{b_k} \cdot v^{\text{flow}}_{f,k,b_k} \quad
\\ \\ \forall a \in \mathcal{A}^{\text{s}} \setminus \mathcal{A}^{\text{ss}}, \forall k \in \mathcal{K},\forall b_k \in \mathcal{B_k}
\end{aligned}\]</p><h4 id="Intra-temporal-Constraint-for-Maximum-Storage-Level-Limit"><a class="docs-heading-anchor" href="#Intra-temporal-Constraint-for-Maximum-Storage-Level-Limit">Intra-temporal Constraint for Maximum Storage Level Limit</a><a id="Intra-temporal-Constraint-for-Maximum-Storage-Level-Limit-1"></a><a class="docs-heading-anchor-permalink" href="#Intra-temporal-Constraint-for-Maximum-Storage-Level-Limit" title="Permalink"></a></h4><p class="math-container">\[v^{\text{intra-storage}}_{a,k,b_k} \leq p^{\text{max intra level}}_{a,k,b_k} \cdot (p^{\text{init storage capacity}}_{a} + e^{\text{energy inv limit}}_{a}) \quad \forall a \in \mathcal{A}^{\text{s}} \setminus \mathcal{A}^{\text{ss}}, \forall k \in \mathcal{K},\forall b_k \in \mathcal{B_k}\]</p><h4 id="Intra-temporal-Constraint-for-Minimum-Storage-Level-Limit"><a class="docs-heading-anchor" href="#Intra-temporal-Constraint-for-Minimum-Storage-Level-Limit">Intra-temporal Constraint for Minimum Storage Level Limit</a><a id="Intra-temporal-Constraint-for-Minimum-Storage-Level-Limit-1"></a><a class="docs-heading-anchor-permalink" href="#Intra-temporal-Constraint-for-Minimum-Storage-Level-Limit" title="Permalink"></a></h4><p class="math-container">\[v^{\text{intra-storage}}_{a,k,b_k} \geq p^{\text{min intra level}}_{a,k,b_k} \cdot (p^{\text{init storage capacity}}_{a} + e^{\text{energy inv limit}}_{a}) \quad \forall a \in \mathcal{A}^{\text{s}} \setminus \mathcal{A}^{\text{ss}}, \forall k \in \mathcal{K},\forall b_k \in \mathcal{B_k}\]</p><h4 id="Intra-temporal-Cycling-Constraint"><a class="docs-heading-anchor" href="#Intra-temporal-Cycling-Constraint">Intra-temporal Cycling Constraint</a><a id="Intra-temporal-Cycling-Constraint-1"></a><a class="docs-heading-anchor-permalink" href="#Intra-temporal-Cycling-Constraint" title="Permalink"></a></h4><p>The cycling constraint for the intra-temporal constraints links the first timestep block (<span>$b^{\text{first}}_k$</span>) and the last one (<span>$b^{\text{last}}_k$</span>) in each representative period. The parameter <span>$p^{\text{init storage level}}_{a}$</span> determines the considered equations in the model for this constraint:</p><ul><li>If parameter <span>$p^{\text{init storage level}}_{a}$</span> is not defined, the intra-storage level of the last timestep block (<span>$b^{\text{last}}_k$</span>) is used as the initial value for the first timestep block in the <a href="#intra-storage-balance">intra-temporal constraint for the storage balance</a>.</li></ul><p class="math-container">\[\begin{aligned}
v^{\text{intra-storage}}_{a,k,b^{\text{first}}_k} = v^{\text{intra-storage}}_{a,k,b^{\text{last}}_k}  + p^{\text{inflows}}_{a,k,b^{\text{first}}_k} + \sum_{f \in \mathcal{F}^{\text{in}}_a} p^{\text{eff}}_f \cdot p^{\text{duration}}_{b_k} \cdot v^{\text{flow}}_{f,k,b^{\text{first}}_k} - \sum_{f \in \mathcal{F}^{\text{out}}_a} \frac{1}{p^{\text{eff}}_f} \cdot p^{\text{duration}}_{b_k} \cdot v^{\text{flow}}_{f,k,b^{\text{first}}_k} \quad
\\ \\ \forall a \in \mathcal{A}^{\text{s}} \setminus \mathcal{A}^{\text{ss}}, \forall k \in \mathcal{K}
\end{aligned}\]</p><ul><li>If parameter <span>$p^{\text{init storage level}}_{a}$</span> is defined, we use it as the initial value for the first timestep block in the <a href="#intra-storage-balance">intra-temporal constraint for the storage balance</a>. In addition, the intra-storage level of the last timestep block (<span>$b^{\text{last}}_k$</span>) in each representative period must be greater than this initial value.</li></ul><p class="math-container">\[\begin{aligned}
v^{\text{intra-storage}}_{a,k,b^{\text{first}}_k} = p^{\text{init storage level}}_{a}  + p^{\text{inflows}}_{a,k,b^{\text{first}}_k} + \sum_{f \in \mathcal{F}^{\text{in}}_a} p^{\text{eff}}_f \cdot p^{\text{duration}}_{b_k} \cdot v^{\text{flow}}_{f,k,b^{\text{first}}_k} - \sum_{f \in \mathcal{F}^{\text{out}}_a} \frac{1}{p^{\text{eff}}_f} \cdot p^{\text{duration}}_{b_k} \cdot v^{\text{flow}}_{f,k,b^{\text{first}}_k} \quad
\\ \\ \forall a \in \mathcal{A}^{\text{s}} \setminus \mathcal{A}^{\text{ss}}, \forall k \in \mathcal{K}
\end{aligned}\]</p><p class="math-container">\[v^{\text{intra-storage}}_{a,k,b^{\text{first}}_k} \geq p^{\text{init storage level}}_{a} \quad
\\ \\ \forall a \in \mathcal{A}^{\text{s}} \setminus \mathcal{A}^{\text{ss}}, \forall k \in \mathcal{K}\]</p><h4 id="inter-storage-balance"><a class="docs-heading-anchor" href="#inter-storage-balance">Inter-temporal Constraint for Storage Balance</a><a id="inter-storage-balance-1"></a><a class="docs-heading-anchor-permalink" href="#inter-storage-balance" title="Permalink"></a></h4><p>This constraint allows us to consider the storage seasonality throughout the model&#39;s timeframe (e.g., a year). The parameter <span>$p^{\text{map}}_{p,k}$</span> determines how much of the representative period <span>$k$</span> is in the period <span>$p$</span>, and you can use a clustering technique to calculate it. For <em>TulipaEnergyModel.jl</em>, we recommend using <a href="https://github.com/TulipaEnergy/TulipaClustering.jl"><em>TulipaClustering.jl</em></a> to compute the clusters for the representative periods and their map.</p><p>For the sake of simplicity, we show the constraint assuming the inter-storage level between two consecutive periods <span>$p$</span>; however, <em>TulipaEnergyModel.jl</em> can handle more flexible period block definition through the timeframe definition in the model using the information in the file <a href="../how-to-use/#assets-timeframe-partitions"><code>assets-timeframe-partitions.csv</code></a>.</p><p class="math-container">\[\begin{aligned}
v^{\text{inter-storage}}_{a,p} = &amp; v^{\text{inter-storage}}_{a,p-1} + \sum_{k \in \mathcal{K}} p^{\text{map}}_{p,k} \sum_{b_k \in \mathcal{B_K}} p^{\text{inflows}}_{a,k,b_k} \\
&amp; + \sum_{f \in \mathcal{F}^{\text{in}}_a} p^{\text{eff}}_f \sum_{k \in \mathcal{K}} p^{\text{map}}_{p,k} \sum_{b_k \in \mathcal{B_K}} p^{\text{duration}}_{b_k} \cdot v^{\text{flow}}_{f,k,b_k} \\
&amp; - \sum_{f \in \mathcal{F}^{\text{out}}_a} \frac{1}{p^{\text{eff}}_f} \sum_{k \in \mathcal{K}} p^{\text{map}}_{p,k} \sum_{b_k \in \mathcal{B_K}} p^{\text{duration}}_{b_k} \cdot v^{\text{flow}}_{f,k,b_k}
\\ \\ &amp; \forall a \in \mathcal{A}^{\text{ss}}, \forall p \in \mathcal{P}
\end{aligned}\]</p><h4 id="Inter-temporal-Constraint-for-Maximum-Storage-Level-Limit"><a class="docs-heading-anchor" href="#Inter-temporal-Constraint-for-Maximum-Storage-Level-Limit">Inter-temporal Constraint for Maximum Storage Level Limit</a><a id="Inter-temporal-Constraint-for-Maximum-Storage-Level-Limit-1"></a><a class="docs-heading-anchor-permalink" href="#Inter-temporal-Constraint-for-Maximum-Storage-Level-Limit" title="Permalink"></a></h4><p class="math-container">\[v^{\text{inter-storage}}_{a,p} \leq p^{\text{max inter level}}_{a,p} \cdot (p^{\text{init storage capacity}}_{a} + e^{\text{energy inv limit}}_{a}) \quad \forall a \in \mathcal{A}^{\text{ss}}, \forall p \in \mathcal{P}\]</p><h4 id="Inter-temporal-Constraint-for-Minimum-Storage-Level-Limit"><a class="docs-heading-anchor" href="#Inter-temporal-Constraint-for-Minimum-Storage-Level-Limit">Inter-temporal Constraint for Minimum Storage Level Limit</a><a id="Inter-temporal-Constraint-for-Minimum-Storage-Level-Limit-1"></a><a class="docs-heading-anchor-permalink" href="#Inter-temporal-Constraint-for-Minimum-Storage-Level-Limit" title="Permalink"></a></h4><p class="math-container">\[v^{\text{inter-storage}}_{a,p} \geq p^{\text{min inter level}}_{a,p} \cdot (p^{\text{init storage capacity}}_{a} + e^{\text{energy inv limit}}_{a}) \quad \forall a \in \mathcal{A}^{\text{ss}}, \forall p \in \mathcal{P}\]</p><h4 id="Inter-temporal-Cycling-Constraint"><a class="docs-heading-anchor" href="#Inter-temporal-Cycling-Constraint">Inter-temporal Cycling Constraint</a><a id="Inter-temporal-Cycling-Constraint-1"></a><a class="docs-heading-anchor-permalink" href="#Inter-temporal-Cycling-Constraint" title="Permalink"></a></h4><p>The cycling constraint for the inter-temporal constraints links the first-period block (<span>$p^{\text{first}}$</span>) and the last one (<span>$p^{\text{last}}$</span>) in the timeframe. The parameter <span>$p^{\text{init storage level}}_{a}$</span> determines the considered equations in the model for this constraint:</p><ul><li>If parameter <span>$p^{\text{init storage level}}_{a}$</span> is not defined, the inter-storage level of the last period block (<span>$p^{\text{last}}$</span>) is used as the initial value for the first-period block in the <a href="#inter-storage-balance">inter-temporal constraint for the storage balance</a>.</li></ul><p class="math-container">\[\begin{aligned}
v^{\text{inter-storage}}_{a,p^{\text{first}}} = &amp; v^{\text{inter-storage}}_{a,p^{\text{last}}} + \sum_{k \in \mathcal{K}} p^{\text{map}}_{p^{\text{first}},k} \sum_{b_k \in \mathcal{B_K}} p^{\text{inflows}}_{a,k,b_k} \\
&amp; + \sum_{f \in \mathcal{F}^{\text{in}}_a} p^{\text{eff}}_f \sum_{k \in \mathcal{K}} p^{\text{map}}_{p^{\text{first}},k} \sum_{b_k \in \mathcal{B_K}} p^{\text{duration}}_{b_k} \cdot v^{\text{flow}}_{f,k,b_k} \\
&amp; - \sum_{f \in \mathcal{F}^{\text{out}}_a} \frac{1}{p^{\text{eff}}_f} \sum_{k \in \mathcal{K}} p^{\text{map}}_{p^{\text{first}},k} \sum_{b_k \in \mathcal{B_K}} p^{\text{duration}}_{b_k} \cdot v^{\text{flow}}_{f,k,b_k}
\\ \\ &amp; \forall a \in \mathcal{A}^{\text{ss}}
\end{aligned}\]</p><ul><li>If parameter <span>$p^{\text{init storage level}}_{a}$</span> is defined, we use it as the initial value for the first-period block in the <a href="#inter-storage-balance">inter-temporal constraint for the storage balance</a>. In addition, the inter-storage level of the last period block (<span>$p^{\text{last}}$</span>) in the timeframe must be greater than this initial value.</li></ul><p class="math-container">\[\begin{aligned}
v^{\text{inter-storage}}_{a,p^{\text{first}}} = &amp; p^{\text{init storage level}}_{a} + \sum_{k \in \mathcal{K}} p^{\text{map}}_{p^{\text{first}},k} \sum_{b_k \in \mathcal{B_K}} p^{\text{inflows}}_{a,k,b_k} \\
&amp; + \sum_{f \in \mathcal{F}^{\text{in}}_a} p^{\text{eff}}_f \sum_{k \in \mathcal{K}} p^{\text{map}}_{p^{\text{first}},k} \sum_{b_k \in \mathcal{B_K}} p^{\text{duration}}_{b_k} \cdot v^{\text{flow}}_{f,k,b_k} \\
&amp; - \sum_{f \in \mathcal{F}^{\text{out}}_a} \frac{1}{p^{\text{eff}}_f} \sum_{k \in \mathcal{K}} p^{\text{map}}_{p^{\text{first}},k} \sum_{b_k \in \mathcal{B_K}} p^{\text{duration}}_{b_k} \cdot v^{\text{flow}}_{f,k,b_k}
\\ \\ &amp; \forall a \in \mathcal{A}^{\text{ss}}
\end{aligned}\]</p><p class="math-container">\[v^{\text{inter-storage}}_{a,p^{\text{last}}} \geq p^{\text{init storage level}}_{a} \quad
\\ \\ \forall a \in \mathcal{A}^{\text{ss}}\]</p><h3 id="Constraints-for-Energy-Hub-Assets"><a class="docs-heading-anchor" href="#Constraints-for-Energy-Hub-Assets">Constraints for Energy Hub Assets</a><a id="Constraints-for-Energy-Hub-Assets-1"></a><a class="docs-heading-anchor-permalink" href="#Constraints-for-Energy-Hub-Assets" title="Permalink"></a></h3><h4 id="Balance-Constraint-for-Hubs"><a class="docs-heading-anchor" href="#Balance-Constraint-for-Hubs">Balance Constraint for Hubs</a><a id="Balance-Constraint-for-Hubs-1"></a><a class="docs-heading-anchor-permalink" href="#Balance-Constraint-for-Hubs" title="Permalink"></a></h4><p class="math-container">\[\begin{aligned}
\sum_{f \in \mathcal{F}^{\text{in}}_a} v^{\text{flow}}_{f,k,b_k} = \sum_{f \in \mathcal{F}^{\text{out}}_a} v^{\text{flow}}_{f,k,b_k} \quad \forall a \in \mathcal{A}^{\text{h}}, \forall k \in \mathcal{K},\forall b_k \in \mathcal{B_k}
\end{aligned}\]</p><h3 id="Constraints-for-Energy-Conversion-Assets"><a class="docs-heading-anchor" href="#Constraints-for-Energy-Conversion-Assets">Constraints for Energy Conversion Assets</a><a id="Constraints-for-Energy-Conversion-Assets-1"></a><a class="docs-heading-anchor-permalink" href="#Constraints-for-Energy-Conversion-Assets" title="Permalink"></a></h3><h4 id="Balance-Constraint-for-Conversion-Assets"><a class="docs-heading-anchor" href="#Balance-Constraint-for-Conversion-Assets">Balance Constraint for Conversion Assets</a><a id="Balance-Constraint-for-Conversion-Assets-1"></a><a class="docs-heading-anchor-permalink" href="#Balance-Constraint-for-Conversion-Assets" title="Permalink"></a></h4><p class="math-container">\[\begin{aligned}
\sum_{f \in \mathcal{F}^{\text{in}}_a} p^{\text{eff}}_f \cdot v^{\text{flow}}_{f,k,b_k} = \sum_{f \in \mathcal{F}^{\text{out}}_a} \frac{v^{\text{flow}}_{f,k,b_k}}{p^{\text{eff}}_f} \quad \forall a \in \mathcal{A}^{\text{cv}}, \forall k \in \mathcal{K},\forall b_k \in \mathcal{B_k}
\end{aligned}\]</p><h3 id="Constraints-for-Transport-Assets"><a class="docs-heading-anchor" href="#Constraints-for-Transport-Assets">Constraints for Transport Assets</a><a id="Constraints-for-Transport-Assets-1"></a><a class="docs-heading-anchor-permalink" href="#Constraints-for-Transport-Assets" title="Permalink"></a></h3><h4 id="Maximum-Transport-Flow-Limit"><a class="docs-heading-anchor" href="#Maximum-Transport-Flow-Limit">Maximum Transport Flow Limit</a><a id="Maximum-Transport-Flow-Limit-1"></a><a class="docs-heading-anchor-permalink" href="#Maximum-Transport-Flow-Limit" title="Permalink"></a></h4><p class="math-container">\[\begin{aligned}
v^{\text{flow}}_{f,k,b_k} \leq p^{\text{availability profile}}_{f,k,b_k} \cdot \left(p^{\text{init export capacity}}_{f} + p^{\text{capacity}}_{f} \cdot v^{\text{inv}}_{f} \right)  \quad \forall f \in \mathcal{F}^{\text{t}}, \forall k \in \mathcal{K},\forall b_k \in \mathcal{B_k}
\end{aligned}\]</p><h4 id="Minimum-Transport-Flow-Limit"><a class="docs-heading-anchor" href="#Minimum-Transport-Flow-Limit">Minimum Transport Flow Limit</a><a id="Minimum-Transport-Flow-Limit-1"></a><a class="docs-heading-anchor-permalink" href="#Minimum-Transport-Flow-Limit" title="Permalink"></a></h4><p class="math-container">\[\begin{aligned}
v^{\text{flow}}_{f,k,b_k} \geq - p^{\text{availability profile}}_{f,k,b_k} \cdot \left(p^{\text{init import capacity}}_{f} + p^{\text{capacity}}_{f} \cdot v^{\text{inv}}_{f} \right)  \quad \forall f \in \mathcal{F}^{\text{t}}, \forall k \in \mathcal{K},\forall b_k \in \mathcal{B_k}
\end{aligned}\]</p><h3 id="Constraints-for-Investments"><a class="docs-heading-anchor" href="#Constraints-for-Investments">Constraints for Investments</a><a id="Constraints-for-Investments-1"></a><a class="docs-heading-anchor-permalink" href="#Constraints-for-Investments" title="Permalink"></a></h3><h4 id="Maximum-Investment-Limit-for-Assets"><a class="docs-heading-anchor" href="#Maximum-Investment-Limit-for-Assets">Maximum Investment Limit for Assets</a><a id="Maximum-Investment-Limit-for-Assets-1"></a><a class="docs-heading-anchor-permalink" href="#Maximum-Investment-Limit-for-Assets" title="Permalink"></a></h4><p class="math-container">\[v^{\text{inv}}_{a} \leq \frac{p^{\text{inv limit}}_{a}}{p^{\text{capacity}}_{a}} \quad \forall a \in \mathcal{A}^{\text{i}}\]</p><p>If the parameter <code>investment_integer</code> in the <a href="../how-to-use/#assets-data"><code>assets-data.csv</code></a> file is set to true, then the right-hand side of this constraint uses a least integer function (floor function) to guarantee that the limit is integer.</p><h4 id="Maximum-Energy-Investment-Limit-for-Assets"><a class="docs-heading-anchor" href="#Maximum-Energy-Investment-Limit-for-Assets">Maximum Energy Investment Limit for Assets</a><a id="Maximum-Energy-Investment-Limit-for-Assets-1"></a><a class="docs-heading-anchor-permalink" href="#Maximum-Energy-Investment-Limit-for-Assets" title="Permalink"></a></h4><p class="math-container">\[v^{\text{inv energy}}_{a} \leq \frac{p^{\text{inv limit energy}}_{a}}{p^{\text{energy capacity}}_{a}} \quad \forall a \in \mathcal{A}^{\text{i}} \cap \mathcal{A}^{\text{se}}\]</p><p>If the parameter <code>investment_integer_storage_energy</code> in the <a href="../how-to-use/#assets-data"><code>assets-data.csv</code></a> file is set to true, then the right-hand side of this constraint uses a least integer function (floor function) to guarantee that the limit is integer.</p><h4 id="Maximum-Investment-Limit-for-Flows"><a class="docs-heading-anchor" href="#Maximum-Investment-Limit-for-Flows">Maximum Investment Limit for Flows</a><a id="Maximum-Investment-Limit-for-Flows-1"></a><a class="docs-heading-anchor-permalink" href="#Maximum-Investment-Limit-for-Flows" title="Permalink"></a></h4><p class="math-container">\[v^{\text{inv}}_{f} \leq \frac{p^{\text{inv limit}}_{f}}{p^{\text{capacity}}_{f}} \quad \forall f \in \mathcal{F}^{\text{ti}}\]</p><p>If the parameter <code>investment_integer</code> in the <a href="../how-to-use/#flows-data"><code>flows-data.csv</code></a> file is set to true, then the right-hand side of this constraint uses a least integer function (floor function) to guarantee that the limit is integer.</p><h3 id="inter-temporal-energy-constraints"><a class="docs-heading-anchor" href="#inter-temporal-energy-constraints">Inter-temporal Energy Constraints</a><a id="inter-temporal-energy-constraints-1"></a><a class="docs-heading-anchor-permalink" href="#inter-temporal-energy-constraints" title="Permalink"></a></h3><p>These constraints allow us to consider a maximum or minimum energy limit for an asset throughout the model&#39;s timeframe (e.g., a year). It uses the same principle explained in the <a href="#inter-storage-balance">inter-temporal constraint for storage balance</a> and in the <a href="../concepts/#storage-modeling">Storage Modeling</a> section.</p><h4 id="Maximum-Outgoing-Energy-During-the-Timeframe"><a class="docs-heading-anchor" href="#Maximum-Outgoing-Energy-During-the-Timeframe">Maximum Outgoing Energy During the Timeframe</a><a id="Maximum-Outgoing-Energy-During-the-Timeframe-1"></a><a class="docs-heading-anchor-permalink" href="#Maximum-Outgoing-Energy-During-the-Timeframe" title="Permalink"></a></h4><p class="math-container">\[\begin{aligned}
\sum_{f \in \mathcal{F}^{\text{out}}_a} \sum_{k \in \mathcal{K}} p^{\text{map}}_{p,k} \sum_{b_k \in \mathcal{B_K}} p^{\text{duration}}_{b_k} \cdot v^{\text{flow}}_{f,k,b_k} \leq  p^{\text{max inter profile}}_{a,p} \cdot p^{\text{max energy}}_{a}
\\ \\ &amp; \forall a \in \mathcal{A}^{\text{max e}}, \forall p \in \mathcal{P}
\end{aligned}\]</p><h4 id="Minimum-Outgoing-Energy-During-the-Timeframe"><a class="docs-heading-anchor" href="#Minimum-Outgoing-Energy-During-the-Timeframe">Minimum Outgoing Energy During the Timeframe</a><a id="Minimum-Outgoing-Energy-During-the-Timeframe-1"></a><a class="docs-heading-anchor-permalink" href="#Minimum-Outgoing-Energy-During-the-Timeframe" title="Permalink"></a></h4><p class="math-container">\[\begin{aligned}
\sum_{f \in \mathcal{F}^{\text{out}}_a} \sum_{k \in \mathcal{K}} p^{\text{map}}_{p,k} \sum_{b_k \in \mathcal{B_K}} p^{\text{duration}}_{b_k} \cdot v^{\text{flow}}_{f,k,b_k} \geq  p^{\text{min inter profile}}_{a,p} \cdot p^{\text{min energy}}_{a}
\\ \\ &amp; \forall a \in \mathcal{A}^{\text{min e}}, \forall p \in \mathcal{P}
\end{aligned}\]</p><h3 id="group-constraints"><a class="docs-heading-anchor" href="#group-constraints">Constraints for Groups</a><a id="group-constraints-1"></a><a class="docs-heading-anchor-permalink" href="#group-constraints" title="Permalink"></a></h3><p>The following constraints aggregate variables of different assets depending on the method that applies to the group.</p><h4 id="investment-group-constraints"><a class="docs-heading-anchor" href="#investment-group-constraints">Investment Limits of a Group</a><a id="investment-group-constraints-1"></a><a class="docs-heading-anchor-permalink" href="#investment-group-constraints" title="Permalink"></a></h4><p>These constraints apply to assets in a group using the investment method <span>$\mathcal{G}^{\text{ai}}$</span>. They help impose an investment potential of a spatial area commonly shared by several assets that can be invested there.</p><blockquote><p><strong>Note</strong>: These constraints are applied to the investments each year. The model does not yet have investment limits to a group&#39;s accumulated invested capacity.</p></blockquote><h5 id="Minimum-Investment-Limit-of-a-Group"><a class="docs-heading-anchor" href="#Minimum-Investment-Limit-of-a-Group">Minimum Investment Limit of a Group</a><a id="Minimum-Investment-Limit-of-a-Group-1"></a><a class="docs-heading-anchor-permalink" href="#Minimum-Investment-Limit-of-a-Group" title="Permalink"></a></h5><p class="math-container">\[\begin{aligned}
\sum_{a \in \mathcal{A}^{\text{i}} | p^{\text{group}}_{a} = g} p^{\text{capacity}}_{a} \cdot v^{\text{inv}}_{a} \geq  p^{\text{min invest limit}}_{g}
\\ \\ &amp; \forall g \in \mathcal{G}^{\text{ai}}
\end{aligned}\]</p><h5 id="Maximum-Investment-Limit-of-a-Group"><a class="docs-heading-anchor" href="#Maximum-Investment-Limit-of-a-Group">Maximum Investment Limit of a Group</a><a id="Maximum-Investment-Limit-of-a-Group-1"></a><a class="docs-heading-anchor-permalink" href="#Maximum-Investment-Limit-of-a-Group" title="Permalink"></a></h5><p class="math-container">\[\begin{aligned}
\sum_{a \in \mathcal{A}^{\text{i}} | p^{\text{group}}_{a} = g} p^{\text{capacity}}_{a} \cdot v^{\text{inv}}_{a} \leq  p^{\text{max invest limit}}_{g}
\\ \\ &amp; \forall g \in \mathcal{G}^{\text{ai}}
\end{aligned}\]</p><h2 id="math-references"><a class="docs-heading-anchor" href="#math-references">References</a><a id="math-references-1"></a><a class="docs-heading-anchor-permalink" href="#math-references" title="Permalink"></a></h2><p>Damcı-Kurt, P., Küçükyavuz, S., Rajan, D., Atamtürk, A., 2016. A polyhedral study of production ramping. Math. Program. 158, 175–205. doi: 10.1007/s10107-015-0919-9.</p><p>Morales-España, G., Ramos, A., García-González, J., 2014. An MIP Formulation for Joint Market-Clearing of Energy and Reserves Based on Ramp Scheduling. IEEE Transactions on Power Systems 29, 476-488. doi: 10.1109/TPWRS.2013.2259601.</p><p>Morales-España, G., Latorre, J. M., Ramos, A., 2013. Tight and Compact MILP Formulation for the Thermal Unit Commitment Problem. IEEE Transactions on Power Systems 28, 4897-4908. doi: 10.1109/TPWRS.2013.2251373.</p><p>Tejada-Arango, D.A., Domeshek, M., Wogrin, S., Centeno, E., 2018. Enhanced representative days and system states modeling for energy storage investment analysis. IEEE Transactions on Power Systems 33, 6534–6544. doi:10.1109/TPWRS.2018.2819578.</p><p>Tejada-Arango, D.A., Wogrin, S., Siddiqui, A.S., Centeno, E., 2019. Opportunity cost including short-term energy storage in hydrothermal dispatch models using a linked representative periods approach. Energy 188, 116079. doi:10.1016/j.energy.2019.116079.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../concepts/">« Concepts</a><a class="docs-footer-nextpage" href="../api/">API »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.7.0 on <span class="colophon-date" title="Monday 30 September 2024 09:29">Monday 30 September 2024</span>. Using Julia version 1.10.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
