<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Mathematical Formulation · TulipaEnergyModel.jl</title><meta name="title" content="Mathematical Formulation · TulipaEnergyModel.jl"/><meta property="og:title" content="Mathematical Formulation · TulipaEnergyModel.jl"/><meta property="twitter:title" content="Mathematical Formulation · TulipaEnergyModel.jl"/><meta name="description" content="Documentation for TulipaEnergyModel.jl."/><meta property="og:description" content="Documentation for TulipaEnergyModel.jl."/><meta property="twitter:description" content="Documentation for TulipaEnergyModel.jl."/><meta property="og:url" content="https://TulipaEnergy.github.io/TulipaEnergyModel.jl/formulation/"/><meta property="twitter:url" content="https://TulipaEnergy.github.io/TulipaEnergyModel.jl/formulation/"/><link rel="canonical" href="https://TulipaEnergy.github.io/TulipaEnergyModel.jl/formulation/"/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script><link href="../assets/style.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.png" alt="TulipaEnergyModel.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../">TulipaEnergyModel.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../how-to-use/">How to Use</a></li><li><a class="tocitem" href="../tutorials/">Tutorials</a></li><li><a class="tocitem" href="../concepts/">Concepts</a></li><li class="is-active"><a class="tocitem" href>Mathematical Formulation</a><ul class="internal"><li><a class="tocitem" href="#math-sets"><span>Sets</span></a></li><li><a class="tocitem" href="#math-parameters"><span>Parameters</span></a></li><li><a class="tocitem" href="#math-variables"><span>Variables</span></a></li><li><a class="tocitem" href="#math-objective-function"><span>Objective Function</span></a></li><li><a class="tocitem" href="#math-constraints"><span>Constraints</span></a></li><li><a class="tocitem" href="#math-references"><span>References</span></a></li></ul></li><li><a class="tocitem" href="../api/">API</a></li><li><a class="tocitem" href="../reference/">Reference</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Mathematical Formulation</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Mathematical Formulation</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/TulipaEnergy/TulipaEnergyModel.jl.git" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="formulation"><a class="docs-heading-anchor" href="#formulation">Mathematical Formulation</a><a id="formulation-1"></a><a class="docs-heading-anchor-permalink" href="#formulation" title="Permalink"></a></h1><p>This section shows the mathematical formulation of <em>TulipaEnergyModel.jl</em>, assuming that the temporal definition of timesteps is the same for all the elements in the model.<br/>The complete mathematical formulation, including variable temporal resolutions, is also freely available in the <a href="https://arxiv.org/pdf/2309.07711.pdf">preprint</a>. In addition, the <a href="../concepts/#concepts">concepts section</a> also shows how the model handles the <a href="../concepts/#flex-time-res"><code>flexible time resolution</code></a>.</p><h2 id="math-sets"><a class="docs-heading-anchor" href="#math-sets">Sets</a><a id="math-sets-1"></a><a class="docs-heading-anchor-permalink" href="#math-sets" title="Permalink"></a></h2><h3 id="Sets-for-Assets"><a class="docs-heading-anchor" href="#Sets-for-Assets">Sets for Assets</a><a id="Sets-for-Assets-1"></a><a class="docs-heading-anchor-permalink" href="#Sets-for-Assets" title="Permalink"></a></h3><table><tr><th style="text-align: right">Name</th><th style="text-align: right">Description</th><th style="text-align: right">Elements</th><th style="text-align: right">Superset</th><th style="text-align: right">Notes</th></tr><tr><td style="text-align: right"><span>$\mathcal{A}$</span></td><td style="text-align: right">Energy assets</td><td style="text-align: right"><span>$a \in \mathcal{A}$</span></td><td style="text-align: right"></td><td style="text-align: right">The Energy asset types (i.e., consumer, producer, storage, hub, and conversion) are mutually exclusive</td></tr><tr><td style="text-align: right"><span>$\mathcal{A}^{\text{c}}$</span></td><td style="text-align: right">Consumer energy assets</td><td style="text-align: right"></td><td style="text-align: right"><span>$\mathcal{A}^{\text{c}}  \subseteq \mathcal{A}$</span></td><td style="text-align: right"></td></tr><tr><td style="text-align: right"><span>$\mathcal{A}^{\text{p}}$</span></td><td style="text-align: right">Producer energy assets</td><td style="text-align: right"></td><td style="text-align: right"><span>$\mathcal{A}^{\text{p}}  \subseteq \mathcal{A}$</span></td><td style="text-align: right"></td></tr><tr><td style="text-align: right"><span>$\mathcal{A}^{\text{s}}$</span></td><td style="text-align: right">Storage energy assets</td><td style="text-align: right"></td><td style="text-align: right"><span>$\mathcal{A}^{\text{s}}  \subseteq \mathcal{A}$</span></td><td style="text-align: right"></td></tr><tr><td style="text-align: right"><span>$\mathcal{A}^{\text{h}}$</span></td><td style="text-align: right">Hub energy assets (e.g., transshipment)</td><td style="text-align: right"></td><td style="text-align: right"><span>$\mathcal{A}^{\text{h}}  \subseteq \mathcal{A}$</span></td><td style="text-align: right"></td></tr><tr><td style="text-align: right"><span>$\mathcal{A}^{\text{cv}}$</span></td><td style="text-align: right">Conversion energy assets</td><td style="text-align: right"></td><td style="text-align: right"><span>$\mathcal{A}^{\text{cv}} \subseteq \mathcal{A}$</span></td><td style="text-align: right"></td></tr></table><p>In addition, the following asset sets represent methods for incorporating additional variables and constraints in the model.</p><table><tr><th style="text-align: right">Name</th><th style="text-align: right">Description</th><th style="text-align: right">Elements</th><th style="text-align: right">Superset</th><th style="text-align: right">Notes</th></tr><tr><td style="text-align: right"><span>$\mathcal{A}^{\text{i}}$</span></td><td style="text-align: right">Energy assets with investment method</td><td style="text-align: right"></td><td style="text-align: right"><span>$\mathcal{A}^{\text{i}}  \subseteq \mathcal{A}$</span></td><td style="text-align: right"></td></tr><tr><td style="text-align: right"><span>$\mathcal{A}^{\text{ss}}$</span></td><td style="text-align: right">Storage energy assets with seasonal method</td><td style="text-align: right"></td><td style="text-align: right"><span>$\mathcal{A}^{\text{ss}} \subseteq \mathcal{A}^{\text{s}}$</span></td><td style="text-align: right"></td></tr></table><h3 id="Sets-for-Flows"><a class="docs-heading-anchor" href="#Sets-for-Flows">Sets for Flows</a><a id="Sets-for-Flows-1"></a><a class="docs-heading-anchor-permalink" href="#Sets-for-Flows" title="Permalink"></a></h3><table><tr><th style="text-align: right">Name</th><th style="text-align: right">Description</th><th style="text-align: right">Elements</th><th style="text-align: right">Superset</th><th style="text-align: right">Notes</th></tr><tr><td style="text-align: right"><span>$\mathcal{F}$</span></td><td style="text-align: right">Flow connections between two assets</td><td style="text-align: right"><span>$f \in \mathcal{F}$</span></td><td style="text-align: right"></td><td style="text-align: right"></td></tr><tr><td style="text-align: right"><span>$\mathcal{F}^{\text{in}}_a$</span></td><td style="text-align: right">Set of flows going into asset <span>$a$</span></td><td style="text-align: right"></td><td style="text-align: right"><span>$\mathcal{F}^{\text{in}}_a  \subseteq \mathcal{F}$</span></td><td style="text-align: right"></td></tr><tr><td style="text-align: right"><span>$\mathcal{F}^{\text{out}}_a$</span></td><td style="text-align: right">Set of flows going out of asset <span>$a$</span></td><td style="text-align: right"></td><td style="text-align: right"><span>$\mathcal{F}^{\text{out}}_a \subseteq \mathcal{F}$</span></td><td style="text-align: right"></td></tr></table><p>In addition, the following flow sets represent methods for incorporating additional variables and constraints in the model.</p><table><tr><th style="text-align: right">Name</th><th style="text-align: right">Description</th><th style="text-align: right">Elements</th><th style="text-align: right">Superset</th><th style="text-align: right">Notes</th></tr><tr><td style="text-align: right"><span>$\mathcal{F}^{\text{t}}$</span></td><td style="text-align: right">Flow between two assets with a transport method</td><td style="text-align: right"></td><td style="text-align: right"><span>$\mathcal{F}^{\text{t}} \subseteq \mathcal{F}$</span></td><td style="text-align: right"></td></tr><tr><td style="text-align: right"><span>$\mathcal{F}^{\text{ti}}$</span></td><td style="text-align: right">Transport flow with investment method</td><td style="text-align: right"></td><td style="text-align: right"><span>$\mathcal{F}^{\text{ti}} \subseteq \mathcal{F}^{\text{t}}$</span></td><td style="text-align: right"></td></tr></table><h3 id="Sets-for-Temporal-Structures"><a class="docs-heading-anchor" href="#Sets-for-Temporal-Structures">Sets for Temporal Structures</a><a id="Sets-for-Temporal-Structures-1"></a><a class="docs-heading-anchor-permalink" href="#Sets-for-Temporal-Structures" title="Permalink"></a></h3><table><tr><th style="text-align: right">Name</th><th style="text-align: right">Description</th><th style="text-align: right">Elements</th><th style="text-align: right">Superset</th><th style="text-align: right">Notes</th></tr><tr><td style="text-align: right"><span>$\mathcal{P}$</span></td><td style="text-align: right">Periods in the timeframe</td><td style="text-align: right"><span>$p \in \mathcal{P}$</span></td><td style="text-align: right"><span>$\mathcal{P} \subset \mathbb{N}$</span></td><td style="text-align: right"></td></tr><tr><td style="text-align: right"><span>$\mathcal{K}$</span></td><td style="text-align: right">Representative periods (rp)</td><td style="text-align: right"><span>$k \in \mathcal{K}$</span></td><td style="text-align: right"><span>$\mathcal{K} \subset \mathbb{N}$</span></td><td style="text-align: right"><span>$\mathcal{K}$</span> does not have to be a subset of <span>$\mathcal{P}$</span></td></tr><tr><td style="text-align: right"><span>$\mathcal{B}_{k}$</span></td><td style="text-align: right">Timesteps blocks within a representative period <span>$k$</span></td><td style="text-align: right"><span>$b_{k} \in \mathcal{B}_k$</span></td><td style="text-align: right"></td><td style="text-align: right"><span>$\mathcal{B}_k$</span> is a partition of timesteps in a representative period <span>$k$</span></td></tr></table><h2 id="math-parameters"><a class="docs-heading-anchor" href="#math-parameters">Parameters</a><a id="math-parameters-1"></a><a class="docs-heading-anchor-permalink" href="#math-parameters" title="Permalink"></a></h2><h3 id="Parameter-for-Assets"><a class="docs-heading-anchor" href="#Parameter-for-Assets">Parameter for Assets</a><a id="Parameter-for-Assets-1"></a><a class="docs-heading-anchor-permalink" href="#Parameter-for-Assets" title="Permalink"></a></h3><table><tr><th style="text-align: right">Name</th><th style="text-align: right">Domain</th><th style="text-align: right">Domains of Indices</th><th style="text-align: right">Description</th><th style="text-align: right">Units</th></tr><tr><td style="text-align: right"><span>$p^{\text{inv cost}}_{a}$</span></td><td style="text-align: right"><span>$\mathbb{R}_{+}$</span></td><td style="text-align: right"><span>$a \in \mathcal{A}$</span></td><td style="text-align: right">Investment cost of a unit of asset <span>$a$</span></td><td style="text-align: right">[kEUR/MW/year]</td></tr><tr><td style="text-align: right"><span>$p^{\text{inv limit}}_{a}$</span></td><td style="text-align: right"><span>$\mathbb{R}_{+}$</span></td><td style="text-align: right"><span>$a \in \mathcal{A}$</span></td><td style="text-align: right">Investment potential of asset <span>$a$</span></td><td style="text-align: right">[MW]</td></tr><tr><td style="text-align: right"><span>$p^{\text{capacity}}_{a}$</span></td><td style="text-align: right"><span>$\mathbb{R}_{+}$</span></td><td style="text-align: right"><span>$a \in \mathcal{A}$</span></td><td style="text-align: right">Capacity per unit of asset <span>$a$</span></td><td style="text-align: right">[MW]</td></tr><tr><td style="text-align: right"><span>$p^{\text{init capacity}}_{a}$</span></td><td style="text-align: right"><span>$\mathbb{R}_{+}$</span></td><td style="text-align: right"><span>$a \in \mathcal{A}$</span></td><td style="text-align: right">Initial capacity of asset <span>$a$</span></td><td style="text-align: right">[MW]</td></tr><tr><td style="text-align: right"><span>$p^{\text{peak demand}}_{a}$</span></td><td style="text-align: right"><span>$\mathbb{R}_{+}$</span></td><td style="text-align: right"><span>$a \in \mathcal{A}^{\text{c}}$</span></td><td style="text-align: right">Peak demand of consumer asset <span>$a$</span></td><td style="text-align: right">[MW]</td></tr><tr><td style="text-align: right"><span>$p^{\text{energy to power ratio}}_a$</span></td><td style="text-align: right"><span>$\mathbb{R}_{+}$</span></td><td style="text-align: right"><span>$a \in \mathcal{A}^{\text{s}}$</span></td><td style="text-align: right">Energy to power ratio of storage asset <span>$a$</span></td><td style="text-align: right">[h]</td></tr><tr><td style="text-align: right"><span>$p^{\text{init storage capacity}}_{a}$</span></td><td style="text-align: right"><span>$\mathbb{R}_{+}$</span></td><td style="text-align: right"><span>$a \in \mathcal{A}^{\text{s}}$</span></td><td style="text-align: right">Initial storage capacity of storage asset <span>$a$</span></td><td style="text-align: right">[MWh]</td></tr><tr><td style="text-align: right"><span>$p^{\text{init storage level}}_{a}$</span></td><td style="text-align: right"><span>$\mathbb{R}_{+}$</span></td><td style="text-align: right"><span>$a \in \mathcal{A}^{\text{s}}$</span></td><td style="text-align: right">Initial storage level of storage asset <span>$a$</span></td><td style="text-align: right">[MWh]</td></tr><tr><td style="text-align: right"><span>$p^{\text{availability profile}}_{a,k,b_k}$</span></td><td style="text-align: right"><span>$\mathbb{R}_{+}$</span></td><td style="text-align: right"><span>$a \in \mathcal{A}$</span>, <span>$k \in \mathcal{K}$</span>, <span>$b_k \in \mathcal{B_k}$</span></td><td style="text-align: right">Availability profile of asset <span>$a$</span> in the representative period <span>$k$</span> and timestep block <span>$b_k$</span></td><td style="text-align: right">[p.u.]</td></tr><tr><td style="text-align: right"><span>$p^{\text{demand profile}}_{a,k,b_k}$</span></td><td style="text-align: right"><span>$\mathbb{R}_{+}$</span></td><td style="text-align: right"><span>$a \in \mathcal{A^{\text{c}}}$</span>, <span>$k \in \mathcal{K}$</span>, <span>$b_k \in \mathcal{B_k}$</span></td><td style="text-align: right">Demand profile of consumer asset <span>$a$</span> in the representative period <span>$k$</span> and timestep block <span>$b_k$</span></td><td style="text-align: right">[p.u.]</td></tr><tr><td style="text-align: right"><span>$p^{\text{inflows}}_{a,k,b_k}$</span></td><td style="text-align: right"><span>$\mathbb{R}_{+}$</span></td><td style="text-align: right"><span>$a \in \mathcal{A^{\text{s}}}$</span>, <span>$k \in \mathcal{K}$</span>, <span>$b_k \in \mathcal{B_k}$</span></td><td style="text-align: right">Inflows of storage asset <span>$a$</span> in the representative period <span>$k$</span> and timestep block <span>$b_k$</span></td><td style="text-align: right">[MWh]</td></tr><tr><td style="text-align: right"><span>$p^{\text{max intra level}}_{a,k,b_k}$</span></td><td style="text-align: right"><span>$\mathbb{R}_{+}$</span></td><td style="text-align: right"><span>$a \in \mathcal{A^{\text{s}}}$</span>, <span>$k \in \mathcal{K}$</span>, <span>$b_k \in \mathcal{B_k}$</span></td><td style="text-align: right">Maximum intra-storage level profile of storage asset <span>$a$</span> in representative period <span>$k$</span> and timestep block <span>$b_k$</span></td><td style="text-align: right">[p.u.]</td></tr><tr><td style="text-align: right"><span>$p^{\text{min intra level}}_{a,k,b_k}$</span></td><td style="text-align: right"><span>$\mathbb{R}_{+}$</span></td><td style="text-align: right"><span>$a \in \mathcal{A^{\text{s}}}$</span>, <span>$k \in \mathcal{K}$</span>, <span>$b_k \in \mathcal{B_k}$</span></td><td style="text-align: right">Minimum intra-storage level profile of storage asset <span>$a$</span> in representative period <span>$k$</span> and timestep block <span>$b_k$</span></td><td style="text-align: right">[p.u.]</td></tr><tr><td style="text-align: right"><span>$p^{\text{max inter level}}_{a,p}$</span></td><td style="text-align: right"><span>$\mathbb{R}_{+}$</span></td><td style="text-align: right"><span>$a \in \mathcal{A^{\text{s}}}$</span>, <span>$p \in \mathcal{P}$</span></td><td style="text-align: right">Maximum inter-storage level profile of storage asset <span>$a$</span> in the period <span>$p$</span> of the timeframe</td><td style="text-align: right">[p.u.]</td></tr><tr><td style="text-align: right"><span>$p^{\text{min inter level}}_{a,p}$</span></td><td style="text-align: right"><span>$\mathbb{R}_{+}$</span></td><td style="text-align: right"><span>$a \in \mathcal{A^{\text{s}}}$</span>, <span>$p \in \mathcal{P}$</span></td><td style="text-align: right">Minimum inter-storage level profile of storage asset <span>$a$</span> in the period <span>$p$</span> of the timeframe</td><td style="text-align: right">[p.u.]</td></tr></table><h3 id="Parameter-for-Flows"><a class="docs-heading-anchor" href="#Parameter-for-Flows">Parameter for Flows</a><a id="Parameter-for-Flows-1"></a><a class="docs-heading-anchor-permalink" href="#Parameter-for-Flows" title="Permalink"></a></h3><table><tr><th style="text-align: right">Name</th><th style="text-align: right">Domain</th><th style="text-align: right">Domains of Indices</th><th style="text-align: right">Description</th><th style="text-align: right">Units</th></tr><tr><td style="text-align: right"><span>$p^{\text{variable cost}}_{f}$</span></td><td style="text-align: right"><span>$\mathbb{R}_{+}$</span></td><td style="text-align: right"><span>$f \in \mathcal{F}$</span></td><td style="text-align: right">Variable cost of flow <span>$f$</span></td><td style="text-align: right">[kEUR/MWh]</td></tr><tr><td style="text-align: right"><span>$p^{\text{eff}}_f$</span></td><td style="text-align: right"><span>$\mathbb{R}_{+}$</span></td><td style="text-align: right"><span>$f \in \mathcal{F}$</span></td><td style="text-align: right">Efficiency of flow <span>$f$</span></td><td style="text-align: right">[p.u.]</td></tr><tr><td style="text-align: right"><span>$p^{\text{inv cost}}_{f}$</span></td><td style="text-align: right"><span>$\mathbb{R}_{+}$</span></td><td style="text-align: right"><span>$f \in \mathcal{F}^{\text{t}}$</span></td><td style="text-align: right">Investment cost of transport flow <span>$f$</span></td><td style="text-align: right">[kEUR/MW/year]</td></tr><tr><td style="text-align: right"><span>$p^{\text{inv limit}}_{f}$</span></td><td style="text-align: right"><span>$\mathbb{R}_{+}$</span></td><td style="text-align: right"><span>$f \in \mathcal{F}^{\text{t}}$</span></td><td style="text-align: right">Investment potential of flow <span>$f$</span></td><td style="text-align: right">[MW]</td></tr><tr><td style="text-align: right"><span>$p^{\text{capacity}}_{f}$</span></td><td style="text-align: right"><span>$\mathbb{R}_{+}$</span></td><td style="text-align: right"><span>$f \in \mathcal{F}^{\text{t}}$</span></td><td style="text-align: right">Capacity per unit of investment of transport flow <span>$f$</span> (both exports and imports)</td><td style="text-align: right">[MW]</td></tr><tr><td style="text-align: right"><span>$p^{\text{init export capacity}}_{f}$</span></td><td style="text-align: right"><span>$\mathbb{R}_{+}$</span></td><td style="text-align: right"><span>$f \in \mathcal{F}^{\text{t}}$</span></td><td style="text-align: right">Initial export capacity of transport flow <span>$f$</span></td><td style="text-align: right">[MW]</td></tr><tr><td style="text-align: right"><span>$p^{\text{init import capacity}}_{f}$</span></td><td style="text-align: right"><span>$\mathbb{R}_{+}$</span></td><td style="text-align: right"><span>$f \in \mathcal{F}^{\text{t}}$</span></td><td style="text-align: right">Initial import capacity of transport flow <span>$f$</span></td><td style="text-align: right">[MW]</td></tr><tr><td style="text-align: right"><span>$p^{\text{availability profile}}_{f,k,b_k}$</span></td><td style="text-align: right"><span>$\mathbb{R}_{+}$</span></td><td style="text-align: right"><span>$a \in \mathcal{F}$</span>, <span>$k \in \mathcal{K}$</span>, <span>$b_k \in \mathcal{B_k}$</span></td><td style="text-align: right">Availability profile of flow <span>$f$</span> in the representative period <span>$k$</span> and timestep block <span>$b_k$</span></td><td style="text-align: right">[p.u.]</td></tr></table><h3 id="Parameter-for-Temporal-Structures"><a class="docs-heading-anchor" href="#Parameter-for-Temporal-Structures">Parameter for Temporal Structures</a><a id="Parameter-for-Temporal-Structures-1"></a><a class="docs-heading-anchor-permalink" href="#Parameter-for-Temporal-Structures" title="Permalink"></a></h3><table><tr><th style="text-align: right">Name</th><th style="text-align: right">Domain</th><th style="text-align: right">Domains of Indices</th><th style="text-align: right">Description</th><th style="text-align: right">Units</th></tr><tr><td style="text-align: right"><span>$p^{\text{duration}}_{b_k}$</span></td><td style="text-align: right"><span>$\mathbb{R}_{+}$</span></td><td style="text-align: right"><span>$b_k \in \mathcal{B_k}$</span></td><td style="text-align: right">Duration of the timestep blocks <span>$b_k$</span></td><td style="text-align: right">[h]</td></tr><tr><td style="text-align: right"><span>$p^{\text{rp weight}}_{k}$</span></td><td style="text-align: right"><span>$\mathbb{R}_{+}$</span></td><td style="text-align: right"><span>$k \in \mathcal{K}$</span></td><td style="text-align: right">Weight of representative period <span>$k$</span></td><td style="text-align: right">[-]</td></tr><tr><td style="text-align: right"><span>$p^{\text{map}}_{p,k}$</span></td><td style="text-align: right"><span>$\mathbb{R}_{+}$</span></td><td style="text-align: right"><span>$p \in \mathcal{P}$</span>, <span>$k \in \mathcal{K}$</span></td><td style="text-align: right">Map with the weight of representative period <span>$k$</span> in period <span>$p$</span></td><td style="text-align: right">[-]</td></tr></table><h2 id="math-variables"><a class="docs-heading-anchor" href="#math-variables">Variables</a><a id="math-variables-1"></a><a class="docs-heading-anchor-permalink" href="#math-variables" title="Permalink"></a></h2><table><tr><th style="text-align: right">Name</th><th style="text-align: right">Domain</th><th style="text-align: right">Domains of Indices</th><th style="text-align: right">Description</th><th style="text-align: right">Units</th></tr><tr><td style="text-align: right"><span>$v^{\text{flow}}_{f,k,b_k}$</span></td><td style="text-align: right"><span>$\mathbb{R}$</span></td><td style="text-align: right"><span>$f \in \mathcal{F}$</span>, <span>$k \in \mathcal{K}$</span>, <span>$b_k \in \mathcal{B_k}$</span></td><td style="text-align: right">Flow <span>$f$</span> between two assets in representative period <span>$k$</span> and timestep block <span>$b_k$</span></td><td style="text-align: right">[MW]</td></tr><tr><td style="text-align: right"><span>$v^{\text{inv}}_{a}$</span></td><td style="text-align: right"><span>$\mathbb{Z}_{+}$</span></td><td style="text-align: right"><span>$a \in \mathcal{A}^{\text{i}}$</span></td><td style="text-align: right">Number of invested units of asset <span>$a$</span></td><td style="text-align: right">[units]</td></tr><tr><td style="text-align: right"><span>$v^{\text{inv}}_{f}$</span></td><td style="text-align: right"><span>$\mathbb{Z}_{+}$</span></td><td style="text-align: right"><span>$f \in \mathcal{F}^{\text{ti}}$</span></td><td style="text-align: right">Number of invested units of capacity increment of transport flow <span>$f$</span></td><td style="text-align: right">[units]</td></tr><tr><td style="text-align: right"><span>$v^{\text{intra-storage}}_{a,k,b_k}$</span></td><td style="text-align: right"><span>$\mathbb{R}_{+}$</span></td><td style="text-align: right"><span>$a \in \mathcal{A}^{\text{s}} \setminus \mathcal{A}^{\text{ss}}$</span>, <span>$k \in \mathcal{K}$</span>, <span>$b_k \in \mathcal{B_k}$</span></td><td style="text-align: right">Intra storage level (within a representative period) for storage asset <span>$a$</span>, representative period <span>$k$</span>, and timestep block <span>$b_k$</span></td><td style="text-align: right">[MWh]</td></tr><tr><td style="text-align: right"><span>$v^{\text{inter-storage}}_{a,p}$</span></td><td style="text-align: right"><span>$\mathbb{R}_{+}$</span></td><td style="text-align: right"><span>$a \in \mathcal{A^{\text{ss}}}$</span>, <span>$p \in \mathcal{P}$</span></td><td style="text-align: right">Inter storage level (between representative periods) for storage asset <span>$a$</span> and period <span>$p$</span></td><td style="text-align: right">[MWh]</td></tr></table><h2 id="math-objective-function"><a class="docs-heading-anchor" href="#math-objective-function">Objective Function</a><a id="math-objective-function-1"></a><a class="docs-heading-anchor-permalink" href="#math-objective-function" title="Permalink"></a></h2><p>Objective function:</p><p class="math-container">\[\begin{aligned}
\text{{minimize}} \quad &amp; assets\_investment\_cost + flows\_investment\_cost \\
                        &amp; + flows\_variable\_cost
\end{aligned}\]</p><p>Where:</p><p class="math-container">\[\begin{aligned}
assets\_investment\_cost &amp;= \sum_{a \in \mathcal{A}^{\text{i}}} p^{\text{inv cost}}_{a} \cdot p^{\text{capacity}}_{a} \cdot v^{\text{inv}}_{a} \\
flows\_investment\_cost &amp;= \sum_{f \in \mathcal{F}^{\text{ti}}} p^{\text{inv cost}}_{f} \cdot p^{\text{capacity}}_{f} \cdot v^{\text{inv}}_{f} \\
flows\_variable\_cost &amp;= \sum_{f \in \mathcal{F}} \sum_{k \in \mathcal{K}} \sum_{b_k \in \mathcal{B_k}} p^{\text{rp weight}}_{k} \cdot p^{\text{variable cost}}_{f} \cdot p^{\text{duration}}_{b_k} \cdot v^{\text{flow}}_{f,k,b_k}
\end{aligned}\]</p><h2 id="math-constraints"><a class="docs-heading-anchor" href="#math-constraints">Constraints</a><a id="math-constraints-1"></a><a class="docs-heading-anchor-permalink" href="#math-constraints" title="Permalink"></a></h2><h3 id="Capacity-Constraints"><a class="docs-heading-anchor" href="#Capacity-Constraints">Capacity Constraints</a><a id="Capacity-Constraints-1"></a><a class="docs-heading-anchor-permalink" href="#Capacity-Constraints" title="Permalink"></a></h3><h4 id="Maximum-Output-Flows-Limit"><a class="docs-heading-anchor" href="#Maximum-Output-Flows-Limit">Maximum Output Flows Limit</a><a id="Maximum-Output-Flows-Limit-1"></a><a class="docs-heading-anchor-permalink" href="#Maximum-Output-Flows-Limit" title="Permalink"></a></h4><p class="math-container">\[\begin{aligned}
\sum_{f \in \mathcal{F}^{\text{out}}_a} v^{\text{flow}}_{f,k,b_k} \leq p^{\text{availability profile}}_{a,k,b_k} \cdot \left(p^{\text{init capacity}}_{a} + p^{\text{capacity}}_{a} \cdot v^{\text{inv}}_{a} \right)  \quad
\\ \\ \forall a \in \mathcal{A}^{\text{cv}} \cup \mathcal{A}^{\text{s}} \cup \mathcal{A}^{\text{p}}, \forall k \in \mathcal{K},\forall b_k \in \mathcal{B_k}
\end{aligned}\]</p><h4 id="Maximum-Input-Flows-Limit"><a class="docs-heading-anchor" href="#Maximum-Input-Flows-Limit">Maximum Input Flows Limit</a><a id="Maximum-Input-Flows-Limit-1"></a><a class="docs-heading-anchor-permalink" href="#Maximum-Input-Flows-Limit" title="Permalink"></a></h4><p class="math-container">\[\begin{aligned}
\sum_{f \in \mathcal{F}^{\text{in}}_a} v^{\text{flow}}_{f,k,b_k} \leq p^{\text{availability profile}}_{a,k,b_k} \cdot \left(p^{\text{init capacity}}_{a} + p^{\text{capacity}}_{a} \cdot v^{\text{inv}}_{a} \right)  \quad
\\ \\ \forall a \in \mathcal{A}^{\text{s}}, \forall k \in \mathcal{K},\forall b_k \in \mathcal{B_k}
\end{aligned}\]</p><h4 id="Lower-Limit-for-Flows-that-are-not-Transport-Assets"><a class="docs-heading-anchor" href="#Lower-Limit-for-Flows-that-are-not-Transport-Assets">Lower Limit for Flows that are not Transport Assets</a><a id="Lower-Limit-for-Flows-that-are-not-Transport-Assets-1"></a><a class="docs-heading-anchor-permalink" href="#Lower-Limit-for-Flows-that-are-not-Transport-Assets" title="Permalink"></a></h4><p class="math-container">\[v^{\text{flow}}_{f,k,b_k} \geq 0 \quad \forall f \notin \mathcal{F}^{\text{t}}, \forall k \in \mathcal{K}, \forall b_k \in \mathcal{B_k}\]</p><h3 id="Constraints-for-Energy-Consumer-Assets"><a class="docs-heading-anchor" href="#Constraints-for-Energy-Consumer-Assets">Constraints for Energy Consumer Assets</a><a id="Constraints-for-Energy-Consumer-Assets-1"></a><a class="docs-heading-anchor-permalink" href="#Constraints-for-Energy-Consumer-Assets" title="Permalink"></a></h3><h4 id="Balance-Constraint-for-Consumers"><a class="docs-heading-anchor" href="#Balance-Constraint-for-Consumers">Balance Constraint for Consumers</a><a id="Balance-Constraint-for-Consumers-1"></a><a class="docs-heading-anchor-permalink" href="#Balance-Constraint-for-Consumers" title="Permalink"></a></h4><p>The balance constraint sense depends on the method selected in the asset file&#39;s parameter <a href="../how-to-use/#schemas"><code>consumer_balance_sense</code></a>. The default value is <span>$=$</span>, but the user can choose <span>$\geq$</span> as an option.</p><p class="math-container">\[\begin{aligned}
\sum_{f \in \mathcal{F}^{\text{in}}_a} v^{\text{flow}}_{f,k,b_k} - \sum_{f \in \mathcal{F}^{\text{out}}_a} v^{\text{flow}}_{f,k,b_k} \left\{\begin{array}{l} = \\ \geq \end{array}\right\} p^{\text{demand profile}}_{a,k,b_k} \cdot p^{\text{peak demand}}_{a} \quad
\\ \\ \forall a \in \mathcal{A}^{\text{c}}, \forall k \in \mathcal{K},\forall b_k \in \mathcal{B_k}
\end{aligned}\]</p><h3 id="Constraints-for-Energy-Storage-Assets"><a class="docs-heading-anchor" href="#Constraints-for-Energy-Storage-Assets">Constraints for Energy Storage Assets</a><a id="Constraints-for-Energy-Storage-Assets-1"></a><a class="docs-heading-anchor-permalink" href="#Constraints-for-Energy-Storage-Assets" title="Permalink"></a></h3><p>There are two types of constraints for energy storage assets: intra-temporal and inter-temporal. Intra-temporal constraints impose limits inside a representative period, while inter-temporal constraints combine information from several representative periods (e.g., to model seasonal storage). For more information on this topic, refer to the <a href="../concepts/#storage-modeling">concepts section</a> or <a href="https://ieeexplore.ieee.org/document/8334256">Tejada-Arango et al. (2018)</a> and <a href="https://www.sciencedirect.com/science/article/pii/S0360544219317748">Tejada-Arango et al. (2019)</a>.</p><h4 id="intra-storage-balance"><a class="docs-heading-anchor" href="#intra-storage-balance">Intra-temporal Constraint for Storage Balance</a><a id="intra-storage-balance-1"></a><a class="docs-heading-anchor-permalink" href="#intra-storage-balance" title="Permalink"></a></h4><p class="math-container">\[\begin{aligned}
v^{\text{intra-storage}}_{a,k,b_k} = v^{\text{intra-storage}}_{a,k,b_k-1}  + p^{\text{inflows}}_{a,k,b_k} + \sum_{f \in \mathcal{F}^{\text{in}}_a} p^{\text{eff}}_f \cdot p^{\text{duration}}_{b_k} \cdot v^{\text{flow}}_{f,k,b_k} - \sum_{f \in \mathcal{F}^{\text{out}}_a} \frac{1}{p^{\text{eff}}_f} \cdot p^{\text{duration}}_{b_k} \cdot v^{\text{flow}}_{f,k,b_k} \quad
\\ \\ \forall a \in \mathcal{A}^{\text{s}} \setminus \mathcal{A}^{\text{ss}}, \forall k \in \mathcal{K},\forall b_k \in \mathcal{B_k}
\end{aligned}\]</p><h4 id="Intra-temporal-Constraint-for-Maximum-Storage-Level-Limit"><a class="docs-heading-anchor" href="#Intra-temporal-Constraint-for-Maximum-Storage-Level-Limit">Intra-temporal Constraint for Maximum Storage Level Limit</a><a id="Intra-temporal-Constraint-for-Maximum-Storage-Level-Limit-1"></a><a class="docs-heading-anchor-permalink" href="#Intra-temporal-Constraint-for-Maximum-Storage-Level-Limit" title="Permalink"></a></h4><p class="math-container">\[v^{\text{intra-storage}}_{a,k,b_k} \leq p^{\text{max intra level}}_{a,k,b_k} \cdot (p^{\text{init storage capacity}}_{a} + p^{\text{energy to power ratio}}_a \cdot p^{\text{init capacity}}_{a} \cdot v^{\text{inv}}_{a}) \quad
\\ \\ \forall a \in \mathcal{A}^{\text{s}} \setminus \mathcal{A}^{\text{ss}}, \forall k \in \mathcal{K},\forall b_k \in \mathcal{B_k}\]</p><h4 id="Intra-temporal-Constraint-for-Minimum-Storage-Level-Limit"><a class="docs-heading-anchor" href="#Intra-temporal-Constraint-for-Minimum-Storage-Level-Limit">Intra-temporal Constraint for Minimum Storage Level Limit</a><a id="Intra-temporal-Constraint-for-Minimum-Storage-Level-Limit-1"></a><a class="docs-heading-anchor-permalink" href="#Intra-temporal-Constraint-for-Minimum-Storage-Level-Limit" title="Permalink"></a></h4><p class="math-container">\[v^{\text{intra-storage}}_{a,k,b_k} \geq p^{\text{min intra level}}_{a,k,b_k} \cdot (p^{\text{init storage capacity}}_{a} + p^{\text{energy to power ratio}}_a \cdot p^{\text{init capacity}}_{a} \cdot v^{\text{inv}}_{a}) \quad
\\ \\ \forall a \in \mathcal{A}^{\text{s}} \setminus \mathcal{A}^{\text{ss}}, \forall k \in \mathcal{K},\forall b_k \in \mathcal{B_k}\]</p><h4 id="Intra-temporal-Cycling-Constraint"><a class="docs-heading-anchor" href="#Intra-temporal-Cycling-Constraint">Intra-temporal Cycling Constraint</a><a id="Intra-temporal-Cycling-Constraint-1"></a><a class="docs-heading-anchor-permalink" href="#Intra-temporal-Cycling-Constraint" title="Permalink"></a></h4><p>The cycling constraint for the intra-temporal constraints links the first timestep block (<span>$b^{\text{first}}_k$</span>) and the last one (<span>$b^{\text{last}}_k$</span>) in each representative period. The parameter <span>$p^{\text{init storage level}}_{a}$</span> determines the considered equations in the model for this constraint:</p><ul><li>If parameter <span>$p^{\text{init storage level}}_{a}$</span> is not defined, the intra-storage level of the last timestep block (<span>$b^{\text{last}}_k$</span>) is used as the initial value for the first timestep block in the <a href="#intra-storage-balance">intra-temporal constraint for the storage balance</a>.</li></ul><p class="math-container">\[\begin{aligned}
v^{\text{intra-storage}}_{a,k,b^{\text{first}}_k} = v^{\text{intra-storage}}_{a,k,b^{\text{last}}_k}  + p^{\text{inflows}}_{a,k,b^{\text{first}}_k} + \sum_{f \in \mathcal{F}^{\text{in}}_a} p^{\text{eff}}_f \cdot p^{\text{duration}}_{b_k} \cdot v^{\text{flow}}_{f,k,b^{\text{first}}_k} - \sum_{f \in \mathcal{F}^{\text{out}}_a} \frac{1}{p^{\text{eff}}_f} \cdot p^{\text{duration}}_{b_k} \cdot v^{\text{flow}}_{f,k,b^{\text{first}}_k} \quad
\\ \\ \forall a \in \mathcal{A}^{\text{s}} \setminus \mathcal{A}^{\text{ss}}, \forall k \in \mathcal{K}
\end{aligned}\]</p><ul><li>If parameter <span>$p^{\text{init storage level}}_{a}$</span> is defined, we use it as the initial value for the first timestep block in the <a href="#intra-storage-balance">intra-temporal constraint for the storage balance</a>. In addition, the intra-storage level of the last timestep block (<span>$b^{\text{last}}_k$</span>) in each representative period must be greater than this initial value.</li></ul><p class="math-container">\[\begin{aligned}
v^{\text{intra-storage}}_{a,k,b^{\text{first}}_k} = p^{\text{init storage level}}_{a}  + p^{\text{inflows}}_{a,k,b^{\text{first}}_k} + \sum_{f \in \mathcal{F}^{\text{in}}_a} p^{\text{eff}}_f \cdot p^{\text{duration}}_{b_k} \cdot v^{\text{flow}}_{f,k,b^{\text{first}}_k} - \sum_{f \in \mathcal{F}^{\text{out}}_a} \frac{1}{p^{\text{eff}}_f} \cdot p^{\text{duration}}_{b_k} \cdot v^{\text{flow}}_{f,k,b^{\text{first}}_k} \quad
\\ \\ \forall a \in \mathcal{A}^{\text{s}} \setminus \mathcal{A}^{\text{ss}}, \forall k \in \mathcal{K}
\end{aligned}\]</p><p class="math-container">\[v^{\text{intra-storage}}_{a,k,b^{\text{first}}_k} \geq p^{\text{init storage level}}_{a} \quad
\\ \\ \forall a \in \mathcal{A}^{\text{s}} \setminus \mathcal{A}^{\text{ss}}, \forall k \in \mathcal{K}\]</p><h4 id="inter-storage-balance"><a class="docs-heading-anchor" href="#inter-storage-balance">Inter-temporal Constraint for Storage Balance</a><a id="inter-storage-balance-1"></a><a class="docs-heading-anchor-permalink" href="#inter-storage-balance" title="Permalink"></a></h4><p>This constraint allows us to consider the storage seasonality throughout the model&#39;s timeframe (e.g., a year). The parameter <span>$p^{\text{map}}_{p,k}$</span> determines how much of the representative period <span>$k$</span> is in the period <span>$p$</span>, and you can use a clustering technique to calculate it. For <em>TulipaEnergyModel.jl</em>, we recommend using <a href="https://github.com/TulipaEnergy/TulipaClustering.jl"><em>TulipaClustering.jl</em></a> to compute the clusters for the representative periods and their map.</p><p>For the sake of simplicity, we show the constraint assuming the inter-storage level between two consecutive periods <span>$p$</span>; however, <em>TulipaEnergyModel.jl</em> can handle more flexible period block definition through the timeframe definition in the model using the information in the file <a href="../how-to-use/#assets-timeframe-partitions"><code>assets-timeframe-partitions.csv</code></a>.</p><p class="math-container">\[\begin{aligned}
v^{\text{inter-storage}}_{a,p} = &amp; v^{\text{inter-storage}}_{a,p-1} + \sum_{k \in \mathcal{K}} p^{\text{map}}_{p,k} \sum_{b_k \in \mathcal{B_K}} p^{\text{inflows}}_{a,k,b_k} \\
&amp; + \sum_{f \in \mathcal{F}^{\text{in}}_a} p^{\text{eff}}_f \sum_{k \in \mathcal{K}} p^{\text{map}}_{p,k} \sum_{b_k \in \mathcal{B_K}} p^{\text{duration}}_{b_k} \cdot v^{\text{flow}}_{f,k,b_k} \\
&amp; - \sum_{f \in \mathcal{F}^{\text{out}}_a} \frac{1}{p^{\text{eff}}_f} \sum_{k \in \mathcal{K}} p^{\text{map}}_{p,k} \sum_{b_k \in \mathcal{B_K}} p^{\text{duration}}_{b_k} \cdot v^{\text{flow}}_{f,k,b_k}
\\ \\ &amp; \forall a \in \mathcal{A}^{\text{ss}}, \forall p \in \mathcal{P}
\end{aligned}\]</p><h4 id="Inter-temporal-Constraint-for-Maximum-Storage-Level-Limit"><a class="docs-heading-anchor" href="#Inter-temporal-Constraint-for-Maximum-Storage-Level-Limit">Inter-temporal Constraint for Maximum Storage Level Limit</a><a id="Inter-temporal-Constraint-for-Maximum-Storage-Level-Limit-1"></a><a class="docs-heading-anchor-permalink" href="#Inter-temporal-Constraint-for-Maximum-Storage-Level-Limit" title="Permalink"></a></h4><p class="math-container">\[v^{\text{inter-storage}}_{a,p} \leq p^{\text{max inter level}}_{a,p} \cdot (p^{\text{init storage capacity}}_{a} + p^{\text{energy to power ratio}}_a \cdot p^{\text{init capacity}}_{a} \cdot v^{\text{inv}}_{a}) \quad
\\ \\ \forall a \in \mathcal{A}^{\text{ss}}, \forall p \in \mathcal{P}\]</p><h4 id="Inter-temporal-Constraint-for-Minimum-Storage-Level-Limit"><a class="docs-heading-anchor" href="#Inter-temporal-Constraint-for-Minimum-Storage-Level-Limit">Inter-temporal Constraint for Minimum Storage Level Limit</a><a id="Inter-temporal-Constraint-for-Minimum-Storage-Level-Limit-1"></a><a class="docs-heading-anchor-permalink" href="#Inter-temporal-Constraint-for-Minimum-Storage-Level-Limit" title="Permalink"></a></h4><p class="math-container">\[v^{\text{inter-storage}}_{a,p} \geq p^{\text{min inter level}}_{a,p} \cdot (p^{\text{init storage capacity}}_{a} + p^{\text{energy to power ratio}}_a \cdot p^{\text{init capacity}}_{a} \cdot v^{\text{inv}}_{a}) \quad
\\ \\ \forall a \in \mathcal{A}^{\text{ss}}, \forall p \in \mathcal{P}\]</p><h4 id="Inter-temporal-Cycling-Constraint"><a class="docs-heading-anchor" href="#Inter-temporal-Cycling-Constraint">Inter-temporal Cycling Constraint</a><a id="Inter-temporal-Cycling-Constraint-1"></a><a class="docs-heading-anchor-permalink" href="#Inter-temporal-Cycling-Constraint" title="Permalink"></a></h4><p>The cycling constraint for the inter-temporal constraints links the first-period block (<span>$p^{\text{first}}$</span>) and the last one (<span>$p^{\text{last}}$</span>) in the timeframe. The parameter <span>$p^{\text{init storage level}}_{a}$</span> determines the considered equations in the model for this constraint:</p><ul><li>If parameter <span>$p^{\text{init storage level}}_{a}$</span> is not defined, the inter-storage level of the last period block (<span>$p^{\text{last}}$</span>) is used as the initial value for the first-period block in the <a href="#inter-storage-balance">inter-temporal constraint for the storage balance</a>.</li></ul><p class="math-container">\[\begin{aligned}
v^{\text{inter-storage}}_{a,p^{\text{first}}} = &amp; v^{\text{inter-storage}}_{a,p^{\text{last}}} + \sum_{k \in \mathcal{K}} p^{\text{map}}_{p^{\text{first}},k} \sum_{b_k \in \mathcal{B_K}} p^{\text{inflows}}_{a,k,b_k} \\
&amp; + \sum_{f \in \mathcal{F}^{\text{in}}_a} p^{\text{eff}}_f \sum_{k \in \mathcal{K}} p^{\text{map}}_{p^{\text{first}},k} \sum_{b_k \in \mathcal{B_K}} p^{\text{duration}}_{b_k} \cdot v^{\text{flow}}_{f,k,b_k} \\
&amp; - \sum_{f \in \mathcal{F}^{\text{out}}_a} \frac{1}{p^{\text{eff}}_f} \sum_{k \in \mathcal{K}} p^{\text{map}}_{p^{\text{first}},k} \sum_{b_k \in \mathcal{B_K}} p^{\text{duration}}_{b_k} \cdot v^{\text{flow}}_{f,k,b_k}
\\ \\ &amp; \forall a \in \mathcal{A}^{\text{ss}}
\end{aligned}\]</p><ul><li>If parameter <span>$p^{\text{init storage level}}_{a}$</span> is defined, we use it as the initial value for the first-period block in the <a href="#inter-storage-balance">inter-temporal constraint for the storage balance</a>. In addition, the inter-storage level of the last period block (<span>$p^{\text{last}}$</span>) in the timeframe must be greater than this initial value.</li></ul><p class="math-container">\[\begin{aligned}
v^{\text{inter-storage}}_{a,p^{\text{first}}} = &amp; p^{\text{init storage level}}_{a} + \sum_{k \in \mathcal{K}} p^{\text{map}}_{p^{\text{first}},k} \sum_{b_k \in \mathcal{B_K}} p^{\text{inflows}}_{a,k,b_k} \\
&amp; + \sum_{f \in \mathcal{F}^{\text{in}}_a} p^{\text{eff}}_f \sum_{k \in \mathcal{K}} p^{\text{map}}_{p^{\text{first}},k} \sum_{b_k \in \mathcal{B_K}} p^{\text{duration}}_{b_k} \cdot v^{\text{flow}}_{f,k,b_k} \\
&amp; - \sum_{f \in \mathcal{F}^{\text{out}}_a} \frac{1}{p^{\text{eff}}_f} \sum_{k \in \mathcal{K}} p^{\text{map}}_{p^{\text{first}},k} \sum_{b_k \in \mathcal{B_K}} p^{\text{duration}}_{b_k} \cdot v^{\text{flow}}_{f,k,b_k}
\\ \\ &amp; \forall a \in \mathcal{A}^{\text{ss}}
\end{aligned}\]</p><p class="math-container">\[v^{\text{inter-storage}}_{a,p^{\text{last}}} \geq p^{\text{init storage level}}_{a} \quad
\\ \\ \forall a \in \mathcal{A}^{\text{ss}}\]</p><h3 id="Constraints-for-Energy-Hub-Assets"><a class="docs-heading-anchor" href="#Constraints-for-Energy-Hub-Assets">Constraints for Energy Hub Assets</a><a id="Constraints-for-Energy-Hub-Assets-1"></a><a class="docs-heading-anchor-permalink" href="#Constraints-for-Energy-Hub-Assets" title="Permalink"></a></h3><h4 id="Balance-Constraint-for-Hubs"><a class="docs-heading-anchor" href="#Balance-Constraint-for-Hubs">Balance Constraint for Hubs</a><a id="Balance-Constraint-for-Hubs-1"></a><a class="docs-heading-anchor-permalink" href="#Balance-Constraint-for-Hubs" title="Permalink"></a></h4><p class="math-container">\[\begin{aligned}
\sum_{f \in \mathcal{F}^{\text{in}}_a} v^{\text{flow}}_{f,k,b_k} = \sum_{f \in \mathcal{F}^{\text{out}}_a} v^{\text{flow}}_{f,k,b_k} \quad
\\ \\ \forall a \in \mathcal{A}^{\text{h}}, \forall k \in \mathcal{K},\forall b_k \in \mathcal{B_k}
\end{aligned}\]</p><h3 id="Constraints-for-Energy-Conversion-Assets"><a class="docs-heading-anchor" href="#Constraints-for-Energy-Conversion-Assets">Constraints for Energy Conversion Assets</a><a id="Constraints-for-Energy-Conversion-Assets-1"></a><a class="docs-heading-anchor-permalink" href="#Constraints-for-Energy-Conversion-Assets" title="Permalink"></a></h3><h4 id="Balance-Constraint-for-Conversion-Assets"><a class="docs-heading-anchor" href="#Balance-Constraint-for-Conversion-Assets">Balance Constraint for Conversion Assets</a><a id="Balance-Constraint-for-Conversion-Assets-1"></a><a class="docs-heading-anchor-permalink" href="#Balance-Constraint-for-Conversion-Assets" title="Permalink"></a></h4><p class="math-container">\[\begin{aligned}
\sum_{f \in \mathcal{F}^{\text{in}}_a} p^{\text{eff}}_f \cdot v^{\text{flow}}_{f,k,b_k} = \sum_{f \in \mathcal{F}^{\text{out}}_a} \frac{v^{\text{flow}}_{f,k,b_k}}{p^{\text{eff}}_f} \quad
\\ \\ \forall a \in \mathcal{A}^{\text{cv}}, \forall k \in \mathcal{K},\forall b_k \in \mathcal{B_k}
\end{aligned}\]</p><h3 id="Constraints-for-Transport-Assets"><a class="docs-heading-anchor" href="#Constraints-for-Transport-Assets">Constraints for Transport Assets</a><a id="Constraints-for-Transport-Assets-1"></a><a class="docs-heading-anchor-permalink" href="#Constraints-for-Transport-Assets" title="Permalink"></a></h3><h4 id="Maximum-Transport-Flow-Limit"><a class="docs-heading-anchor" href="#Maximum-Transport-Flow-Limit">Maximum Transport Flow Limit</a><a id="Maximum-Transport-Flow-Limit-1"></a><a class="docs-heading-anchor-permalink" href="#Maximum-Transport-Flow-Limit" title="Permalink"></a></h4><p class="math-container">\[\begin{aligned}
v^{\text{flow}}_{f,k,b_k} \leq p^{\text{availability profile}}_{f,k,b_k} \cdot \left(p^{\text{init export capacity}}_{f} + p^{\text{capacity}}_{f} \cdot v^{\text{inv}}_{f} \right)  \quad
\\ \\ \forall f \in \mathcal{F}^{\text{t}}, \forall k \in \mathcal{K},\forall b_k \in \mathcal{B_k}
\end{aligned}\]</p><h4 id="Minimum-Transport-Flow-Limit"><a class="docs-heading-anchor" href="#Minimum-Transport-Flow-Limit">Minimum Transport Flow Limit</a><a id="Minimum-Transport-Flow-Limit-1"></a><a class="docs-heading-anchor-permalink" href="#Minimum-Transport-Flow-Limit" title="Permalink"></a></h4><p class="math-container">\[\begin{aligned}
v^{\text{flow}}_{f,k,b_k} \geq - p^{\text{availability profile}}_{f,k,b_k} \cdot \left(p^{\text{init import capacity}}_{f} + p^{\text{capacity}}_{f} \cdot v^{\text{inv}}_{f} \right)  \quad
\\ \\ \forall f \in \mathcal{F}^{\text{t}}, \forall k \in \mathcal{K},\forall b_k \in \mathcal{B_k}
\end{aligned}\]</p><h3 id="Constraints-for-Investments"><a class="docs-heading-anchor" href="#Constraints-for-Investments">Constraints for Investments</a><a id="Constraints-for-Investments-1"></a><a class="docs-heading-anchor-permalink" href="#Constraints-for-Investments" title="Permalink"></a></h3><h4 id="Maximum-Investment-Limit-for-Assets"><a class="docs-heading-anchor" href="#Maximum-Investment-Limit-for-Assets">Maximum Investment Limit for Assets</a><a id="Maximum-Investment-Limit-for-Assets-1"></a><a class="docs-heading-anchor-permalink" href="#Maximum-Investment-Limit-for-Assets" title="Permalink"></a></h4><p class="math-container">\[v^{\text{inv}}_{a} \leq \frac{p^{\text{inv limit}}_{a}}{p^{\text{capacity}}_{a}} \quad
\\ \\ \forall a \in \mathcal{A}^{\text{i}}\]</p><p>If the parameter <code>investment_integer</code> in the <a href="../how-to-use/#assets-data"><code>assets-data.csv</code></a> file is set to true, then the RHS of this constraint uses a least integer function (floor function) to guarantee that the limit is integer.</p><h4 id="Maximum-Investment-Limit-for-Flows"><a class="docs-heading-anchor" href="#Maximum-Investment-Limit-for-Flows">Maximum Investment Limit for Flows</a><a id="Maximum-Investment-Limit-for-Flows-1"></a><a class="docs-heading-anchor-permalink" href="#Maximum-Investment-Limit-for-Flows" title="Permalink"></a></h4><p class="math-container">\[v^{\text{inv}}_{f} \leq \frac{p^{\text{inv limit}}_{f}}{p^{\text{capacity}}_{f}} \quad
\\ \\ \forall f \in \mathcal{F}^{\text{ti}}\]</p><p>If the parameter <code>investment_integer</code> in the <a href="../how-to-use/#flows-data"><code>flows-data.csv</code></a> file is set to true, then the RHS of this constraint uses a least integer function (floor function) to guarantee that the limit is integer.</p><h2 id="math-references"><a class="docs-heading-anchor" href="#math-references">References</a><a id="math-references-1"></a><a class="docs-heading-anchor-permalink" href="#math-references" title="Permalink"></a></h2><p>Tejada-Arango, D.A., Domeshek, M., Wogrin, S., Centeno, E., 2018. Enhanced representative days and system states modeling for energy storage investment analysis. IEEE Transactions on Power Systems 33, 6534–6544. doi:10.1109/TPWRS.2018.2819578.</p><p>Tejada-Arango, D.A., Wogrin, S., Siddiqui, A.S., Centeno, E., 2019. Opportunity cost including short-term energy storage in hydrothermal dispatch models using a linked representative periods approach. Energy 188, 116079. doi:10.1016/j.energy.2019.116079.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../concepts/">« Concepts</a><a class="docs-footer-nextpage" href="../api/">API »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.4.1 on <span class="colophon-date" title="Monday 13 May 2024 10:02">Monday 13 May 2024</span>. Using Julia version 1.10.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
