<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Reference · TulipaEnergyModel.jl</title><meta name="title" content="Reference · TulipaEnergyModel.jl"/><meta property="og:title" content="Reference · TulipaEnergyModel.jl"/><meta property="twitter:title" content="Reference · TulipaEnergyModel.jl"/><meta name="description" content="Documentation for TulipaEnergyModel.jl."/><meta property="og:description" content="Documentation for TulipaEnergyModel.jl."/><meta property="twitter:description" content="Documentation for TulipaEnergyModel.jl."/><meta property="og:url" content="https://TulipaEnergy.github.io/TulipaEnergyModel.jl/95-reference/"/><meta property="twitter:url" content="https://TulipaEnergy.github.io/TulipaEnergyModel.jl/95-reference/"/><link rel="canonical" href="https://TulipaEnergy.github.io/TulipaEnergyModel.jl/95-reference/"/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.png" alt="TulipaEnergyModel.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../">TulipaEnergyModel.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Welcome</a></li><li><a class="tocitem" href="../10-how-to-use/">How to Use</a></li><li><a class="tocitem" href="../20-tutorials/">Tutorials</a></li><li><a class="tocitem" href="../30-concepts/">Concepts</a></li><li><a class="tocitem" href="../40-formulation/">Mathematical Formulation</a></li><li><a class="tocitem" href="../90-contributing/">Contributing Guidelines</a></li><li><a class="tocitem" href="../91-developer/">Developer Documentation</a></li><li class="is-active"><a class="tocitem" href>Reference</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Reference</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Reference</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/TulipaEnergy/TulipaEnergyModel.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/TulipaEnergy/TulipaEnergyModel.jl/blob/main/docs/src/95-reference.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="reference"><a class="docs-heading-anchor" href="#reference">Reference</a><a id="reference-1"></a><a class="docs-heading-anchor-permalink" href="#reference" title="Permalink"></a></h1><ul><li><a href="#TulipaEnergyModel.EnergyProblem"><code>TulipaEnergyModel.EnergyProblem</code></a></li><li><a href="#TulipaEnergyModel.GraphAssetData"><code>TulipaEnergyModel.GraphAssetData</code></a></li><li><a href="#TulipaEnergyModel.GraphFlowData"><code>TulipaEnergyModel.GraphFlowData</code></a></li><li><a href="#TulipaEnergyModel.Group"><code>TulipaEnergyModel.Group</code></a></li><li><a href="#TulipaEnergyModel.ModelParameters"><code>TulipaEnergyModel.ModelParameters</code></a></li><li><a href="#TulipaEnergyModel.RepresentativePeriod"><code>TulipaEnergyModel.RepresentativePeriod</code></a></li><li><a href="#TulipaEnergyModel.Timeframe"><code>TulipaEnergyModel.Timeframe</code></a></li><li><a href="#TulipaEnergyModel.Year"><code>TulipaEnergyModel.Year</code></a></li><li><a href="#TulipaEnergyModel._check_initial_storage_level!-Tuple{Any, Any}"><code>TulipaEnergyModel._check_initial_storage_level!</code></a></li><li><a href="#TulipaEnergyModel._construct_inter_rp_dataframes-NTuple{4, Any}"><code>TulipaEnergyModel._construct_inter_rp_dataframes</code></a></li><li><a href="#TulipaEnergyModel._get_graph_asset_or_flow-Tuple{Any, Any}"><code>TulipaEnergyModel._get_graph_asset_or_flow</code></a></li><li><a href="#TulipaEnergyModel._interpolate_storage_level!-Tuple{Any, Any}"><code>TulipaEnergyModel._interpolate_storage_level!</code></a></li><li><a href="#TulipaEnergyModel._parse_rp_partition"><code>TulipaEnergyModel._parse_rp_partition</code></a></li><li><a href="#TulipaEnergyModel.add_expression_is_charging_terms_intra_rp_constraints!-Tuple{Any, Any, Any}"><code>TulipaEnergyModel.add_expression_is_charging_terms_intra_rp_constraints!</code></a></li><li><a href="#TulipaEnergyModel.add_expression_terms_inter_rp_constraints!-NTuple{5, Any}"><code>TulipaEnergyModel.add_expression_terms_inter_rp_constraints!</code></a></li><li><a href="#TulipaEnergyModel.add_expression_terms_intra_rp_constraints!-NTuple{5, Any}"><code>TulipaEnergyModel.add_expression_terms_intra_rp_constraints!</code></a></li><li><a href="#TulipaEnergyModel.add_expression_units_on_terms_intra_rp_constraints!-Tuple{Any, Any, Any}"><code>TulipaEnergyModel.add_expression_units_on_terms_intra_rp_constraints!</code></a></li><li><a href="#TulipaEnergyModel.add_group_constraints!-NTuple{6, Any}"><code>TulipaEnergyModel.add_group_constraints!</code></a></li><li><a href="#TulipaEnergyModel.add_ramping_constraints!-NTuple{12, Any}"><code>TulipaEnergyModel.add_ramping_constraints!</code></a></li><li><a href="#TulipaEnergyModel.calculate_annualized_cost-NTuple{5, Any}"><code>TulipaEnergyModel.calculate_annualized_cost</code></a></li><li><a href="#TulipaEnergyModel.calculate_salvage_value-NTuple{5, Any}"><code>TulipaEnergyModel.calculate_salvage_value</code></a></li><li><a href="#TulipaEnergyModel.calculate_weight_for_investment_discounts-NTuple{6, Any}"><code>TulipaEnergyModel.calculate_weight_for_investment_discounts</code></a></li><li><a href="#TulipaEnergyModel.calculate_weight_for_investment_discounts-Tuple{MetaGraphsNext.MetaGraph, Vararg{Any, 4}}"><code>TulipaEnergyModel.calculate_weight_for_investment_discounts</code></a></li><li><a href="#TulipaEnergyModel.compute_assets_partitions!-NTuple{4, Any}"><code>TulipaEnergyModel.compute_assets_partitions!</code></a></li><li><a href="#TulipaEnergyModel.compute_constraints_partitions-Tuple{Any, Any, Any}"><code>TulipaEnergyModel.compute_constraints_partitions</code></a></li><li><a href="#TulipaEnergyModel.compute_dual_variables-Tuple{Any}"><code>TulipaEnergyModel.compute_dual_variables</code></a></li><li><a href="#TulipaEnergyModel.compute_flows_partitions!-NTuple{5, Any}"><code>TulipaEnergyModel.compute_flows_partitions!</code></a></li><li><a href="#TulipaEnergyModel.compute_rp_partition-Tuple{AbstractVector{&lt;:AbstractVector{&lt;:UnitRange{&lt;:Integer}}}, Any}"><code>TulipaEnergyModel.compute_rp_partition</code></a></li><li><a href="#TulipaEnergyModel.construct_dataframes-NTuple{4, Any}"><code>TulipaEnergyModel.construct_dataframes</code></a></li><li><a href="#TulipaEnergyModel.create_internal_structures-Tuple{Any}"><code>TulipaEnergyModel.create_internal_structures</code></a></li><li><a href="#TulipaEnergyModel.create_intervals_for_years-Tuple{Any}"><code>TulipaEnergyModel.create_intervals_for_years</code></a></li><li><a href="#TulipaEnergyModel.create_model-NTuple{7, Any}"><code>TulipaEnergyModel.create_model</code></a></li><li><a href="#TulipaEnergyModel.create_model!-Tuple{Any}"><code>TulipaEnergyModel.create_model!</code></a></li><li><a href="#TulipaEnergyModel.default_parameters-Tuple{Any}"><code>TulipaEnergyModel.default_parameters</code></a></li><li><a href="#TulipaEnergyModel.filter_graph-Tuple{Any, Any, Any, Vararg{Any}}"><code>TulipaEnergyModel.filter_graph</code></a></li><li><a href="#TulipaEnergyModel.get_graph_value_or_missing-Tuple{Any, Any, Any}"><code>TulipaEnergyModel.get_graph_value_or_missing</code></a></li><li><a href="#TulipaEnergyModel.profile_aggregation-NTuple{7, Any}"><code>TulipaEnergyModel.profile_aggregation</code></a></li><li><a href="#TulipaEnergyModel.read_parameters_from_file-Tuple{Any}"><code>TulipaEnergyModel.read_parameters_from_file</code></a></li><li><a href="#TulipaEnergyModel.run_scenario-Tuple{Any}"><code>TulipaEnergyModel.run_scenario</code></a></li><li><a href="#TulipaEnergyModel.safe_comparison-Tuple{Any, Any, Any, Vararg{Any}}"><code>TulipaEnergyModel.safe_comparison</code></a></li><li><a href="#TulipaEnergyModel.safe_inclusion-Tuple{Any, Any, Vector, Vararg{Any}}"><code>TulipaEnergyModel.safe_inclusion</code></a></li><li><a href="#TulipaEnergyModel.save_solution_to_file-Tuple{Any, EnergyProblem}"><code>TulipaEnergyModel.save_solution_to_file</code></a></li><li><a href="#TulipaEnergyModel.save_solution_to_file-NTuple{4, Any}"><code>TulipaEnergyModel.save_solution_to_file</code></a></li><li><a href="#TulipaEnergyModel.solve_model"><code>TulipaEnergyModel.solve_model</code></a></li><li><a href="#TulipaEnergyModel.solve_model!"><code>TulipaEnergyModel.solve_model!</code></a></li><li><a href="#TulipaEnergyModel.solve_model!-Tuple{Any, Any, Vararg{Any}}"><code>TulipaEnergyModel.solve_model!</code></a></li></ul><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TulipaEnergyModel.EnergyProblem" href="#TulipaEnergyModel.EnergyProblem"><code>TulipaEnergyModel.EnergyProblem</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Structure to hold all parts of an energy problem. It is a wrapper around various other relevant structures. It hides the complexity behind the energy problem, making the usage more friendly, although more verbose.</p><p><strong>Fields</strong></p><ul><li><code>graph</code>: The <a href="../10-how-to-use/#Graph">Graph</a> object that defines the geometry of the energy problem.</li><li><code>representative_periods</code>: A vector of <a href="../10-how-to-use/#representative-periods">Representative Periods</a>.</li><li><code>constraints_partitions</code>: Dictionaries that connect pairs of asset and representative periods to <a href="../10-how-to-use/#Partition">time partitions (vectors of time blocks)</a></li><li><code>timeframe</code>: The number of periods of the <code>representative_periods</code>.</li><li><code>dataframes</code>: The data frames used to linearize the variables and constraints. These are used internally in the model only.</li><li><code>groups</code>: The input data of the groups to create constraints that are common to a set of assets in the model.</li><li><code>model_parameters</code>: The model parameters.</li><li><code>model</code>: A JuMP.Model object representing the optimization model.</li><li><code>solved</code>: A boolean indicating whether the <code>model</code> has been solved or not.</li><li><code>objective_value</code>: The objective value of the solved problem.</li><li><code>termination_status</code>: The termination status of the optimization model.</li><li><code>timings</code>: Dictionary of elapsed time for various parts of the code (in seconds).</li></ul><p><strong>Constructor</strong></p><ul><li><code>EnergyProblem(connection)</code>: Constructs a new <code>EnergyProblem</code> object with the given connection. The <code>constraints_partitions</code> field is computed from the <code>representative_periods</code>, and the other fields are initialized with default values.</li></ul><p>See the <a href="../20-tutorials/#basic-example">basic example tutorial</a> to see how these can be used.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/TulipaEnergy/TulipaEnergyModel.jl/blob/b204e0af62e039bf3199af550851d704f9442b3f/src/structures.jl#L300-L322">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TulipaEnergyModel.GraphAssetData" href="#TulipaEnergyModel.GraphAssetData"><code>TulipaEnergyModel.GraphAssetData</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Structure to hold the asset data in the graph.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/TulipaEnergy/TulipaEnergyModel.jl/blob/b204e0af62e039bf3199af550851d704f9442b3f/src/structures.jl#L47-L49">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TulipaEnergyModel.GraphFlowData" href="#TulipaEnergyModel.GraphFlowData"><code>TulipaEnergyModel.GraphFlowData</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Structure to hold the flow data in the graph.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/TulipaEnergy/TulipaEnergyModel.jl/blob/b204e0af62e039bf3199af550851d704f9442b3f/src/structures.jl#L199-L201">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TulipaEnergyModel.Group" href="#TulipaEnergyModel.Group"><code>TulipaEnergyModel.Group</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Structure to hold the group data</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/TulipaEnergy/TulipaEnergyModel.jl/blob/b204e0af62e039bf3199af550851d704f9442b3f/src/structures.jl#L272-L274">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TulipaEnergyModel.ModelParameters" href="#TulipaEnergyModel.ModelParameters"><code>TulipaEnergyModel.ModelParameters</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ModelParameters(;key = value, ...)
ModelParameters(path; ...)
ModelParameters(connection; ...)
ModelParameters(connection, path; ...)</code></pre><p>Structure to hold the model parameters. Some values are defined by default and some required explicit definition.</p><p>If <code>path</code> is passed, it is expected to be a string pointing to a TOML file with a <code>key = value</code> list of parameters. Explicit keyword arguments take precedence.</p><p>If <code>connection</code> is passed, the default <code>discount_year</code> is set to the minimum of all milestone years. In other words, we check for the table <code>year_data</code> for the column <code>year</code> where the column <code>is_milestone</code> is true. Explicit keyword arguments take precedence.</p><p>If both are passed, then <code>path</code> has preference. Explicit keyword arguments take precedence.</p><p><strong>Parameters</strong></p><ul><li><code>discount_rate::Float64 = 0.0</code>: The model discount rate.</li><li><code>discount_year::Int</code>: The model discount year.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/TulipaEnergy/TulipaEnergyModel.jl/blob/b204e0af62e039bf3199af550851d704f9442b3f/src/model-parameters.jl#L3-L26">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TulipaEnergyModel.RepresentativePeriod" href="#TulipaEnergyModel.RepresentativePeriod"><code>TulipaEnergyModel.RepresentativePeriod</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Structure to hold the data of one representative period.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/TulipaEnergy/TulipaEnergyModel.jl/blob/b204e0af62e039bf3199af550851d704f9442b3f/src/structures.jl#L34-L36">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TulipaEnergyModel.Timeframe" href="#TulipaEnergyModel.Timeframe"><code>TulipaEnergyModel.Timeframe</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Structure to hold the data of the timeframe.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/TulipaEnergy/TulipaEnergyModel.jl/blob/b204e0af62e039bf3199af550851d704f9442b3f/src/structures.jl#L26-L28">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TulipaEnergyModel.Year" href="#TulipaEnergyModel.Year"><code>TulipaEnergyModel.Year</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Structure to hold the data of the year.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/TulipaEnergy/TulipaEnergyModel.jl/blob/b204e0af62e039bf3199af550851d704f9442b3f/src/structures.jl#L17-L19">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TulipaEnergyModel._check_initial_storage_level!-Tuple{Any, Any}" href="#TulipaEnergyModel._check_initial_storage_level!-Tuple{Any, Any}"><code>TulipaEnergyModel._check_initial_storage_level!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">_check_initial_storage_level!(df)</code></pre><p>Determine the starting value for the initial storage level for interpolating the storage level. If there is no initial storage level given, we will use the final storage level. Otherwise, we use the given initial storage level.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/TulipaEnergy/TulipaEnergyModel.jl/blob/b204e0af62e039bf3199af550851d704f9442b3f/src/io.jl#L586-L592">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TulipaEnergyModel._construct_inter_rp_dataframes-NTuple{4, Any}" href="#TulipaEnergyModel._construct_inter_rp_dataframes-NTuple{4, Any}"><code>TulipaEnergyModel._construct_inter_rp_dataframes</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">df = _construct_inter_rp_dataframes(assets, graph, years, asset_filter)</code></pre><p>Constructs dataframes for inter representative period constraints.</p><p><strong>Arguments</strong></p><ul><li><code>assets</code>: An array of assets.</li><li><code>graph</code>: The energy problem graph with the assets data.</li><li><code>asset_filter</code>: A function that filters assets based on certain criteria.</li></ul><p><strong>Returns</strong></p><p>A dataframe containing the constructed dataframe for constraints.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/TulipaEnergy/TulipaEnergyModel.jl/blob/b204e0af62e039bf3199af550851d704f9442b3f/src/create-model.jl#L189-L202">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TulipaEnergyModel._get_graph_asset_or_flow-Tuple{Any, Any}" href="#TulipaEnergyModel._get_graph_asset_or_flow-Tuple{Any, Any}"><code>TulipaEnergyModel._get_graph_asset_or_flow</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">_get_graph_asset_or_flow(graph, a)
_get_graph_asset_or_flow(graph, (u, v))</code></pre><p>Returns <code>graph[a]</code> or <code>graph[u, v]</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/TulipaEnergy/TulipaEnergyModel.jl/blob/b204e0af62e039bf3199af550851d704f9442b3f/src/create-model.jl#L3-L8">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TulipaEnergyModel._interpolate_storage_level!-Tuple{Any, Any}" href="#TulipaEnergyModel._interpolate_storage_level!-Tuple{Any, Any}"><code>TulipaEnergyModel._interpolate_storage_level!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">_interpolate_storage_level!(df, time_column::Symbol)</code></pre><p>Transform the storage level dataframe from grouped timesteps or periods to incremental ones by interpolation. The starting value is the value of the previous grouped timesteps or periods or the initial value. The ending value is the value for the grouped timesteps or periods.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/TulipaEnergy/TulipaEnergyModel.jl/blob/b204e0af62e039bf3199af550851d704f9442b3f/src/io.jl#L604-L610">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TulipaEnergyModel._parse_rp_partition" href="#TulipaEnergyModel._parse_rp_partition"><code>TulipaEnergyModel._parse_rp_partition</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">_parse_rp_partition(Val(specification), timestep_string, rp_timesteps)</code></pre><p>Parses the <code>timestep_string</code> according to the specification. The representative period timesteps (<code>rp_timesteps</code>) might not be used in the computation, but it will be used for validation.</p><p>The specification defines what is expected from the <code>timestep_string</code>:</p><ul><li><code>:uniform</code>: The <code>timestep_string</code> should be a single number indicating the duration of each block. Examples: &quot;3&quot;, &quot;4&quot;, &quot;1&quot;.</li><li><code>:explicit</code>: The <code>timestep_string</code> should be a semicolon-separated list of integers. Each integer is a duration of a block. Examples: &quot;3;3;3;3&quot;, &quot;4;4;4&quot;, &quot;1;1;1;1;1;1;1;1;1;1;1;1&quot;, and &quot;3;3;4;2&quot;.</li><li><code>:math</code>: The <code>timestep_string</code> should be an expression of the form <code>NxD+NxD…</code>, where <code>D</code> is the duration of the block and <code>N</code> is the number of blocks. Examples: &quot;4x3&quot;, &quot;3x4&quot;, &quot;12x1&quot;, and &quot;2x3+1x4+1x2&quot;.</li></ul><p>The generated blocks will be ranges (<code>a:b</code>). The first block starts at <code>1</code>, and the last block ends at <code>length(rp_timesteps)</code>.</p><p>The following table summarizes the formats for a <code>rp_timesteps = 1:12</code>:</p><table><tr><th style="text-align: left">Output</th><th style="text-align: left">:uniform</th><th style="text-align: left">:explicit</th><th style="text-align: left">:math</th></tr><tr><td style="text-align: left">1:3, 4:6, 7:9, 10:12</td><td style="text-align: left">3</td><td style="text-align: left">3;3;3;3</td><td style="text-align: left">4x3</td></tr><tr><td style="text-align: left">1:4, 5:8, 9:12</td><td style="text-align: left">4</td><td style="text-align: left">4;4;4</td><td style="text-align: left">3x4</td></tr><tr><td style="text-align: left">1:1, 2:2, …, 12:12</td><td style="text-align: left">1</td><td style="text-align: left">1;1;1;1;1;1;1;1;1;1;1;1</td><td style="text-align: left">12x1</td></tr><tr><td style="text-align: left">1:3, 4:6, 7:10, 11:12</td><td style="text-align: left">NA</td><td style="text-align: left">3;3;4;2</td><td style="text-align: left">2x3+1x4+1x2</td></tr></table><p><strong>Examples</strong></p><pre><code class="language-julia hljs">using TulipaEnergyModel
TulipaEnergyModel._parse_rp_partition(Val(:uniform), &quot;3&quot;, 1:12)

# output

4-element Vector{UnitRange{Int64}}:
 1:3
 4:6
 7:9
 10:12</code></pre><pre><code class="language-julia hljs">using TulipaEnergyModel
TulipaEnergyModel._parse_rp_partition(Val(:explicit), &quot;4;4;4&quot;, 1:12)

# output

3-element Vector{UnitRange{Int64}}:
 1:4
 5:8
 9:12</code></pre><pre><code class="language-julia hljs">using TulipaEnergyModel
TulipaEnergyModel._parse_rp_partition(Val(:math), &quot;2x3+1x4+1x2&quot;, 1:12)

# output

4-element Vector{UnitRange{Int64}}:
 1:3
 4:6
 7:10
 11:12</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/TulipaEnergy/TulipaEnergyModel.jl/blob/b204e0af62e039bf3199af550851d704f9442b3f/src/io.jl#L628-L697">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TulipaEnergyModel.add_expression_is_charging_terms_intra_rp_constraints!-Tuple{Any, Any, Any}" href="#TulipaEnergyModel.add_expression_is_charging_terms_intra_rp_constraints!-Tuple{Any, Any, Any}"><code>TulipaEnergyModel.add_expression_is_charging_terms_intra_rp_constraints!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">add_expression_is_charging_terms_intra_rp_constraints!(df_cons,
                                                   df_is_charging,
                                                   workspace
                                                   )</code></pre><p>Computes the <code>is_charging</code> expressions per row of <code>df_cons</code> for the constraints that are within (intra) the representative periods.</p><p>This function is only used internally in the model.</p><p>This strategy is based on the replies in this discourse thread:</p><ul><li>https://discourse.julialang.org/t/help-improving-the-speed-of-a-dataframes-operation/107615/23</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/TulipaEnergy/TulipaEnergyModel.jl/blob/b204e0af62e039bf3199af550851d704f9442b3f/src/create-model.jl#L327-L341">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TulipaEnergyModel.add_expression_terms_inter_rp_constraints!-NTuple{5, Any}" href="#TulipaEnergyModel.add_expression_terms_inter_rp_constraints!-NTuple{5, Any}"><code>TulipaEnergyModel.add_expression_terms_inter_rp_constraints!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">add_expression_terms_inter_rp_constraints!(df_inter,
                                           df_flows,
                                           df_map,
                                           graph,
                                           representative_periods,
                                           )</code></pre><p>Computes the incoming and outgoing expressions per row of df_inter for the constraints that are between (inter) the representative periods.</p><p>This function is only used internally in the model.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/TulipaEnergy/TulipaEnergyModel.jl/blob/b204e0af62e039bf3199af550851d704f9442b3f/src/create-model.jl#L415-L428">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TulipaEnergyModel.add_expression_terms_intra_rp_constraints!-NTuple{5, Any}" href="#TulipaEnergyModel.add_expression_terms_intra_rp_constraints!-NTuple{5, Any}"><code>TulipaEnergyModel.add_expression_terms_intra_rp_constraints!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">add_expression_terms_intra_rp_constraints!(df_cons,
                                           df_flows,
                                           workspace,
                                           representative_periods,
                                           graph;
                                           use_highest_resolution = true,
                                           multiply_by_duration = true,
                                           )</code></pre><p>Computes the incoming and outgoing expressions per row of df_cons for the constraints that are within (intra) the representative periods.</p><p>This function is only used internally in the model.</p><p>This strategy is based on the replies in this discourse thread:</p><ul><li>https://discourse.julialang.org/t/help-improving-the-speed-of-a-dataframes-operation/107615/23</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/TulipaEnergy/TulipaEnergyModel.jl/blob/b204e0af62e039bf3199af550851d704f9442b3f/src/create-model.jl#L224-L242">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TulipaEnergyModel.add_expression_units_on_terms_intra_rp_constraints!-Tuple{Any, Any, Any}" href="#TulipaEnergyModel.add_expression_units_on_terms_intra_rp_constraints!-Tuple{Any, Any, Any}"><code>TulipaEnergyModel.add_expression_units_on_terms_intra_rp_constraints!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">add_expression_units_on_terms_intra_rp_constraints!(
    df_cons,
    df_units_on,
    workspace,
)</code></pre><p>Computes the <code>units_on</code> expressions per row of <code>df_cons</code> for the constraints that are within (intra) the representative periods.</p><p>This function is only used internally in the model.</p><p>This strategy is based on the replies in this discourse thread:</p><ul><li>https://discourse.julialang.org/t/help-improving-the-speed-of-a-dataframes-operation/107615/23</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/TulipaEnergy/TulipaEnergyModel.jl/blob/b204e0af62e039bf3199af550851d704f9442b3f/src/create-model.jl#L372-L387">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TulipaEnergyModel.add_group_constraints!-NTuple{6, Any}" href="#TulipaEnergyModel.add_group_constraints!-NTuple{6, Any}"><code>TulipaEnergyModel.add_group_constraints!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">add_group_constraints!(model, graph, ...)</code></pre><p>Adds group constraints for assets that share a common limits or bounds</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/TulipaEnergy/TulipaEnergyModel.jl/blob/b204e0af62e039bf3199af550851d704f9442b3f/src/constraints/group.jl#L3-L7">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TulipaEnergyModel.add_ramping_constraints!-NTuple{12, Any}" href="#TulipaEnergyModel.add_ramping_constraints!-NTuple{12, Any}"><code>TulipaEnergyModel.add_ramping_constraints!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">add_ramping_and_unit_commitment_constraints!(model, graph, ...)</code></pre><p>Adds the ramping constraints for producer and conversion assets where ramping = true in assets_data</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/TulipaEnergy/TulipaEnergyModel.jl/blob/b204e0af62e039bf3199af550851d704f9442b3f/src/constraints/ramping-and-unit-commitment.jl#L3-L7">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TulipaEnergyModel.calculate_annualized_cost-NTuple{5, Any}" href="#TulipaEnergyModel.calculate_annualized_cost-NTuple{5, Any}"><code>TulipaEnergyModel.calculate_annualized_cost</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">calculate_annualized_cost(discount_rate, economic_lifetime, investment_cost, years, investable_assets)</code></pre><p>Calculates the annualized cost for each asset, both energy assets and transport assets, in each year using provided discount rates, economic lifetimes, and investment costs.</p><p><strong>Arguments</strong></p><ul><li><code>discount_rate::Dict</code>: A dictionary where the key is an <code>asset</code> or a pair of assets <code>(asset1, asset2)</code> for transport assets, and the value is the discount rate.</li><li><code>economic_lifetime::Dict</code>: A dictionary where the key is an <code>asset</code> or a pair of assets <code>(asset1, asset2)</code> for transport assets, and the value is the economic lifetime.</li><li><code>investment_cost::Dict</code>: A dictionary where the key is a tuple <code>(year, asset)</code> or <code>(year, (asset1, asset2))</code> for transport assets, and the value is the investment cost.</li><li><code>years::Array</code>: An array of years to be considered.</li><li><code>investable_assets::Dict</code>: A dictionary where the key is a year, and the value is an array of assets that are relevant for that year.</li></ul><p><strong>Returns</strong></p><ul><li>A <code>Dict</code> where the keys are tuples <code>(year, asset)</code> representing the year and the asset, and the values are the calculated annualized cost for each asset in each year.</li></ul><p><strong>Formula</strong></p><p>The annualized cost for each asset in year is calculated using the formula:</p><pre><code class="nohighlight hljs">annualized_cost = discount_rate[asset] / (
    (1 + discount_rate[asset]) *
    (1 - 1 / (1 + discount_rate[asset])^economic_lifetime[asset])
) * investment_cost[(year, asset)]</code></pre><p><strong>Example for energy assets</strong></p><pre><code class="language-julia hljs">discount_rate = Dict(&quot;asset1&quot; =&gt; 0.05, &quot;asset2&quot; =&gt; 0.07)

economic_lifetime = Dict(&quot;asset1&quot; =&gt; 10, &quot;asset2&quot; =&gt; 15)

investment_cost   = Dict((2021, &quot;asset1&quot;) =&gt; 1000, (2021, &quot;asset2&quot;) =&gt; 1500,
                         (2022, &quot;asset1&quot;) =&gt; 1100, (2022, &quot;asset2&quot;) =&gt; 1600)
years = [2021, 2022]

investable_assets = Dict(2021 =&gt; [&quot;asset1&quot;, &quot;asset2&quot;],
                         2022 =&gt; [&quot;asset1&quot;])

costs = calculate_annualized_cost(discount_rate, economic_lifetime, investment_cost, years, investable_assets)

# output

Dict{Tuple{Int64, String}, Float64} with 3 entries:
  (2021, &quot;asset1&quot;) =&gt; 123.338
  (2021, &quot;asset2&quot;) =&gt; 153.918
  (2022, &quot;asset1&quot;) =&gt; 135.671</code></pre><p><strong>Example for transport assets</strong></p><pre><code class="language-julia hljs">discount_rate = Dict((&quot;asset1&quot;, &quot;asset2&quot;) =&gt; 0.05, (&quot;asset3&quot;, &quot;asset4&quot;) =&gt; 0.07)

economic_lifetime = Dict((&quot;asset1&quot;, &quot;asset2&quot;) =&gt; 10, (&quot;asset3&quot;, &quot;asset4&quot;) =&gt; 15)

investment_cost   = Dict((2021, (&quot;asset1&quot;, &quot;asset2&quot;)) =&gt; 1000, (2021, (&quot;asset3&quot;, &quot;asset4&quot;)) =&gt; 1500,
                         (2022, (&quot;asset1&quot;, &quot;asset2&quot;)) =&gt; 1100, (2022, (&quot;asset3&quot;, &quot;asset4&quot;)) =&gt; 1600)
years = [2021, 2022]

investable_assets = Dict(2021 =&gt; [(&quot;asset1&quot;, &quot;asset2&quot;), (&quot;asset3&quot;, &quot;asset4&quot;)],
                         2022 =&gt; [(&quot;asset1&quot;, &quot;asset2&quot;)])

costs = calculate_annualized_cost(discount_rate, economic_lifetime, investment_cost, years, investable_assets)

# output

Dict{Tuple{Int64, Tuple{String, String}}, Float64} with 3 entries:
  (2022, (&quot;asset1&quot;, &quot;asset2&quot;)) =&gt; 135.671
  (2021, (&quot;asset3&quot;, &quot;asset4&quot;)) =&gt; 153.918
  (2021, (&quot;asset1&quot;, &quot;asset2&quot;)) =&gt; 123.338</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/TulipaEnergy/TulipaEnergyModel.jl/blob/b204e0af62e039bf3199af550851d704f9442b3f/src/economic-parameters.jl#L3-L73">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TulipaEnergyModel.calculate_salvage_value-NTuple{5, Any}" href="#TulipaEnergyModel.calculate_salvage_value-NTuple{5, Any}"><code>TulipaEnergyModel.calculate_salvage_value</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">calculate_salvage_value(discount_rate,
                        economic_lifetime,
                        annualized_cost,
                        years,
                        investable_assets,
                        )</code></pre><p>Calculates the salvage value for each asset, both energy assets and transport assets.</p><p><strong>Arguments</strong></p><ul><li><code>discount_rate::Dict</code>: A dictionary where the key is an <code>asset</code> or a pair of assets <code>(asset1, asset2)</code> for transport assets, and the value is the discount rate.</li><li><code>economic_lifetime::Dict</code>: A dictionary where the key is an <code>asset</code> or a pair of assets <code>(asset1, asset2)</code> for transport assets, and the value is the economic lifetime.</li><li><code>annualized_cost::Dict</code>: A <code>Dict</code> where the keys are tuples <code>(year, asset)</code> representing the year and the asset, and the values are the annualized cost for each asset in each year.</li><li><code>years::Array</code>: An array of years to be considered.</li><li><code>investable_assets::Dict</code>: A dictionary where the key is a year, and the value is an array of assets that are relevant for that year.</li></ul><p><strong>Returns</strong></p><ul><li>A <code>Dict</code> where the keys are tuples <code>(year, asset)</code> representing the year and the asset, and the values are the salvage value for each asset in each year.</li></ul><p><strong>Formula</strong></p><p>The salvage value for each asset in year is calculated using the formula:</p><p>salvage<em>value =     annualized</em>cost[(year, asset)] * sum(         1 / (1 + discount<em>rate[asset])^(year</em>alias - year) for         year<em>alias in salvage</em>value_set[(year, asset)]     )</p><p><strong>Example for energy assets</strong></p><pre><code class="language-julia hljs">discount_rate = Dict(&quot;asset1&quot; =&gt; 0.05, &quot;asset2&quot; =&gt; 0.07)

economic_lifetime = Dict(&quot;asset1&quot; =&gt; 10, &quot;asset2&quot; =&gt; 15)

annualized_cost =
    Dict((2021, &quot;asset1&quot;) =&gt; 123.338, (2021, &quot;asset2&quot;) =&gt; 153.918, (2022, &quot;asset1&quot;) =&gt; 135.671)

years = [2021, 2022]

investable_assets = Dict(2021 =&gt; [&quot;asset1&quot;, &quot;asset2&quot;], 2022 =&gt; [&quot;asset1&quot;])

salvage_value = calculate_salvage_value(
    discount_rate,
    economic_lifetime,
    annualized_cost,
    years,
    investable_assets,
)

# output
Dict{Tuple{Int64, String}, Float64} with 3 entries:
  (2021, &quot;asset1&quot;) =&gt; 759.2
  (2021, &quot;asset2&quot;) =&gt; 1202.24
  (2022, &quot;asset1&quot;) =&gt; 964.325</code></pre><p><strong>Example for transport assets</strong></p><pre><code class="language-julia hljs">discount_rate = Dict((&quot;asset1&quot;, &quot;asset2&quot;) =&gt; 0.05, (&quot;asset3&quot;, &quot;asset4&quot;) =&gt; 0.07)

economic_lifetime = Dict((&quot;asset1&quot;, &quot;asset2&quot;) =&gt; 10, (&quot;asset3&quot;, &quot;asset4&quot;) =&gt; 15)

annualized_cost = Dict(
    (2022, (&quot;asset1&quot;, &quot;asset2&quot;)) =&gt; 135.671,
    (2021, (&quot;asset3&quot;, &quot;asset4&quot;)) =&gt; 153.918,
    (2021, (&quot;asset1&quot;, &quot;asset2&quot;)) =&gt; 123.338,
)

years = [2021, 2022]

investable_assets =
    Dict(2021 =&gt; [(&quot;asset1&quot;, &quot;asset2&quot;), (&quot;asset3&quot;, &quot;asset4&quot;)], 2022 =&gt; [(&quot;asset1&quot;, &quot;asset2&quot;)])

salvage_value = calculate_salvage_value(
    discount_rate,
    economic_lifetime,
    annualized_cost,
    years,
    investable_assets,
)

# output

Dict{Tuple{Int64, Tuple{String, String}}, Float64} with 3 entries:
  (2022, (&quot;asset1&quot;, &quot;asset2&quot;)) =&gt; 964.325
  (2021, (&quot;asset3&quot;, &quot;asset4&quot;)) =&gt; 1202.24
  (2021, (&quot;asset1&quot;, &quot;asset2&quot;)) =&gt; 759.2</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/TulipaEnergy/TulipaEnergyModel.jl/blob/b204e0af62e039bf3199af550851d704f9442b3f/src/economic-parameters.jl#L92-L183">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TulipaEnergyModel.calculate_weight_for_investment_discounts-NTuple{6, Any}" href="#TulipaEnergyModel.calculate_weight_for_investment_discounts-NTuple{6, Any}"><code>TulipaEnergyModel.calculate_weight_for_investment_discounts</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">calculate_weight_for_investment_discounts(social_rate,
                                          discount_year,
                                          salvage_value,
                                          investment_cost,
                                          years,
                                          investable_assets,
                                         )</code></pre><p>Calculates the weight for investment discounts for each asset, both energy assets and transport assets.</p><p><strong>Arguments</strong></p><ul><li><code>social_rate::Float64</code>: A value with the social discount rate.</li><li><code>discount_year::Int64</code>: A value with the discount year for all the investments.</li><li><code>salvage_value::Dict</code>: A dictionary where the key is an tuple <code>(year, asset)</code> or <code>(year, (asset1, asset2))</code> for transport assets, and the value is the salvage value.</li><li><code>investment_cost::Dict</code>: A dictionary where the key is an tuple <code>(year, asset)</code> or <code>(year, (asset1, asset2))</code> for transport assets, and the value is the investment cost.</li><li><code>years::Array</code>: An array of years to be considered.</li><li><code>investable_assets::Dict</code>: A dictionary where the key is a year, and the value is an array of assets that are relevant for that year.</li></ul><p><strong>Returns</strong></p><ul><li>A <code>Dict</code> where the keys are tuples <code>(year, asset)</code> representing the year and the asset, and the values are the weights for investment discounts.</li></ul><p><strong>Formula</strong></p><p>The weight for investment discounts for each asset in year is calculated using the formula:</p><p>weight<em>for</em>investment<em>discounts =     1 / (1 + social</em>rate)^(year - discount<em>year) *     (1 - salvage</em>value[(year, asset)] / investment_cost[(year, asset)])</p><p><strong>Example for energy assets</strong></p><pre><code class="language-julia hljs">social_rate = 0.02

discount_year = 2000

salvage_value = Dict(
    (2021, &quot;asset1&quot;) =&gt; 759.1978422,
    (2021, &quot;asset2&quot;) =&gt; 1202.2339859,
    (2022, &quot;asset1&quot;) =&gt; 964.3285406,
)

investment_cost = Dict(
    (2021, &quot;asset1&quot;) =&gt; 1000,
    (2021, &quot;asset2&quot;) =&gt; 1500,
    (2022, &quot;asset1&quot;) =&gt; 1100,
    (2022, &quot;asset2&quot;) =&gt; 1600,
)
years = [2021, 2022]

investable_assets = Dict(2021 =&gt; [&quot;asset1&quot;, &quot;asset2&quot;], 2022 =&gt; [&quot;asset1&quot;])

weights = calculate_weight_for_investment_discounts(
    social_rate,
    discount_year,
    salvage_value,
    investment_cost,
    years,
    investable_assets,
)

# output

Dict{Tuple{Int64, String}, Float64} with 3 entries:
  (2021, &quot;asset1&quot;) =&gt; 0.158875
  (2021, &quot;asset2&quot;) =&gt; 0.130973
  (2022, &quot;asset1&quot;) =&gt; 0.0797796</code></pre><p><strong>Example for transport assets</strong></p><pre><code class="language-julia hljs">social_rate = 0.02

discount_year = 2000

salvage_value = Dict(
  (2022, (&quot;asset1&quot;, &quot;asset2&quot;)) =&gt; 964.325,
  (2021, (&quot;asset3&quot;, &quot;asset4&quot;)) =&gt; 1202.24,
  (2021, (&quot;asset1&quot;, &quot;asset2&quot;)) =&gt; 759.2,
)

investment_cost   = Dict((2021, (&quot;asset1&quot;, &quot;asset2&quot;)) =&gt; 1000, (2021, (&quot;asset3&quot;, &quot;asset4&quot;)) =&gt; 1500,
                         (2022, (&quot;asset1&quot;, &quot;asset2&quot;)) =&gt; 1100, (2022, (&quot;asset3&quot;, &quot;asset4&quot;)) =&gt; 1600)
years = [2021, 2022]

investable_assets = Dict(2021 =&gt; [(&quot;asset1&quot;, &quot;asset2&quot;), (&quot;asset3&quot;, &quot;asset4&quot;)],
                         2022 =&gt; [(&quot;asset1&quot;, &quot;asset2&quot;)])

weights = calculate_weight_for_investment_discounts(
    social_rate,
    discount_year,
    salvage_value,
    investment_cost,
    years,
    investable_assets,
)

# output

Dict{Tuple{Int64, Tuple{String, String}}, Float64} with 3 entries:
  (2022, (&quot;asset1&quot;, &quot;asset2&quot;)) =&gt; 0.0797817
  (2021, (&quot;asset3&quot;, &quot;asset4&quot;)) =&gt; 0.13097
  (2021, (&quot;asset1&quot;, &quot;asset2&quot;)) =&gt; 0.158874</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/TulipaEnergy/TulipaEnergyModel.jl/blob/b204e0af62e039bf3199af550851d704f9442b3f/src/economic-parameters.jl#L212-L317">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TulipaEnergyModel.calculate_weight_for_investment_discounts-Tuple{MetaGraphsNext.MetaGraph, Vararg{Any, 4}}" href="#TulipaEnergyModel.calculate_weight_for_investment_discounts-Tuple{MetaGraphsNext.MetaGraph, Vararg{Any, 4}}"><code>TulipaEnergyModel.calculate_weight_for_investment_discounts</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">calculate_weight_for_investment_discounts(graph::MetaGraph,
                                          years,
                                          investable_assets,
                                          assets,
                                          model_parameters,
                                         )</code></pre><p>Calculates the weight for investment discounts for each asset, both energy assets and transport assets. Internally calls <a href="#TulipaEnergyModel.calculate_annualized_cost-NTuple{5, Any}"><code>calculate_annualized_cost</code></a>, <a href="#TulipaEnergyModel.calculate_salvage_value-NTuple{5, Any}"><code>calculate_salvage_value</code></a>, <a href="#TulipaEnergyModel.calculate_weight_for_investment_discounts-NTuple{6, Any}"><code>calculate_weight_for_investment_discounts</code></a>.</p><p><strong>Arguments</strong></p><ul><li><code>graph::MetaGraph</code>: A graph</li><li><code>years::Array</code>: An array of years to be considered.</li><li><code>investable_assets::Dict</code>: A dictionary where the key is a year, and the value is an array of assets that are relevant for that year.</li><li><code>assets::Array</code>: An array of assets.</li><li><code>model_parameters::ModelParameters</code>: A model parameters structure.</li></ul><p><strong>Returns</strong></p><ul><li>A <code>Dict</code> where the keys are tuples <code>(year, asset)</code> representing the year and the asset, and the values are the weights for investment discounts.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/TulipaEnergy/TulipaEnergyModel.jl/blob/b204e0af62e039bf3199af550851d704f9442b3f/src/economic-parameters.jl#L335-L355">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TulipaEnergyModel.compute_assets_partitions!-NTuple{4, Any}" href="#TulipaEnergyModel.compute_assets_partitions!-NTuple{4, Any}"><code>TulipaEnergyModel.compute_assets_partitions!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">compute_assets_partitions!(partitions, df, a, representative_periods)</code></pre><p>Parses the time blocks in the DataFrame <code>df</code> for the asset <code>a</code> and every representative period in the <code>timesteps_per_rp</code> dictionary, modifying the input <code>partitions</code>.</p><p><code>partitions</code> must be a dictionary indexed by the representative periods, possibly empty.</p><p><code>timesteps_per_rp</code> must be a dictionary indexed by <code>rep_period</code> and its values are the timesteps of that <code>rep_period</code>.</p><p>To obtain the partitions, the columns <code>specification</code> and <code>partition</code> from <code>df</code> are passed to the function <a href="#TulipaEnergyModel._parse_rp_partition"><code>_parse_rp_partition</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/TulipaEnergy/TulipaEnergyModel.jl/blob/b204e0af62e039bf3199af550851d704f9442b3f/src/io.jl#L736-L751">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TulipaEnergyModel.compute_constraints_partitions-Tuple{Any, Any, Any}" href="#TulipaEnergyModel.compute_constraints_partitions-Tuple{Any, Any, Any}"><code>TulipaEnergyModel.compute_constraints_partitions</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">cons_partitions = compute_constraints_partitions(graph, representative_periods)</code></pre><p>Computes the constraints partitions using the assets and flows partitions stored in the graph, and the representative periods.</p><p>The function computes the constraints partitions by iterating over the partition dictionary, which specifies the partition strategy for each resolution (i.e., lowest or highest). For each asset and representative period, it calls the <code>compute_rp_partition</code> function to compute the partition based on the strategy.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/TulipaEnergy/TulipaEnergyModel.jl/blob/b204e0af62e039bf3199af550851d704f9442b3f/src/time-resolution.jl#L5-L15">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TulipaEnergyModel.compute_dual_variables-Tuple{Any}" href="#TulipaEnergyModel.compute_dual_variables-Tuple{Any}"><code>TulipaEnergyModel.compute_dual_variables</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">compute_dual_variables(model)</code></pre><p>Compute the dual variables for the given model.</p><p>If the model does not have dual variables, this function fixes the discrete variables, optimizes the model, and then computes the dual variables.</p><p><strong>Arguments</strong></p><ul><li><code>model</code>: The model for which to compute the dual variables.</li></ul><p><strong>Returns</strong></p><p>A named tuple containing the dual variables of selected constraints.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/TulipaEnergy/TulipaEnergyModel.jl/blob/b204e0af62e039bf3199af550851d704f9442b3f/src/solve-model.jl#L198-L210">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TulipaEnergyModel.compute_flows_partitions!-NTuple{5, Any}" href="#TulipaEnergyModel.compute_flows_partitions!-NTuple{5, Any}"><code>TulipaEnergyModel.compute_flows_partitions!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">compute_flows_partitions!(partitions, df, u, v, representative_periods)</code></pre><p>Parses the time blocks in the DataFrame <code>df</code> for the flow <code>(u, v)</code> and every representative period in the <code>timesteps_per_rp</code> dictionary, modifying the input <code>partitions</code>.</p><p><code>partitions</code> must be a dictionary indexed by the representative periods, possibly empty.</p><p><code>timesteps_per_rp</code> must be a dictionary indexed by <code>rep_period</code> and its values are the timesteps of that <code>rep_period</code>.</p><p>To obtain the partitions, the columns <code>specification</code> and <code>partition</code> from <code>df</code> are passed to the function <a href="#TulipaEnergyModel._parse_rp_partition"><code>_parse_rp_partition</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/TulipaEnergy/TulipaEnergyModel.jl/blob/b204e0af62e039bf3199af550851d704f9442b3f/src/io.jl#L770-L785">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TulipaEnergyModel.compute_rp_partition-Tuple{AbstractVector{&lt;:AbstractVector{&lt;:UnitRange{&lt;:Integer}}}, Any}" href="#TulipaEnergyModel.compute_rp_partition-Tuple{AbstractVector{&lt;:AbstractVector{&lt;:UnitRange{&lt;:Integer}}}, Any}"><code>TulipaEnergyModel.compute_rp_partition</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">rp_partition = compute_rp_partition(partitions, :lowest)</code></pre><p>Given the timesteps of various flows/assets in the <code>partitions</code> input, compute the representative period partitions.</p><p>Each element of <code>partitions</code> is a partition with the following assumptions:</p><ul><li>An element is of the form <code>V = [r₁, r₂, …, rₘ]</code>, where each <code>rᵢ</code> is a range <code>a:b</code>.</li><li><code>r₁</code> starts at 1.</li><li><code>rᵢ₊₁</code> starts at the end of <code>rᵢ</code> plus 1.</li><li><code>rₘ</code> ends at some value <code>N</code>, that is the same for all elements of <code>partitions</code>.</li></ul><p>Notice that this implies that they form a disjunct partition of <code>1:N</code>.</p><p>The output will also be a partition with the conditions above.</p><p><strong>Strategies</strong></p><p><strong>:lowest</strong></p><p>If <code>strategy = :lowest</code> (default), then the output is constructed greedily, i.e., it selects the next largest breakpoint following the algorithm below:</p><ol><li>Input: <code>Vᴵ₁, …, Vᴵₚ</code>, a list of time blocks. Each element of <code>Vᴵⱼ</code> is a range <code>r = r.start:r.end</code>. Output: <code>V</code>.</li><li>Compute the end of the representative period <code>N</code> (all <code>Vᴵⱼ</code> should have the same end)</li><li>Start with an empty <code>V = []</code></li><li>Define the beginning of the range <code>s = 1</code></li><li>Define an array with all the next breakpoints <code>B</code> such that <code>Bⱼ</code> is the first <code>r.end</code> such that <code>r.end ≥ s</code> for each <code>r ∈ Vᴵⱼ</code>.</li><li>The end of the range will be the <code>e = max Bⱼ</code>.</li><li>Define <code>r = s:e</code> and add <code>r</code> to the end of <code>V</code>.</li><li>If <code>e = N</code>, then END</li><li>Otherwise, define <code>s = e + 1</code> and go to step 4.</li></ol><p><strong>Examples</strong></p><pre><code class="language-julia hljs">partition1 = [1:4, 5:8, 9:12]
partition2 = [1:3, 4:6, 7:9, 10:12]
compute_rp_partition([partition1, partition2], :lowest)

# output

3-element Vector{UnitRange{Int64}}:
 1:4
 5:8
 9:12</code></pre><pre><code class="language-julia hljs">partition1 = [1:1, 2:3, 4:6, 7:10, 11:12]
partition2 = [1:2, 3:4, 5:5, 6:7, 8:9, 10:12]
compute_rp_partition([partition1, partition2], :lowest)

# output

5-element Vector{UnitRange{Int64}}:
 1:2
 3:4
 5:6
 7:10
 11:12</code></pre><p><strong>:highest</strong></p><p>If <code>strategy = :highest</code>, then the output selects includes all the breakpoints from the input. Another way of describing it, is to select the minimum end-point instead of the maximum end-point in the <code>:lowest</code> strategy.</p><p><strong>Examples</strong></p><pre><code class="language-julia hljs">partition1 = [1:4, 5:8, 9:12]
partition2 = [1:3, 4:6, 7:9, 10:12]
compute_rp_partition([partition1, partition2], :highest)

# output

6-element Vector{UnitRange{Int64}}:
 1:3
 4:4
 5:6
 7:8
 9:9
 10:12</code></pre><pre><code class="language-julia hljs">partition1 = [1:1, 2:3, 4:6, 7:10, 11:12]
partition2 = [1:2, 3:4, 5:5, 6:7, 8:9, 10:12]
compute_rp_partition([partition1, partition2], :highest)

# output

10-element Vector{UnitRange{Int64}}:
 1:1
 2:2
 3:3
 4:4
 5:5
 6:6
 7:7
 8:9
 10:10
 11:12</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/TulipaEnergy/TulipaEnergyModel.jl/blob/b204e0af62e039bf3199af550851d704f9442b3f/src/time-resolution.jl#L107-L212">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TulipaEnergyModel.construct_dataframes-NTuple{4, Any}" href="#TulipaEnergyModel.construct_dataframes-NTuple{4, Any}"><code>TulipaEnergyModel.construct_dataframes</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">dataframes = construct_dataframes(
    graph,
    representative_periods,
    constraints_partitions,, IteratorSize
    years,
)</code></pre><p>Computes the data frames used to linearize the variables and constraints. These are used internally in the model only.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/TulipaEnergy/TulipaEnergyModel.jl/blob/b204e0af62e039bf3199af550851d704f9442b3f/src/create-model.jl#L81-L91">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TulipaEnergyModel.create_internal_structures-Tuple{Any}" href="#TulipaEnergyModel.create_internal_structures-Tuple{Any}"><code>TulipaEnergyModel.create_internal_structures</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">graph, representative_periods, timeframe  = create_internal_structures(connection)</code></pre><p>Return the <code>graph</code>, <code>representative_periods</code>, and <code>timeframe</code> structures given the input dataframes structure.</p><p>The details of these structures are:</p><ul><li><p><code>graph</code>: a MetaGraph with the following information:</p><ul><li><code>labels(graph)</code>: All assets.</li><li><code>edge_labels(graph)</code>: All flows, in pair format <code>(u, v)</code>, where <code>u</code> and <code>v</code> are assets.</li><li><code>graph[a]</code>: A <a href="#TulipaEnergyModel.GraphAssetData"><code>TulipaEnergyModel.GraphAssetData</code></a> structure for asset <code>a</code>.</li><li><code>graph[u, v]</code>: A <a href="#TulipaEnergyModel.GraphFlowData"><code>TulipaEnergyModel.GraphFlowData</code></a> structure for flow <code>(u, v)</code>.</li></ul></li><li><p><code>representative_periods</code>: An array of <a href="#TulipaEnergyModel.RepresentativePeriod"><code>TulipaEnergyModel.RepresentativePeriod</code></a> ordered by their IDs.</p></li><li><p><code>timeframe</code>: Information of <a href="#TulipaEnergyModel.Timeframe"><code>TulipaEnergyModel.Timeframe</code></a>.</p></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/TulipaEnergy/TulipaEnergyModel.jl/blob/b204e0af62e039bf3199af550851d704f9442b3f/src/io.jl#L4-L23">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TulipaEnergyModel.create_intervals_for_years-Tuple{Any}" href="#TulipaEnergyModel.create_intervals_for_years-Tuple{Any}"><code>TulipaEnergyModel.create_intervals_for_years</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">create_intervals(years)</code></pre><p>Create a dictionary of intervals for <code>years</code>. The interval is assigned to the its starting year. The last interval is 1.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/TulipaEnergy/TulipaEnergyModel.jl/blob/b204e0af62e039bf3199af550851d704f9442b3f/src/create-model.jl#L542-L547">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TulipaEnergyModel.create_model!-Tuple{Any}" href="#TulipaEnergyModel.create_model!-Tuple{Any}"><code>TulipaEnergyModel.create_model!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">create_model!(energy_problem; verbose = false)</code></pre><p>Create the internal model of an <a href="#TulipaEnergyModel.EnergyProblem"><code>TulipaEnergyModel.EnergyProblem</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/TulipaEnergy/TulipaEnergyModel.jl/blob/b204e0af62e039bf3199af550851d704f9442b3f/src/create-model.jl#L561-L565">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TulipaEnergyModel.create_model-NTuple{7, Any}" href="#TulipaEnergyModel.create_model-NTuple{7, Any}"><code>TulipaEnergyModel.create_model</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">model = create_model(graph, representative_periods, dataframes, timeframe, groups; write_lp_file = false, enable_names = true)</code></pre><p>Create the energy model given the <code>graph</code>, <code>representative_periods</code>, dictionary of <code>dataframes</code> (created by <a href="#TulipaEnergyModel.construct_dataframes-NTuple{4, Any}"><code>construct_dataframes</code></a>), timeframe, and groups.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/TulipaEnergy/TulipaEnergyModel.jl/blob/b204e0af62e039bf3199af550851d704f9442b3f/src/create-model.jl#L601-L605">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TulipaEnergyModel.default_parameters-Tuple{Any}" href="#TulipaEnergyModel.default_parameters-Tuple{Any}"><code>TulipaEnergyModel.default_parameters</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">default_parameters(Val(optimizer_name_symbol))
default_parameters(optimizer)
default_parameters(optimizer_name_symbol)
default_parameters(optimizer_name_string)</code></pre><p>Returns the default parameters for a given JuMP optimizer. Falls back to <code>Dict()</code> for undefined solvers.</p><p><strong>Arguments</strong></p><p>There are four ways to use this function:</p><ul><li><code>Val(optimizer_name_symbol)</code>: This uses type dispatch with the special <code>Val</code> type. Pass the solver name as a Symbol (e.g., <code>Val(:HiGHS)</code>).</li><li><code>optimizer</code>: The JuMP optimizer type (e.g., <code>HiGHS.Optimizer</code>).</li><li><code>optimizer_name_symbol</code> or <code>optimizer_name_string</code>: Pass the name in Symbol or String format and it will be converted to <code>Val</code>.</li></ul><p>Using <code>Val</code> is necessary for the dispatch. All other cases will convert the argument and call the <code>Val</code> version, which might lead to type instability.</p><p><strong>Examples</strong></p><pre><code class="language-julia hljs">using HiGHS
default_parameters(HiGHS.Optimizer)

# output

Dict{String, Any} with 1 entry:
  &quot;output_flag&quot; =&gt; false</code></pre><p>Another case</p><pre><code class="language-julia hljs">default_parameters(Val(:Cbc))

# output

Dict{String, Any} with 1 entry:
  &quot;logLevel&quot; =&gt; 0</code></pre><pre><code class="language-julia hljs">default_parameters(:Cbc) == default_parameters(&quot;Cbc&quot;) == default_parameters(Val(:Cbc))

# output

true</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/TulipaEnergy/TulipaEnergyModel.jl/blob/b204e0af62e039bf3199af550851d704f9442b3f/src/solver-parameters.jl#L3-L55">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TulipaEnergyModel.filter_graph-Tuple{Any, Any, Any, Vararg{Any}}" href="#TulipaEnergyModel.filter_graph-Tuple{Any, Any, Any, Vararg{Any}}"><code>TulipaEnergyModel.filter_graph</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">filter_graph(graph, elements, value, key)
filter_graph(graph, elements, value, key, year)</code></pre><p>Helper function to filter elements (assets or flows) in the graph given a key (and possibly year) and value (or values). In the safest case, this is equivalent to the filters</p><pre><code class="language-julia hljs">filter_assets_whose_key_equal_to_value = a -&gt; graph[a].key == value
filter_assets_whose_key_year_equal_to_value = a -&gt; graph[a].key[year] in value
filter_flows_whose_key_equal_to_value = f -&gt; graph[f...].key == value
filter_flows_whose_key_year_equal_to_value = f -&gt; graph[f...].key[year] in value</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/TulipaEnergy/TulipaEnergyModel.jl/blob/b204e0af62e039bf3199af550851d704f9442b3f/src/create-model.jl#L62-L75">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TulipaEnergyModel.get_graph_value_or_missing-Tuple{Any, Any, Any}" href="#TulipaEnergyModel.get_graph_value_or_missing-Tuple{Any, Any, Any}"><code>TulipaEnergyModel.get_graph_value_or_missing</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_graph_value_or_missing(graph, graph_key, field_key)
get_graph_value_or_missing(graph, graph_key, field_key, year)</code></pre><p>Get <code>graph[graph_key].field_key</code> (or <code>graph[graph_key].field_key[year]</code>) or return <code>missing</code> if any of the values do not exist. We also check if <code>graph[graph_key].active[year]</code> is true if the <code>year</code> is passed and return <code>missing</code> otherwise.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/TulipaEnergy/TulipaEnergyModel.jl/blob/b204e0af62e039bf3199af550851d704f9442b3f/src/create-model.jl#L12-L20">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TulipaEnergyModel.profile_aggregation-NTuple{7, Any}" href="#TulipaEnergyModel.profile_aggregation-NTuple{7, Any}"><code>TulipaEnergyModel.profile_aggregation</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">profile_aggregation(agg, profiles, key, block, default_value)</code></pre><p>Aggregates the <code>profiles[key]</code> over the <code>block</code> using the <code>agg</code> function. If the profile does not exist, uses <code>default_value</code> instead of <strong>each</strong> profile value.</p><p><code>profiles</code> should be a dictionary of profiles, for instance <code>graph[a].profiles</code> or <code>graph[u, v].profiles</code>. If <code>profiles[key]</code> exists, then this function computes the aggregation of <code>profiles[key]</code> over the range <code>block</code> using the aggregator <code>agg</code>, i.e., <code>agg(profiles[key][block])</code>. If <code>profiles[key]</code> does not exist, then this substitutes it with a vector of <code>default_value</code>s.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/TulipaEnergy/TulipaEnergyModel.jl/blob/b204e0af62e039bf3199af550851d704f9442b3f/src/create-model.jl#L521-L531">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TulipaEnergyModel.read_parameters_from_file-Tuple{Any}" href="#TulipaEnergyModel.read_parameters_from_file-Tuple{Any}"><code>TulipaEnergyModel.read_parameters_from_file</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">read_parameters_from_file(filepath)</code></pre><p>Parse the parameters from a file into a dictionary. The keys and values are NOT checked to be valid parameters for any specific solvers.</p><p>The file should contain a list of lines of the following type:</p><pre><code class="language-toml hljs">key = value</code></pre><p>The file is parsed as <a href="https://toml.io">TOML</a>, which is intuitive. See the example below.</p><p><strong>Example</strong></p><pre><code class="language-julia hljs"># Creating file
filepath, io = mktemp()
println(io,
  &quot;&quot;&quot;
    true_or_false = true
    integer_number = 5
    real_number1 = 3.14
    big_number = 6.66E06
    small_number = 1e-8
    string = &quot;something&quot;
  &quot;&quot;&quot;
)
close(io)
# Reading
read_parameters_from_file(filepath)

# output

Dict{String, Any} with 6 entries:
  &quot;string&quot;         =&gt; &quot;something&quot;
  &quot;integer_number&quot; =&gt; 5
  &quot;small_number&quot;   =&gt; 1.0e-8
  &quot;true_or_false&quot;  =&gt; true
  &quot;real_number1&quot;   =&gt; 3.14
  &quot;big_number&quot;     =&gt; 6.66e6</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/TulipaEnergy/TulipaEnergyModel.jl/blob/b204e0af62e039bf3199af550851d704f9442b3f/src/solver-parameters.jl#L68-L111">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TulipaEnergyModel.run_scenario-Tuple{Any}" href="#TulipaEnergyModel.run_scenario-Tuple{Any}"><code>TulipaEnergyModel.run_scenario</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">energy_problem = run_scenario(connection; optimizer, parameters, write_lp_file, log_file, show_log)</code></pre><p>Run the scenario in the given <code>connection</code> and return the energy problem.</p><p>The <code>optimizer</code> and <code>parameters</code> keyword arguments can be used to change the optimizer (the default is HiGHS) and its parameters. The variables are passed to the <a href="#TulipaEnergyModel.solve_model"><code>solve_model</code></a> function.</p><p>Set <code>write_lp_file = true</code> to export the problem that is sent to the solver to a file for viewing. Set <code>show_log = false</code> to silence printing the log while running. Specify a <code>log_file</code> name to export the log to a file.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/TulipaEnergy/TulipaEnergyModel.jl/blob/b204e0af62e039bf3199af550851d704f9442b3f/src/run-scenario.jl#L3-L14">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TulipaEnergyModel.safe_comparison-Tuple{Any, Any, Any, Vararg{Any}}" href="#TulipaEnergyModel.safe_comparison-Tuple{Any, Any, Any, Vararg{Any}}"><code>TulipaEnergyModel.safe_comparison</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">safe_comparison(graph, a, value, key)
safe_comparison(graph, a, value, key, year)</code></pre><p>Check if <code>graph[a].value</code> (or <code>graph[a].value[year]</code>) is equal to <code>value</code>. This function assumes that if <code>graph[a].value</code> is a dictionary and <code>value</code> is not, then you made a mistake. This makes it safer, because it will not silently return <code>false</code>. It also checks for missing.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/TulipaEnergy/TulipaEnergyModel.jl/blob/b204e0af62e039bf3199af550851d704f9442b3f/src/create-model.jl#L33-L41">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TulipaEnergyModel.safe_inclusion-Tuple{Any, Any, Vector, Vararg{Any}}" href="#TulipaEnergyModel.safe_inclusion-Tuple{Any, Any, Vector, Vararg{Any}}"><code>TulipaEnergyModel.safe_inclusion</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">safe_inclusion(graph, a, value, key)
safe_inclusion(graph, a, value, key, year)</code></pre><p>Check if <code>graph[a].value</code> (or <code>graph[a].value[year]</code>) is in <code>values</code>. This correctly check that <code>missing in [missing]</code> returns <code>false</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/TulipaEnergy/TulipaEnergyModel.jl/blob/b204e0af62e039bf3199af550851d704f9442b3f/src/create-model.jl#L50-L56">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TulipaEnergyModel.save_solution_to_file-NTuple{4, Any}" href="#TulipaEnergyModel.save_solution_to_file-NTuple{4, Any}"><code>TulipaEnergyModel.save_solution_to_file</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">save_solution_to_file(output_file, graph, solution)</code></pre><p>Saves the solution in CSV files inside <code>output_folder</code>.</p><p>The following files are created:</p><ul><li><code>assets-investment.csv</code>: The format of each row is <code>a,v,p*v</code>, where <code>a</code> is the asset name, <code>v</code> is the corresponding asset investment value, and <code>p</code> is the corresponding capacity value. Only investable assets are included.</li><li><code>assets-investments-energy.csv</code>: The format of each row is <code>a,v,p*v</code>, where <code>a</code> is the asset name, <code>v</code> is the corresponding asset investment value on energy, and <code>p</code> is the corresponding energy capacity value. Only investable assets with a <code>storage_method_energy</code> set to <code>true</code> are included.</li><li><code>flows-investment.csv</code>: Similar to <code>assets-investment.csv</code>, but for flows.</li><li><code>flows.csv</code>: The value of each flow, per <code>(from, to)</code> flow, <code>rp</code> representative period and <code>timestep</code>. Since the flow is in power, the value at a timestep is equal to the value at the corresponding time block, i.e., if flow[1:3] = 30, then flow[1] = flow[2] = flow[3] = 30.</li><li><code>storage-level.csv</code>: The value of each storage level, per <code>asset</code>, <code>rp</code> representative period, and <code>timestep</code>. Since the storage level is in energy, the value at a timestep is a proportional fraction of the value at the corresponding time block, i.e., if level[1:3] = 30, then level[1] = level[2] = level[3] = 10.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/TulipaEnergy/TulipaEnergyModel.jl/blob/b204e0af62e039bf3199af550851d704f9442b3f/src/io.jl#L440-L461">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TulipaEnergyModel.save_solution_to_file-Tuple{Any, EnergyProblem}" href="#TulipaEnergyModel.save_solution_to_file-Tuple{Any, EnergyProblem}"><code>TulipaEnergyModel.save_solution_to_file</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">save_solution_to_file(output_folder, energy_problem)</code></pre><p>Saves the solution from <code>energy_problem</code> in CSV files inside <code>output_file</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/TulipaEnergy/TulipaEnergyModel.jl/blob/b204e0af62e039bf3199af550851d704f9442b3f/src/io.jl#L423-L427">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TulipaEnergyModel.solve_model" href="#TulipaEnergyModel.solve_model"><code>TulipaEnergyModel.solve_model</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">solution = solve_model(model[, optimizer; parameters])</code></pre><p>Solve the JuMP model and return the solution. The <code>optimizer</code> argument should be an MILP solver from the JuMP list of <a href="https://jump.dev/JuMP.jl/stable/installation/#Supported-solvers">supported solvers</a>. By default we use HiGHS.</p><p>The keyword argument <code>parameters</code> should be passed as a list of <code>key =&gt; value</code> pairs. These can be created manually, obtained using <a href="#TulipaEnergyModel.default_parameters-Tuple{Any}"><code>default_parameters</code></a>, or read from a file using <a href="#TulipaEnergyModel.read_parameters_from_file-Tuple{Any}"><code>read_parameters_from_file</code></a>.</p><p>The <code>solution</code> object is a mutable struct with the following fields:</p><ul><li><p><code>assets_investment[a]</code>: The investment for each asset, indexed on the investable asset <code>a</code>. To create a traditional array in the order given by the investable assets, one can run</p><pre><code class="nohighlight hljs">[solution.assets_investment[a] for a in labels(graph) if graph[a].investable]</code></pre><ul><li><code>assets_investment_energy[a]</code>: The investment on energy component for each asset, indexed on the investable asset <code>a</code> with a <code>storage_method_energy</code> set to <code>true</code>.</li></ul><p>To create a traditional array in the order given by the investable assets, one can run</p><pre><code class="nohighlight hljs">[solution.assets_investment_energy[a] for a in labels(graph) if graph[a].investable &amp;&amp; graph[a].storage_method_energy</code></pre></li><li><p><code>flows_investment[u, v]</code>: The investment for each flow, indexed on the investable flow <code>(u, v)</code>. To create a traditional array in the order given by the investable flows, one can run</p><pre><code class="nohighlight hljs">[solution.flows_investment[(u, v)] for (u, v) in edge_labels(graph) if graph[u, v].investable]</code></pre></li><li><p><code>storage_level_intra_rp[a, rp, timesteps_block]</code>: The storage level for the storage asset <code>a</code> for a representative period <code>rp</code> and a time block <code>timesteps_block</code>. The list of time blocks is defined by <code>constraints_partitions</code>, which was used to create the model. To create a vector with all values of <code>storage_level_intra_rp</code> for a given <code>a</code> and <code>rp</code>, one can run</p><pre><code class="nohighlight hljs">[solution.storage_level_intra_rp[a, rp, timesteps_block] for timesteps_block in constraints_partitions[:lowest_resolution][(a, rp)]]</code></pre></li><li><p><code>storage_level_inter_rp[a, pb]</code>: The storage level for the storage asset <code>a</code> for a periods block <code>pb</code>. To create a vector with all values of <code>storage_level_inter_rp</code> for a given <code>a</code>, one can run</p><pre><code class="nohighlight hljs">[solution.storage_level_inter_rp[a, bp] for bp in graph[a].timeframe_partitions[a]]</code></pre></li><li><p><code>flow[(u, v), rp, timesteps_block]</code>: The flow value for a given flow <code>(u, v)</code> at a given representative period <code>rp</code>, and time block <code>timesteps_block</code>. The list of time blocks is defined by <code>graph[(u, v)].partitions[rp]</code>. To create a vector with all values of <code>flow</code> for a given <code>(u, v)</code> and <code>rp</code>, one can run</p><pre><code class="nohighlight hljs">[solution.flow[(u, v), rp, timesteps_block] for timesteps_block in graph[u, v].partitions[rp]]</code></pre></li><li><p><code>objective_value</code>: A Float64 with the objective value at the solution.</p></li><li><p><code>duals</code>: A NamedTuple containing the dual variables of selected constraints.</p></li></ul><p><strong>Examples</strong></p><pre><code class="language-julia hljs">parameters = Dict{String,Any}(&quot;presolve&quot; =&gt; &quot;on&quot;, &quot;time_limit&quot; =&gt; 60.0, &quot;output_flag&quot; =&gt; true)
solution = solve_model(model, HiGHS.Optimizer; parameters = parameters)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/TulipaEnergy/TulipaEnergyModel.jl/blob/b204e0af62e039bf3199af550851d704f9442b3f/src/solve-model.jl#L103-L164">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TulipaEnergyModel.solve_model!" href="#TulipaEnergyModel.solve_model!"><code>TulipaEnergyModel.solve_model!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">solution = solve_model!(energy_problem[, optimizer; parameters])</code></pre><p>Solve the internal model of an <code>energy_problem</code>. The solution obtained by calling <a href="#TulipaEnergyModel.solve_model"><code>solve_model</code></a> is returned.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/TulipaEnergy/TulipaEnergyModel.jl/blob/b204e0af62e039bf3199af550851d704f9442b3f/src/solve-model.jl#L3-L8">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TulipaEnergyModel.solve_model!-Tuple{Any, Any, Vararg{Any}}" href="#TulipaEnergyModel.solve_model!-Tuple{Any, Any, Vararg{Any}}"><code>TulipaEnergyModel.solve_model!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">solution = solve_model!(dataframes, model, ...)</code></pre><p>Solves the JuMP <code>model</code>, returns the solution, and modifies <code>dataframes</code> to include the solution. The modifications made to <code>dataframes</code> are:</p><ul><li><code>df_flows.solution = solution.flow</code></li><li><code>df_storage_level_intra_rp.solution = solution.storage_level_intra_rp</code></li><li><code>df_storage_level_inter_rp.solution = solution.storage_level_inter_rp</code></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/TulipaEnergy/TulipaEnergyModel.jl/blob/b204e0af62e039bf3199af550851d704f9442b3f/src/solve-model.jl#L78-L87">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../91-developer/">« Developer Documentation</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.8.0 on <span class="colophon-date" title="Wednesday 15 January 2025 12:30">Wednesday 15 January 2025</span>. Using Julia version 1.11.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
